import e from"./Layout-808b9c88.js";import"./lodash-b0ff3f6f.js";import{d as a}from"./vue-toast-notification-f2a3de7a.js";import{am as t,o as l,c as i,a as s,k as o,q as r,M as n,N as c,C as d,E as u,K as m,p as b}from"./@vue-9ee83fb6.js";import"./@vueuse-3c3b27e0.js";import"./unidecode-5a54da0f.js";import"./@ckeditor-fa9b3055.js";import"./vue-abe8eda6.js";const g={class:"mainAppWrapper d-flex flex-column"},h={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},p={class:"d-flex justify-space-between"},v={class:"--left d-flex me-4"},f={class:"--listing"},y={class:"d-flex flex-1-0 flex-column w-0"},w=s("span",null,null,-1),j={class:"--objectTitle"},D=["value"],S={class:"--right"},k=s("span",{class:"--text"},"Main",-1),x=s("span",{class:"--text"},"Revision",-1),T=s("span",{class:"--text"},"Schedule",-1),O=s("span",{class:"--text"},"Relation",-1),_={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-auto"},L={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},I=["value"],C={class:"detailSidebarWrapper"},N={class:"detailSidebarBlock"},P=s("h4",{class:"--blockTitle"},"Languague",-1),$={class:"--blockContent"},M={class:"--formWrapper"},A={class:"--formItem"},K={class:"detailSidebarBlock"},U=s("h4",{class:"--blockTitle"},"Meta Data",-1),W={class:"--blockContent"},F={class:"metaDataGroup"},V={class:"--metaDataItem"},B={class:"--metaDataItem"},J={class:"--metaDataItem"},z={class:"--metaDataItem"},E={class:"--metaDataItem"},R={class:"--metaDataItem"},q={class:"--metaDataItem"},G={class:"--metaDataItem"},H={props:{data:Object,label:String,route:String,dataField:Array,options:[Array],modelValue:[Object,Array],breadcrumb:[Object,Array],warning:String,colorPrimary:String,colorLight:String,objectSetting:[Object,Array]},data(){var e,t,l="";return this.language&&(l=this.language),{showDeleteDialog:!1,itemToDelete:null,dataNew:this.data,showFileSelectionDialog:!1,languages:this.sidebar.language,selectedLanguage:null,panel:[0],tab:null,validationMessages:{},locale:l,toast:a.useToast({position:"top-right",style:{zIndex:"200"}}),dataKey:this.breadcrumb.item,title:null==(t=null==(e=this.breadcrumb)?void 0:e.root)?void 0:t.name}},name:"Detail",mounted(){this.createLocalStorage(),this.checkTitle()},methods:{checkTatus(e){switch(e){case"Published":return"blue";case"Unpublished":return"red";default:return"gray"}},checkTitle(){if(this.objectSetting){const e=this.objectSetting.find((e=>{var a,t;return e.id===(null==(t=null==(a=this.breadcrumb)?void 0:a.root)?void 0:t.id)}));e&&(this.title=e.title)}},createLocalStorage(e=null){var a=window.location.href;window.localStorage.setItem(a,e)},showDeleteConfirmationDialog(e){this.itemToDelete=e,this.showDeleteDialog=!0},deleteItem(){const e=new FormData;e.append("id",this.itemToDelete),this.$inertia.post(route("object_delete",{object:this.classObject.id}),e),this.showDeleteDialog=!1},closeDeleteDialog(){this.showDeleteDialog=!1,this.itemToDelete=null},save(e){this.loading=!0,this.dataNew.status=e,this.dataNew.language=this.sidebar.language;const a=new FormData;for(const l in this.dataNew)"children"===l?a.append(l,JSON.stringify(this.dataNew[l])):a.append(l,this.dataNew[l]);a.append("objectKey",this.dataKey);const t=this.dataNew.id;fetch(route("vuetify_object_detail",{id:t}),{method:"POST",body:a}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((e=>{e.warning?this.warningMess(e.warning):this.$nextTick((()=>{this.successMess("Update object success!"),this.createLocalStorage()}))})).catch((e=>{console.error("Lỗi xảy ra khi gửi yêu cầu:",e)})).finally((()=>{this.loading=!1}))},back(e){const a=window.location.href;let t=window.localStorage.getItem(a);t=JSON.parse(t),t&&"onchange"in t?confirm("Leave Site? Changes you made may not be saved.")&&this.$inertia.get(route("vuetify_object",{object:e})):this.$inertia.get(route("vuetify_object",{object:e}))},warningMess(e){e&&setTimeout((()=>{this.toast.open({message:e,type:"warning"})}),1e3)},successMess(e){e&&setTimeout((()=>{this.toast.open({message:e,type:"success"})}),1e3)}},watch:{languages(e){this.$inertia.get(route("vuetify_object_detail",{id:this.dataNew.id,language:e}))},dataNew:{deep:!0,handler(){this.createLocalStorage(JSON.stringify({onchange:!0}))}},dataKey:{deep:!0,handler(){this.createLocalStorage(JSON.stringify({onchange:!0}))}}}},Q=Object.assign(H,{layout:e},{props:{data:Object,breadcrumb:[Object,Array],language:String,languageOption:Object,sidebar:Object,classObject:Object,warning:String,colorPrimary:String,colorLight:String,objectSetting:[Object,Array]},setup:e=>(a,H)=>{const Q=t("v-icon"),X=t("v-breadcrumbs-item"),Y=t("v-breadcrumbs"),Z=t("v-chip"),ee=t("v-btn"),ae=t("v-tab"),te=t("v-tabs"),le=t("DataObjectField"),ie=t("v-form"),se=t("Select");return l(),i("div",g,[s("div",h,[s("div",p,[s("div",v,[s("div",{class:"--objectIcon me-3",onClick:H[0]||(H[0]=t=>a.back(e.breadcrumb.root.id))},[s("div",f,[o(Q,{icon:"mdi-cube-outline"}),o(Q,{icon:"mdi-arrow-left"}),o(Q,{icon:"mdi-cube-outline"})])]),s("div",y,[o(Y,{class:"breadcrumbWrapper pa-0"},{default:r((()=>[o(X,{class:"--itemBreadcrumb",title:"Home",onClick:H[1]||(H[1]=t=>a.back(e.breadcrumb.root.id))},{default:r((()=>[s("small",null,n(a.title),1)])),_:1}),o(X,{class:"--itemBreadcrumb",disabled:!0},{default:r((()=>[w])),_:1})])),_:1}),s("h3",j,[s("span",{contenteditable:"",value:a.dataKey,onInput:H[2]||(H[2]=e=>a.dataKey=e.target.innerText),class:"me-1"},n(e.breadcrumb.item),41,D),o(Q,{icon:"mdi-pencil",size:"x-small",color:"blue-grey-lighten-4",class:"me-2"}),o(Z,{color:a.checkTatus(e.breadcrumb.status)},{default:r((()=>[c(n(e.breadcrumb.status),1)])),_:1},8,["color"])])])]),s("div",S,[o(ee,{class:"btn-primary me-2",variant:"elevated","prepend-icon":"mdi-check-all",onClick:H[3]||(H[3]=e=>a.save("Publish"))},{default:r((()=>[c(" Save & Publish ")])),_:1}),o(ee,{class:"btn-primary me-2",variant:"elevated","prepend-icon":"mdi-check",onClick:H[4]||(H[4]=e=>a.save("Draft"))},{default:r((()=>[c(" Save ")])),_:1}),e.sidebar.published?(l(),d(ee,{key:0,class:"btn-primary me-2",variant:"elevated","prepend-icon":"mdi-tray-arrow-down",onClick:H[5]||(H[5]=e=>a.save("UnPublish"))},{default:r((()=>[c(" Unpublish ")])),_:1})):u("",!0),o(ee,{variant:"elevated",class:"bg-red","prepend-icon":"mdi-delete-outline",onClick:H[6]||(H[6]=t=>a.showDeleteConfirmationDialog(e.data.id))},{default:r((()=>[c(" Delete ")])),_:1})])]),o(te,{modelValue:a.tab,"onUpdate:modelValue":H[7]||(H[7]=e=>a.tab=e),class:"mainTabPanel"},{default:r((()=>[o(ae,{value:"objectTab-main"},{default:r((()=>[k])),_:1}),o(ae,{value:"objectTab-revision"},{default:r((()=>[x])),_:1}),o(ae,{value:"objectTab-schedule"},{default:r((()=>[T])),_:1}),o(ae,{value:"objectTab-relation"},{default:r((()=>[O])),_:1})])),_:1},8,["modelValue"])]),s("div",_,[s("div",L,[(l(!0),i(m,null,b(a.dataNew.children,((t,s)=>(l(),i("div",{key:s,value:t,class:"componentLayout-tabPanel mb-8"},[o(ie,null,{default:r((()=>[o(le,{item:t,languages:a.languages,colorPrimary:e.colorPrimary,colorLight:e.colorLight},null,8,["item","languages","colorPrimary","colorLight"])])),_:2},1024)],8,I)))),128))]),s("div",C,[s("div",N,[P,s("div",$,[s("div",M,[s("div",A,[o(se,{items:e.languageOption,name:"Languge",modelValue:a.languages,"onUpdate:modelValue":H[8]||(H[8]=e=>a.languages=e),density:"compact","hide-details":"auto",label:"Languge"},null,8,["items","modelValue"])])])])]),s("div",K,[U,s("div",W,[s("div",F,[s("div",V,[s("small",null,n(a.$t("ID")),1),s("p",null,n(e.sidebar.id),1)]),s("div",B,[s("small",null,n(a.$t("Class")),1),s("p",null,n(e.sidebar.classTitle?e.sidebar.classTitle:e.sidebar.className),1)]),s("div",J,[s("small",null,n(a.$t("Key")),1),s("p",null,n(e.sidebar.key),1)]),s("div",z,[s("small",null,n(a.$t("Full Path")),1),s("p",null,n(e.sidebar.fullPath),1)]),s("div",E,[s("small",null,n(a.$t("Created date")),1),s("p",null,n(e.sidebar.creationDate),1)]),s("div",R,[s("small",null,n(a.$t("User Owner")),1),s("p",null,n(e.sidebar.userOwner),1)]),s("div",q,[s("small",null,n(a.$t("Modification date")),1),s("p",null,n(e.sidebar.modificationDate),1)]),s("div",G,[s("small",null,n(a.$t("User modification")),1),s("p",null,n(e.sidebar.userModification),1)])])])])])])])}});export{Q as default};
