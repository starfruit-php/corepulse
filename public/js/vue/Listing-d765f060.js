import e from"./Layout-69f33ced.js";import{r as t,o as l,h as a,f as o,a as i,w as r,d as s,t as n,U as c,x as d}from"./app-454c6d6d.js";import m from"./ModalSelected-26a5d712.js";const u={class:"mainAppWrapper d-flex flex-column"},p={class:"mainBarWrapper px-5 py-3 d-flex justify-space-between align-center flex-grow-0 flex-shrink-0"},h={class:"--left d-flex align-center"},f=o("div",{class:"d-flex flex-column me-4"},[o("h3",{class:"--objectTitle me-4"},"Role")],-1),x={class:"--right"},g=o("div",{class:"utilityBarWrapper flex-grow-0 flex-shrink-0"},null,-1),v={class:"mainContentWrapper px-5 py-4 d-flex flex-column flex-grow-1 flex-shrink-1 overflow-hidden"},b={class:"tableListingWrapper d-flex flex-column"},y={name:"Role",data(){var e=window.location.href;let t=window.localStorage.getItem(e);t?t=JSON.parse(t):(t=[{title:this.$t("Name"),align:"start",key:"name",sortable:!0,removable:!0}],window.localStorage.setItem(e,JSON.stringify(t)));var l=[];t.map((e=>{e.removable&&l.push(e)}));var a=[this.createAction("Sửa","mdi-pencil-outline","role_detail",!1,!1,!1),this.createAction("Xóa","mdi-delete-outline","role_delete",d,!0,!0,!1)],o=[{title:"Delete",icon:"mdi-delete-outline",url:{path:"role_delete",content:{title:"Delete",content:"Some accounts are using the role. Are you sure you want to Delete all selected",confirm:"Delete"}},component:m,post:!0,reload:!1}];return{createRole:!1,fav:!0,menu:!1,message:!1,hints:!0,enabled:!0,headers:l,list:t,selected:[],routerList:{router:route("role_listing")},action:a,search:this.search,dialog:!1,formData:{key:""},selectedAction:o}},mounted(){this.checkTitle()},methods:{checkTitle(){if(this.objectSetting){const e=this.objectSetting.find((e=>e.id===this.classObject.id));e&&(this.title=e.title)}},createAction:(e,t,l,a=!1,o=!0,i=!0,r=!0)=>({title:e,icon:t,url:l,component:a,multiple:o,post:i,reload:r}),exportExcel(){let e=new FormData;if(this.data){for(var[t,l]of Object.entries(this.data))e.append("data[]",JSON.stringify(l));var a=this.headers;e.append("fields",JSON.stringify(a)),this.loading=!0,fetch(route("vuetify_export_excel"),{method:"POST",body:e}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e);console.log(t);const l=document.createElement("a");l.href=t,l.download="role_listing.xlsx",l.click(),URL.revokeObjectURL(t)})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))}}}},w=Object.assign(y,{layout:e},{props:{data:Array,totalItems:{default:0},search:{type:Object,default:{}},totalItems:Number},setup:e=>(d,m)=>{const y=t("v-icon"),w=t("v-btn"),S=t("v-menu"),j=t("v-dialog"),O=t("CustomField"),_=t("DataTableServer");return l(),a("div",u,[o("div",p,[o("div",h,[i(y,{icon:"mdi-shield-account-outline",class:"--objectIcon me-3"}),f]),o("div",x,[i(S,{modelValue:d.menu,"onUpdate:modelValue":m[1]||(m[1]=e=>d.menu=e),"close-on-content-click":!1},{activator:r((({props:e})=>[i(w,{onClick:m[0]||(m[0]=e=>d.createRole=!0),class:"btn-primary me-2",variant:"elevated"},{default:r((()=>[i(y,{left:"",class:"me-2"},{default:r((()=>[s("mdi-plus")])),_:1}),s(" "+n(d.$t("Create")),1)])),_:1})])),_:1},8,["modelValue"]),i(j,{modelValue:d.createRole,"onUpdate:modelValue":m[2]||(m[2]=e=>d.createRole=e),width:"420"},{default:r((()=>[i(c,{object:"Role",url:{path:"role_create"},urlReturn:{path:"role_detail"}})])),_:1},8,["modelValue"]),i(w,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:d.exportExcel},{default:r((()=>[s(n(d.$t("Export")),1)])),_:1},8,["onClick"]),i(O,{headers:d.headers,list:d.list,"onUpdate:headers":m[3]||(m[3]=e=>d.headers=e)},null,8,["headers","list"])])]),g,o("div",v,[o("div",b,[i(_,{listing:e.data,router:d.routerList,totalItems:e.totalItems,headers:d.headers,action:d.action,selectedAction:d.selectedAction,noOrder:d.noOrder,multiSelect:d.multiSelect},null,8,["listing","router","totalItems","headers","action","selectedAction","noOrder","multiSelect"])])])])}});export{w as default};
