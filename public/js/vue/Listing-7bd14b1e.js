import e from"./Layout-8c51cdb8.js";import{f as t,c as i,M as s}from"./app-0745d670.js";import"./vue-toast-notification-f2a3de7a.js";import{am as o,o as r,c as a,a as l,k as n,q as c,N as m,M as p}from"./@vue-9ee83fb6.js";import"./@vueuse-3c3b27e0.js";import"./unidecode-5a54da0f.js";import"./@ckeditor-fa9b3055.js";import"./vue-abe8eda6.js";import"./vue-draggable-next-3bc70602.js";import"./ckeditor5-custom-build-7f9f8982.js";import"./vue3-treeview-e35ab4eb.js";import"./vue-filepond-82332930.js";import"./filepond-136e7cc4.js";import"./filepond-plugin-image-preview-4f29f0b3.js";import"./filepond-plugin-file-validate-type-324437b8.js";import"./mapbox-gl-38e32bee.js";/* empty css             */import"./vuetify-193e6d04.js";import"./@inertiajs-d76518b1.js";import"./axios-3d65c6bd.js";import"./deepmerge-3a6ffb65.js";import"./side-channel-e57be611.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./call-bind-36d0f176.js";import"./set-function-length-801a4962.js";import"./define-data-property-daf1763a.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-61b1e1fb.js";import"./object-inspect-0fa0b9de.js";import"./nprogress-9c4c7d08.js";import"./lodash.clonedeep-c1370659.js";import"./lodash.isequal-feeae999.js";import"./@vuepic-f846cd73.js";import"./date-fns-421fcf3e.js";import"./@babel-0d6f2215.js";import"./element-plus-e3c76eb0.js";import"./lodash-es-fb3d0246.js";import"./@element-plus-283d896c.js";import"./@popperjs-2d1e819d.js";import"./@ctrl-91de2ec7.js";import"./dayjs-7398d4dd.js";import"./async-validator-8d480e59.js";import"./memoize-one-63ab667a.js";import"./escape-html-5c28ffbb.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-24fcdcc4.js";import"./vue3-apexcharts-663397fa.js";import"./apexcharts-4d1d416c.js";import"./vue-i18n-d397f996.js";import"./@intlify-90b40ed7.js";const d={class:"mainAppWrapper d-flex flex-column"},u={class:"mainBarWrapper px-5 py-3 d-flex justify-space-between align-center flex-grow-0 flex-shrink-0"},j={class:"--left d-flex align-center"},h=l("div",{class:"d-flex flex-column me-4"},[l("h3",{class:"--objectTitle me-4"},"Users")],-1),f={class:"--right"},v=l("div",{class:"utilityBarWrapper flex-grow-0 flex-shrink-0"},null,-1),g={class:"mainContentWrapper px-5 py-4 d-flex flex-column flex-grow-1 flex-shrink-1 overflow-hidden"},b={class:"tableListingWrapper d-flex flex-column"},x={name:"User",data(){var e=window.location.href;let t=window.localStorage.getItem(e);t?t=JSON.parse(t):(t=[{title:this.$t("Name"),align:"start",key:"name",sortable:!0,removable:!0},{title:this.$t("Email"),align:"start",key:"email",sortable:!0,removable:!0},{title:this.$t("Username"),align:"start",key:"username",sortable:!0,removable:!0},{title:this.$t("Active"),align:"start",key:"active",searchType:"Select",sortable:!0,removable:!0,options:[{value:"1",key:"Active"},{value:"0",key:"Inactive"}]},{title:this.$t("Role"),align:"start",key:"role",sortable:!0,removable:!1}],window.localStorage.setItem(e,JSON.stringify(t)));var o=[];t.map((e=>{e.removable&&o.push(e)}));var r=[this.createAction("Sửa","mdi-pencil-outline","user_detail",!1,!1,!1),this.createAction("Xóa","mdi-delete-outline","user_delete",i,!0,!0,!1)];return{createUser:!1,fav:!0,menu:!1,message:!1,hints:!0,enabled:!0,headers:o,selectedAction:[{title:"Delete",icon:"mdi-delete-outline",url:{path:"user_delete",content:{title:"Delete",content:"Are you sure you want to Delete all selected",confirm:"Delete"}},component:s,post:!0,reload:!1}],list:t,selected:[],routerList:{router:route("user_listing")},action:r,search:this.search,dialog:!1,formData:{key:""}}},mounted(){this.checkTitle()},methods:{checkTitle(){if(this.objectSetting){const e=this.objectSetting.find((e=>e.id===this.classObject.id));e&&(this.title=e.title)}},createAction:(e,t,i,s=!1,o=!0,r=!0,a=!0)=>({title:e,icon:t,url:i,component:s,multiple:o,post:r,reload:a}),exportExcel(){let e=new FormData;if(this.data){for(var[t,i]of Object.entries(this.data))e.append("data[]",JSON.stringify(i));var s=this.headers;e.append("fields",JSON.stringify(s)),this.loading=!0,fetch(route("vuetify_export_excel"),{method:"POST",body:e}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e);console.log(t);const i=document.createElement("a");i.href=t,i.download="user_listing.xlsx",i.click(),URL.revokeObjectURL(t)})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))}}}},y=Object.assign(x,{layout:e},{props:{data:Array,totalItems:{default:0},search:{type:Object,default:{}},totalItems:Number},setup:e=>(i,s)=>{const x=o("v-icon"),y=o("v-btn"),k=o("v-menu"),w=o("v-dialog"),S=o("CustomField"),O=o("DataTableServer");return r(),a("div",d,[l("div",u,[l("div",j,[n(x,{icon:"mdi-account-multiple-outline",class:"--objectIcon me-3"}),h]),l("div",f,[n(k,{modelValue:i.menu,"onUpdate:modelValue":s[1]||(s[1]=e=>i.menu=e),"close-on-content-click":!1},{activator:c((({props:e})=>[n(y,{onClick:s[0]||(s[0]=e=>i.createUser=!0),class:"btn-primary me-2",variant:"elevated"},{default:c((()=>[n(x,{left:"",class:"me-2"},{default:c((()=>[m("mdi-plus")])),_:1}),m(" "+p(i.$t("Create")),1)])),_:1})])),_:1},8,["modelValue"]),n(w,{modelValue:i.createUser,"onUpdate:modelValue":s[2]||(s[2]=e=>i.createUser=e),width:"420"},{default:c((()=>[n(t,{object:"User",url:{path:"user_create"},urlReturn:{path:"user_detail"}})])),_:1},8,["modelValue"]),n(y,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:i.exportExcel},{default:c((()=>[m(p(i.$t("Export")),1)])),_:1},8,["onClick"]),n(S,{headers:i.headers,list:i.list,"onUpdate:headers":s[3]||(s[3]=e=>i.headers=e)},null,8,["headers","list"])])]),v,l("div",g,[l("div",b,[n(O,{listing:e.data,router:i.routerList,totalItems:e.totalItems,headers:i.headers,action:i.action,selectedAction:i.selectedAction,noOrder:i.noOrder,multiSelect:i.multiSelect},null,8,["listing","router","totalItems","headers","action","selectedAction","noOrder","multiSelect"])])])])}});export{y as default};
