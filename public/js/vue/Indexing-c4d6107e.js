import e from"./Layout-064ecad1.js";import{r as t,o as i,h as l,f as s,t as n,a,w as o,d,i as r,F as c,l as u,c as g,y as h,x as m,M as f,k as p}from"./app-3e05614b.js";const x={class:"mainAppWrapper d-flex flex-column"},b={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},v={class:"--text"},_={class:"--text"},y={class:"--text"},I={class:"--text"},S={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-auto"},C={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},k={key:0,class:"reportTableWrapper py-4 d-flex flex-column overflow-visible"},w={class:"--filterBar d-flex align-center justify-end mb-2"},F={class:"tableListingWrapper d-flex flex-column"},A={key:0,target:"_blank"},U=s("h4",null,"Object",-1),L=s("br",null,null,-1),V=s("p",null,"Your sitemap index can be found here: https://panoee.com/sitemap_index.xml",-1),j={data(){let e=[{title:"Xóa",icon:"mdi-delete-outline",url:{path:"seo_indexing_delete",data:{}},component:m,post:!0,reload:!1}],t=[{title:"Delete",icon:"mdi-delete-outline",url:{path:"seo_indexing_delete",data:{all:!0},content:{title:"Delete",content:"Are you sure you want to delete all selected objects",confirm:"Delete"}},component:f,post:!0,reload:!1}];return{ModalDelete:h(m),ModalSelected:h(f),dialogSubmit:null,createUrl:null,tabAll:null,settingIndexing:null,settingFile:null,settingFilePreview:null,settingJson:null,initClass:!0,classAll:!0,classConfig:[],documentAll:!0,documentConfig:[],toast:p.useToast({position:"top-right",style:{zIndex:"200"}}),seoIndexingSelectAction:t,seoIndexingAction:e,seoIndexing:!1,seoIndexingListing:[],seoIndexingHeaders:[],seoIndexingFields:[],seoIndexingTotalItems:0,seoIndexingLimit:10,seoIndexingRouterList:{router:route("seo_indexing_listing")}}},mounted(){this.getSetting(),this.getListing()},watch:{classAll(e,t){if(e){for(var i=0;i<this.classConfig.length;i++)this.classConfig[i].check=!0;this.initClass=!1}else if(!this.initClass)for(i=0;i<this.classConfig.length;i++)this.classConfig[i].check=!1},classConfig:{deep:!0,handler(){this.classAll=this.classConfig.every((e=>e.check)),this.initClass=!0}},settingJson(e,t){e&&(this.settingFile="",this.settingFilePreview="")}},methods:{getSetting(){fetch(route("seo_indexing_setting"),{method:"GET"}).then((e=>e.json())).then((e=>{"json"==e.type&&(this.settingJson=e.data),"file"==e.type&&(this.settingFilePreview=e.data),this.classConfig=e.classes})).catch((e=>{}))},getListing(){this.seoIndexing||fetch(route("seo_indexing_listing"),{method:"POST"}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((e=>{this.$nextTick((()=>{this.seoIndexingFields=e.fields,this.seoIndexingHeaders=e.fields,this.seoIndexingListing=e.listData,this.seoIndexingLimit=e.limit,this.seoIndexingTotalItems=e.totalItems,this.seoIndexing=!0}))})).catch((e=>{console.error("Lỗi xảy ra khi gửi yêu cầu:",e)})).finally((()=>{}))},createClick(){this.dialogSubmit=!0},handleUpload(){this.$refs.jsonFile.$el.querySelector('input[type="file"]').click()},uploadFile(e){this.settingFile=e.target.files[0],this.settingFilePreview=this.settingFile.name,this.settingJson=""},createSubmit(){if(this.createUrl){const e=new FormData;e.append("url",this.createUrl),fetch(route("seo_indexing_create_submit"),{method:"POST",body:e}).then((e=>e.json())).then((e=>{e.success?this.message(e.message):this.message(e.message,"error")})).finally((()=>{this.dialogSubmit=!1,this.seoIndexing=!1,this.getListing()}))}},settingSubmit(){const e=new FormData;this.settingFile?e.append("file",this.settingFile):this.settingJson&&e.append("json",this.settingJson),e.append("classes",JSON.stringify(this.classConfig)),fetch(route("seo_indexing_setting"),{method:"POST",body:e}).then((e=>e.json())).then((e=>{e.success?this.message(e.message):this.message(e.message,"error")})).catch((e=>{}))},getClassConfig(e){let t=new FormData;if(e)for(var[i,l]of(t.append("update",e),Object.entries(this.classConfig)))l.check&&t.append("keys[]",l.key);fetch(route("seo_sitemap_config"),{method:"POST",body:t}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((t=>{this.classConfig=t.classConfig,this.documentConfig=t.documentConfig;for(var i=0;i<t.classConfig.length;i++)if(!t.classConfig[i].check){this.classAll=!1;break}e&&this.message("Update success!")})).catch((e=>{})).finally((()=>{}))},message(e,t="success"){e&&setTimeout((()=>{this.toast.open({message:e,type:t})}),1e3)},exportExcel(){let e=new FormData,t=[],i=[];if(t=this.seoIndexingListing,i=this.seoIndexingHeaders,t&&i){for(var[l,s]of Object.entries(t))e.append("data[]",JSON.stringify(s));e.append("fields",JSON.stringify(i)),fetch(route("vuetify_export_excel"),{method:"POST",body:e}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download="indexing.xlsx",i.click(),URL.revokeObjectURL(t)})).catch((e=>{})).finally((()=>{}))}}}},O=Object.assign(j,{layout:e},{__name:"Indexing",setup:e=>(e,h)=>{const m=t("v-tab"),f=t("v-tabs"),p=t("v-btn"),j=t("CustomField"),O=t("DataTableServer"),T=t("v-window-item"),$=t("Textarea"),P=t("v-file-input"),J=t("v-checkbox"),D=t("v-card-item"),R=t("v-card"),E=t("v-window"),W=t("v-toolbar-title"),q=t("v-toolbar"),H=t("Input"),N=t("v-card-text"),G=t("v-card-actions"),M=t("v-dialog");return i(),l(c,null,[s("div",x,[s("div",b,[s("h1",v,n(e.$t("SEO Tools")),1),a(f,{modelValue:e.tabAll,"onUpdate:modelValue":h[0]||(h[0]=t=>e.tabAll=t),class:"mainTabPanel"},{default:o((()=>[a(m,{value:"indexingRequest"},{default:o((()=>[s("span",_,n(e.$t("Indexing Request")),1)])),_:1}),a(m,{value:"apiSetting"},{default:o((()=>[s("span",y,n(e.$t("API Setting")),1)])),_:1}),a(m,{value:"indexStatus"},{default:o((()=>[s("span",I,n(e.$t("Index Status")),1)])),_:1})])),_:1},8,["modelValue"])]),s("div",S,[s("div",C,[a(E,{modelValue:e.tabAll,"onUpdate:modelValue":h[8]||(h[8]=t=>e.tabAll=t)},{default:o((()=>[a(T,{key:"indexingRequest",value:"indexingRequest"},{default:o((()=>[e.seoIndexing?(i(),l("div",k,[s("div",w,[a(p,{"prepend-icon":"mdi-plus",onClick:h[1]||(h[1]=t=>e.createClick())},{default:o((()=>[d(n(e.$t("Create Submit")),1)])),_:1}),a(j,{headers:e.seoIndexingHeaders,list:e.seoIndexingFields,"onUpdate:headers":h[2]||(h[2]=t=>e.seoIndexingHeaders=t)},null,8,["headers","list"]),a(p,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:h[3]||(h[3]=t=>e.exportExcel())},{default:o((()=>[d(n(e.$t("Export")),1)])),_:1})]),s("div",F,[a(O,{listing:e.seoIndexingListing,router:e.seoIndexingRouterList,"total-items":e.seoIndexingTotalItems,headers:e.seoIndexingHeaders,limit:e.seoIndexingLimit,fetchData:!0,multipleSelecte:!0,"onUpdate:data":h[4]||(h[4]=t=>e.seoIndexingListing=t),action:e.seoIndexingAction,selectedAction:e.seoIndexingSelectAction},null,8,["listing","router","total-items","headers","limit","action","selectedAction"])])])):r("",!0)])),_:1}),a(T,{key:"apiSetting",value:"apiSetting"},{default:o((()=>[a(R,{class:"mx-auto"},{default:o((()=>[a(D,null,{default:o((()=>[s("h3",null,n(e.$t("General")),1),s("h4",null,n(e.$t("Setting")),1),a($,{modelValue:e.settingJson,"onUpdate:modelValue":h[5]||(h[5]=t=>e.settingJson=t)},null,8,["modelValue"]),s("h4",null,n(e.$t("Or upload JSON file")),1),a(p,{variant:"text","prepend-icon":"mdi-upload",onClick:e.handleUpload},{default:o((()=>[d(n(e.$t("Upload file")),1)])),_:1},8,["onClick"]),a(P,{class:"d-none",ref:"jsonFile",onChange:e.uploadFile,accept:".json"},null,8,["onChange"]),e.settingFilePreview?(i(),l("a",A,n(e.settingFilePreview),1)):r("",!0),U,a(J,{modelValue:e.classAll,"onUpdate:modelValue":h[6]||(h[6]=t=>e.classAll=t),label:"All"},null,8,["modelValue"]),(i(!0),l(c,null,u(e.classConfig,((e,t)=>(i(),g(J,{label:e.name,modelValue:e.check,"onUpdate:modelValue":t=>e.check=t},null,8,["label","modelValue","onUpdate:modelValue"])))),256)),L,a(p,{"prepend-icon":"mdi-setting",onClick:h[7]||(h[7]=t=>e.settingSubmit())},{default:o((()=>[d(n(e.$t("Save changes")),1)])),_:1})])),_:1})])),_:1})])),_:1}),a(T,{key:"indexStatus",value:"indexStatus"},{default:o((()=>[a(R,{class:"mx-auto"},{default:o((()=>[a(D,null,{default:o((()=>[s("h3",null,n(e.$t("General")),1),V])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])])]),e.dialogSubmit?(i(),g(M,{key:0,modelValue:e.dialogSubmit,"onUpdate:modelValue":h[12]||(h[12]=t=>e.dialogSubmit=t),width:"600"},{default:o((()=>[a(R,null,{default:o((()=>[a(q,{density:"compact"},{default:o((()=>[a(W,{text:"Create Submit",class:""})])),_:1}),a(N,null,{default:o((()=>[a(H,{label:"url",modelValue:e.createUrl,"onUpdate:modelValue":h[9]||(h[9]=t=>e.createUrl=t)},null,8,["modelValue"])])),_:1}),a(G,{class:"justify-end"},{default:o((()=>[a(p,{variant:"text",onClick:h[10]||(h[10]=t=>e.dialogSubmit=!e.dialogSubmit)},{default:o((()=>[d(n(e.$t("Close")),1)])),_:1}),a(p,{variant:"elevated",onClick:h[11]||(h[11]=t=>e.createSubmit())},{default:o((()=>[d(n(e.$t("Add")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):r("",!0)],64)}});export{O as default};
