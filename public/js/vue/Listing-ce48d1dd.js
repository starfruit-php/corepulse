import e from"./Layout-b42d48af.js";import{d as t,c as i,M as o,e as l}from"./app-4cb9c936.js";import{am as s,o as a,c as r,a as c,k as n,q as p,M as d,N as m,m as u}from"./@vue-9ee83fb6.js";import"./@vueuse-3c3b27e0.js";import"./unidecode-5a54da0f.js";import"./@ckeditor-fa9b3055.js";import"./vue-abe8eda6.js";import"./vue-draggable-next-3bc70602.js";import"./ckeditor5-custom-build-7f9f8982.js";import"./vue-toast-notification-f2a3de7a.js";import"./vue3-treeview-e35ab4eb.js";import"./vue-filepond-82332930.js";import"./filepond-136e7cc4.js";import"./filepond-plugin-image-preview-4f29f0b3.js";import"./filepond-plugin-file-validate-type-324437b8.js";import"./mapbox-gl-38e32bee.js";/* empty css             */import"./vuetify-193e6d04.js";import"./@inertiajs-d76518b1.js";import"./axios-3d65c6bd.js";import"./deepmerge-3a6ffb65.js";import"./side-channel-e57be611.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./call-bind-36d0f176.js";import"./set-function-length-801a4962.js";import"./define-data-property-daf1763a.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-61b1e1fb.js";import"./object-inspect-0fa0b9de.js";import"./nprogress-9c4c7d08.js";import"./lodash.clonedeep-c1370659.js";import"./lodash.isequal-feeae999.js";import"./@vuepic-f846cd73.js";import"./date-fns-421fcf3e.js";import"./@babel-0d6f2215.js";import"./element-plus-e3c76eb0.js";import"./lodash-es-fb3d0246.js";import"./@element-plus-283d896c.js";import"./@popperjs-2d1e819d.js";import"./@ctrl-91de2ec7.js";import"./dayjs-7398d4dd.js";import"./async-validator-8d480e59.js";import"./memoize-one-63ab667a.js";import"./escape-html-5c28ffbb.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-24fcdcc4.js";import"./vue3-apexcharts-663397fa.js";import"./apexcharts-4d1d416c.js";import"./vue-i18n-d397f996.js";import"./@intlify-90b40ed7.js";const j={class:"mainAppWrapper d-flex flex-column"},h={class:"mainBarWrapper px-5 py-3 d-flex justify-space-between align-center flex-grow-0 flex-shrink-0"},b={class:"--left d-flex align-center"},f={class:"d-flex flex-column me-4"},y={class:"--objectTitle"},v={class:"--right"},g=c("div",{class:"utilityBarWrapper flex-grow-0 flex-shrink-0"},null,-1),O={class:"mainContentWrapper px-5 py-4 d-flex flex-column flex-grow-1 flex-shrink-1 overflow-hidden"},x={class:"tableListingWrapper d-flex flex-column"},k={name:"Object",data(){var e,s=window.location.href;let a=window.localStorage.getItem(s),r=[{title:"Title",key:"key",sortable:!1,removable:!0,handleEdit:!0,handleClick:!0,clickUrl:"vuetify_object_detail",url:{path:"object_listing_edit"},searchType:"Input",component:"ModalEdit",type:"key"},{title:"Status",key:"published",removable:!0,searchType:"Select",handleEdit:!0,url:{path:"object_listing_edit"},component:"ModalEdit",type:"published",options:[{value:"Published",key:"Published"},{value:"Unpublished",key:"Unpublished"}]},{title:"Last Update",key:"modificationDate",removable:!0,searchType:"nosearch"}];this.fields.map((e=>{r.push({title:""!=e.title?e.title:e.key,type:e.type,key:e.key,removable:!1,searchType:e.searchType,options:e.options,url:e.url,component:e.component,handleEdit:e.handleEdit})})),a?(a=JSON.parse(a),a.length!=r.length&&(a=r,window.localStorage.setItem(s,JSON.stringify(a)))):(a=r,window.localStorage.setItem(s,JSON.stringify(a)));var c=[];a.map((e=>{e.removable&&c.push(e)}));var n=[{title:"Sửa",icon:"mdi-pencil-outline",url:"vuetify_object_detail",post:!1,reload:!1},{title:"Xóa",icon:"mdi-delete-outline",url:{path:"object_delete",data:{object:this.classObject.name}},component:i,post:!0,reload:!1}],p=[{title:"Published",icon:"mdi-tray-arrow-up",url:{path:"object_selected_edit",data:{published:"Published"},content:{title:"Published",content:"Are you sure you want to publish all selected objects",confirm:"Published"}},component:o,post:!0,reload:!1},{title:"Unpublished",icon:"mdi-tray-arrow-down",url:{path:"object_selected_edit",data:{published:"Unpublished"},content:{title:"Unpublished",content:"Are you sure you want to unpublish all selected objects",confirm:"UnPublished"}},component:o,post:!0,reload:!1},{title:"Delete",icon:"mdi-delete-outline",url:{path:"object_delete",data:{object:this.classObject.name},content:{title:"Delete",content:"Are you sure you want to delete all selected objects",confirm:"Delete"}},component:o,post:!0,reload:!1}],d=null;return this.classObject&&(d={object:this.classObject.id}),{ModalDelete:u(i),ModalEdit:u(l),ModalSelected:u(o),ModalCreate:u(t),createObject:!1,fav:!0,menu:!1,message:!1,hints:!0,enabled:!0,headers:c,list:a,routerList:{router:route("vuetify_object",d)},action:n,selectedAction:p,title:null==(e=this.classObject)?void 0:e.title}},mounted(){this.checkTitle()},methods:{checkTitle(){if(this.objectSetting){const e=this.objectSetting.find((e=>e.id===this.classObject.id));e&&(this.title=e.title)}},createAction:(e,t,i,o=!1,l=!0,s=!0,a=!0)=>({title:e,icon:t,url:i,component:o,multiple:l,post:s,reload:a}),exportExcel(){let e=new FormData;if(this.listing){for(var[t,i]of Object.entries(this.listing))e.append("data[]",JSON.stringify(i));var o=this.headers;e.append("fields",JSON.stringify(o)),this.loading=!0,fetch(route("vuetify_export_excel"),{method:"POST",body:e}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e);console.log(t);const i=document.createElement("a");i.href=t,i.download="object-listing.xlsx",i.click(),URL.revokeObjectURL(t)})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))}}}},w=Object.assign(k,{layout:e},{props:{listing:Object,fields:{type:Object,default:[]},search:{type:Object,default:{}},classObject:Object,totalItems:Number,chips:[Object,Array],chipsColor:[Object,Array],warning:[Object,Array,String],noOrder:[Object,Array],multiSelect:[Object,Array],objectSetting:[Object,Array]},setup:e=>(i,o)=>{const l=s("v-icon"),u=s("v-breadcrumbs-item"),k=s("v-breadcrumbs"),w=s("v-btn"),_=s("v-menu"),S=s("v-dialog"),A=s("CustomField"),U=s("DataTableServer");return a(),r("div",j,[c("div",h,[c("div",b,[n(l,{icon:"mdi-cube-outline",class:"--objectIcon me-3"}),c("div",f,[n(k,{class:"breadcrumbWrapper pa-0"},{default:p((()=>[n(u,{class:"--itemBreadcrumb"},{default:p((()=>[c("small",null,d(i.$t("Object")),1)])),_:1})])),_:1}),c("h3",y,d(i.title),1)])]),c("div",v,[n(_,{modelValue:i.menu,"onUpdate:modelValue":o[1]||(o[1]=e=>i.menu=e),"close-on-content-click":!1},{activator:p((({props:e})=>[n(w,{onClick:o[0]||(o[0]=e=>i.createObject=!0),class:"btn-primary me-2",variant:"elevated"},{default:p((()=>[n(l,{left:"",class:"me-2"},{default:p((()=>[m("mdi-plus")])),_:1}),m(" "+d(i.$t("Create")),1)])),_:1})])),_:1},8,["modelValue"]),n(S,{modelValue:i.createObject,"onUpdate:modelValue":o[2]||(o[2]=e=>i.createObject=e),width:"420"},{default:p((()=>[n(t,{object:i.title,url:{path:"object_check_key"},urlReturn:{path:"vuetify_object_detail"}},null,8,["object"])])),_:1},8,["modelValue"]),n(w,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:i.exportExcel},{default:p((()=>[m(d(i.$t("Export")),1)])),_:1},8,["onClick"]),n(A,{headers:i.headers,list:i.list,"onUpdate:headers":o[3]||(o[3]=e=>i.headers=e)},null,8,["headers","list"])])]),g,c("div",O,[c("div",x,[n(U,{listing:e.listing,router:i.routerList,totalItems:e.totalItems,headers:i.headers,action:i.action,chips:e.chips,chipsColor:e.chipsColor,selectedAction:i.selectedAction,noOrder:e.noOrder,multiSelect:e.multiSelect},null,8,["listing","router","totalItems","headers","action","chips","chipsColor","selectedAction","noOrder","multiSelect"])])])])}});export{w as default};
