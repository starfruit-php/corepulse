import e from"./Layout-7b37c0dd.js";import{r as t,o as l,h as s,f as a,t as i,a as o,w as n,d as c,F as r,l as d,k as u}from"./app-2b531625.js";const f={class:"mainAppWrapper d-flex flex-column"},h={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},m={class:"--text"},p={class:"mainContentWrapper detailContentWrapperflex-grow-1 flex-shrink-1 overflow-auto"},g={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},C=["href"],v={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},x=a("h3",null,"Select Data",-1),k=a("h4",null,"Object",-1),b={class:"flex-container"},A={class:"flex-item"},w={class:"flex-item"},y=a("h4",null,"Document",-1),V={class:"flex-container"},S={class:"flex-item"},D={class:"flex-item"},_={data:()=>({classConfig:[],classAll:!0,initClass:!1,documentAll:!0,documentConfig:[],initDocument:!1,sortByOption:[{title:"Published Data",value:"Published Data",key:"Published Data"}],sortBy:null,toast:u.useToast({position:"top-right",style:{zIndex:"200"}}),url:window.location.protocol+"//"+window.location.hostname+"/sitemap.xml"}),mounted(){this.getClassConfig()},watch:{classAll(e,t){this.$nextTick((()=>{if(e)for(var t=0;t<this.classConfig.length;t++)this.classConfig[t].check=!0;if(!e&&!this.initClass)for(t=0;t<this.classConfig.length;t++)this.classConfig[t].check=!1;this.initClass=!1}))},classConfig:{deep:!0,handler(){const e=this.classConfig.every((e=>e.check));this.classConfig.forEach((e=>{e.check||(this.classAll=!1,this.initClass=!0)})),e!=this.classAll&&(this.classAll=e)}},documentAll(e,t){this.$nextTick((()=>{if(e)for(var t=0;t<this.documentConfig.length;t++)this.documentConfig[t].generateSitemap=!0;if(!e&&!this.initDocument)for(t=0;t<this.documentConfig.length;t++)this.documentConfig[t].generateSitemap=!1;this.initDocument=!1}))},documentConfig:{deep:!0,handler(){const e=this.documentConfig.every((e=>e.generateSitemap));this.documentConfig.forEach((e=>{e.generateSitemap||(this.documentAll=!1,this.initDocument=!0)})),e!=this.documentAll&&(this.documentAll=e)}}},methods:{getClassConfig(e){let t=new FormData;if(e){for(var[l,s]of(t.append("update",e),Object.entries(this.classConfig)))s.check&&t.append("keys[]",s.key);for(var[l,s]of Object.entries(this.documentConfig))s.generateSitemap&&t.append("pages[]",s.id)}fetch(route("seo_sitemap_config"),{method:"POST",body:t}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((t=>{this.classConfig=t.classConfig;for(var l=0;l<t.classConfig.length;l++)if(!t.classConfig[l].check){this.initClass=!0,this.classAll=!1;break}this.documentConfig=t.documentConfig;for(l=0;l<t.documentConfig.length;l++)if(!t.documentConfig[l].generateSitemap){this.initDocument=!0,this.documentAll=!1;break}e&&this.successMess("Update success!")})).catch((e=>{})).finally((()=>{}))},successMess(e){e&&setTimeout((()=>{this.toast.open({message:e,type:"success"})}),1e3)}}},j=Object.assign(_,{layout:e},{__name:"Sitemap",setup:e=>(e,u)=>{const _=t("v-card-item"),j=t("v-card"),U=t("v-checkbox"),O=t("v-btn");return l(),s("div",f,[a("div",h,[a("h1",m,i(e.$t("Sitemap")),1)]),a("div",p,[a("div",g,[o(j,{class:"mx-auto"},{default:n((()=>[o(_,null,{default:n((()=>[a("h3",null,i(e.$t("General")),1),a("p",null,[c("Your sitemap index can be found here: "),a("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},i(e.url),9,C)])])),_:1})])),_:1})]),a("div",v,[x,k,a("div",b,[a("div",A,[o(U,{modelValue:e.classAll,"onUpdate:modelValue":u[0]||(u[0]=t=>e.classAll=t),label:"All"},null,8,["modelValue"])]),(l(!0),s(r,null,d(e.classConfig,((e,t)=>(l(),s("div",w,[o(U,{label:e.name,modelValue:e.check,"onUpdate:modelValue":t=>e.check=t},null,8,["label","modelValue","onUpdate:modelValue"])])))),256))]),y,a("div",V,[a("div",S,[o(U,{modelValue:e.documentAll,"onUpdate:modelValue":u[1]||(u[1]=t=>e.documentAll=t),label:"All"},null,8,["modelValue"])]),(l(!0),s(r,null,d(e.documentConfig,((e,t)=>(l(),s("div",D,[o(U,{label:e.key,modelValue:e.generateSitemap,"onUpdate:modelValue":t=>e.generateSitemap=t},null,8,["label","modelValue","onUpdate:modelValue"])])))),256))]),o(O,{"prepend-icon":"mdi-edit",onClick:u[2]||(u[2]=t=>e.getClassConfig(!0))},{default:n((()=>[c(i(e.$t("Save changes")),1)])),_:1})])])])}});export{j as default};
