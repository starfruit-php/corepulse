import e from"./Layout-6c4b8f5b.js";import{r as t,o as i,h as s,f as n,t as l,a,w as o,d,i as r,c,F as u,y as g,x as h,M as f,k as m}from"./app-667dfa05.js";const p={class:"mainAppWrapper d-flex flex-column"},x={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},b={class:"--text"},v={class:"--text"},I={class:"--text"},_={class:"--text"},y={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-auto"},S={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},C={key:0,class:"reportTableWrapper py-4 d-flex flex-column overflow-visible"},k={class:"--filterBar d-flex align-center justify-end mb-2"},w={class:"tableListingWrapper d-flex flex-column"},L={key:0,target:"_blank"},A=n("br",null,null,-1),F=n("p",null,"Your sitemap index can be found here: https://panoee.com/sitemap_index.xml",-1),j={data(){let e="",t="";"json"==this.settingIndexing.type&&(e=this.settingIndexing.data),"file"==this.settingIndexing.type&&(t=this.settingIndexing.data);let i=[{title:"Xóa",icon:"mdi-delete-outline",url:{path:"seo_indexing_delete",data:{}},component:h,post:!0,reload:!1}],s=[{title:"Delete",icon:"mdi-delete-outline",url:{path:"seo_indexing_delete",data:{all:!0},content:{title:"Delete",content:"Are you sure you want to delete all selected objects",confirm:"Delete"}},component:f,post:!0,reload:!1}];return{ModalDelete:g(h),ModalSelected:g(f),dialogSubmit:null,createUrl:null,tabAll:null,settingFile:null,settingFilePreview:t,settingJson:e,initClass:!0,classAll:!0,classConfig:[],documentAll:!0,documentConfig:[],toast:m.useToast({position:"top-right",style:{zIndex:"200"}}),seoIndexingSelectAction:s,seoIndexingAction:i,seoIndexing:!1,seoIndexingListing:[],seoIndexingHeaders:[],seoIndexingFields:[],seoIndexingTotalItems:0,seoIndexingLimit:10,seoIndexingRouterList:{router:route("seo_indexing_listing")}}},mounted(){this.getListing()},watch:{classAll(e,t){if(e){for(var i=0;i<this.classConfig.length;i++)this.classConfig[i].check=!0;this.initClass=!1}else if(!this.initClass)for(i=0;i<this.classConfig.length;i++)this.classConfig[i].check=!1},classConfig:{deep:!0,handler(){this.classAll=this.classConfig.every((e=>e.check)),this.initClass=!0}}},methods:{getListing(){this.seoIndexing||fetch(route("seo_indexing_listing"),{method:"POST"}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((e=>{this.$nextTick((()=>{this.seoIndexingFields=e.fields,this.seoIndexingHeaders=e.fields,this.seoIndexingListing=e.listData,this.seoIndexingLimit=e.limit,this.seoIndexingTotalItems=e.totalItems,this.seoIndexing=!0}))})).catch((e=>{console.error("Lỗi xảy ra khi gửi yêu cầu:",e)})).finally((()=>{}))},createClick(){this.dialogSubmit=!0},handleUpload(){this.$refs.jsonFile.$el.querySelector('input[type="file"]').click()},uploadFile(e){this.settingFile=e.target.files[0]},createSubmit(){if(this.createUrl){const e=new FormData;e.append("url",this.createUrl),fetch(route("seo_indexing_create_submit"),{method:"POST",body:e}).then((e=>e.json())).then((e=>{e.success?this.message(e.message):this.message(e.message,"error")})).finally((()=>{this.dialogSubmit=!1,this.seoIndexing=!1,this.getListing()}))}},settingSubmit(){const e=new FormData;this.settingFile?e.append("file",this.settingFile):e.append("json",this.settingJson),fetch(route("seo_indexing_setting"),{method:"POST",body:e}).then((e=>e.json())).then((e=>{e.success?this.message(e.message):this.message(e.message,"error")})).catch((e=>{}))},getClassConfig(e){let t=new FormData;if(e)for(var[i,s]of(t.append("update",e),Object.entries(this.classConfig)))s.check&&t.append("keys[]",s.key);fetch(route("seo_sitemap_config"),{method:"POST",body:t}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((t=>{this.classConfig=t.classConfig,this.documentConfig=t.documentConfig;for(var i=0;i<t.classConfig.length;i++)if(!t.classConfig[i].check){this.classAll=!1;break}e&&this.message("Update success!")})).catch((e=>{})).finally((()=>{}))},message(e,t="success"){e&&setTimeout((()=>{this.toast.open({message:e,type:t})}),1e3)},exportExcel(){let e=new FormData,t=[],i=[];if(t=this.seoIndexingListing,i=this.seoIndexingHeaders,t&&i){for(var[s,n]of Object.entries(t))e.append("data[]",JSON.stringify(n));e.append("fields",JSON.stringify(i)),fetch(route("vuetify_export_excel"),{method:"POST",body:e}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download="indexing.xlsx",i.click(),URL.revokeObjectURL(t)})).catch((e=>{})).finally((()=>{}))}}}},U=Object.assign(j,{layout:e},{__name:"Indexing",props:{settingIndexing:[Object,Array]},setup:e=>(e,g)=>{const h=t("v-tab"),f=t("v-tabs"),m=t("v-btn"),j=t("CustomField"),U=t("DataTableServer"),$=t("v-window-item"),O=t("Textarea"),T=t("v-file-input"),V=t("v-card-item"),D=t("v-card"),P=t("v-window"),R=t("v-toolbar-title"),E=t("v-toolbar"),J=t("Input"),W=t("v-card-text"),q=t("v-card-actions"),H=t("v-dialog");return i(),s(u,null,[n("div",p,[n("div",x,[n("h1",b,l(e.$t("SEO Tools")),1),a(f,{modelValue:e.tabAll,"onUpdate:modelValue":g[0]||(g[0]=t=>e.tabAll=t),class:"mainTabPanel"},{default:o((()=>[a(h,{value:"indexingRequest"},{default:o((()=>[n("span",v,l(e.$t("Indexing Request")),1)])),_:1}),a(h,{value:"apiSetting"},{default:o((()=>[n("span",I,l(e.$t("API Setting")),1)])),_:1}),a(h,{value:"indexStatus"},{default:o((()=>[n("span",_,l(e.$t("Index Status")),1)])),_:1})])),_:1},8,["modelValue"])]),n("div",y,[n("div",S,[a(P,{modelValue:e.tabAll,"onUpdate:modelValue":g[7]||(g[7]=t=>e.tabAll=t)},{default:o((()=>[a($,{key:"indexingRequest",value:"indexingRequest"},{default:o((()=>[e.seoIndexing?(i(),s("div",C,[n("div",k,[a(m,{"prepend-icon":"mdi-plus",onClick:g[1]||(g[1]=t=>e.createClick())},{default:o((()=>[d(l(e.$t("Create Submit")),1)])),_:1}),a(j,{headers:e.seoIndexingHeaders,list:e.seoIndexingFields,"onUpdate:headers":g[2]||(g[2]=t=>e.seoIndexingHeaders=t)},null,8,["headers","list"]),a(m,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:g[3]||(g[3]=t=>e.exportExcel())},{default:o((()=>[d(l(e.$t("Export")),1)])),_:1})]),n("div",w,[a(U,{listing:e.seoIndexingListing,router:e.seoIndexingRouterList,"total-items":e.seoIndexingTotalItems,headers:e.seoIndexingHeaders,limit:e.seoIndexingLimit,fetchData:!0,multipleSelecte:!0,"onUpdate:data":g[4]||(g[4]=t=>e.seoIndexingListing=t),action:e.seoIndexingAction,selectedAction:e.seoIndexingSelectAction},null,8,["listing","router","total-items","headers","limit","action","selectedAction"])])])):r("",!0)])),_:1}),a($,{key:"apiSetting",value:"apiSetting"},{default:o((()=>[a(D,{class:"mx-auto"},{default:o((()=>[a(V,null,{default:o((()=>[n("h3",null,l(e.$t("General")),1),n("h4",null,l(e.$t("Setting")),1),a(O,{modelValue:e.settingJson,"onUpdate:modelValue":g[5]||(g[5]=t=>e.settingJson=t)},null,8,["modelValue"]),n("h4",null,l(e.$t("Or upload JSON file")),1),a(m,{variant:"text","prepend-icon":"mdi-upload",onClick:e.handleUpload},{default:o((()=>[d(l(e.$t("Upload file")),1)])),_:1},8,["onClick"]),a(T,{class:"d-none",ref:"jsonFile",onChange:e.uploadFile,accept:".json"},null,8,["onChange"]),e.settingFilePreview?(i(),s("a",L,l(e.settingFilePreview),1)):r("",!0),A,a(m,{"prepend-icon":"mdi-setting",onClick:g[6]||(g[6]=t=>e.settingSubmit())},{default:o((()=>[d(l(e.$t("Save changes")),1)])),_:1})])),_:1})])),_:1})])),_:1}),a($,{key:"indexStatus",value:"indexStatus"},{default:o((()=>[a(D,{class:"mx-auto"},{default:o((()=>[a(V,null,{default:o((()=>[n("h3",null,l(e.$t("General")),1),F])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])])]),e.dialogSubmit?(i(),c(H,{key:0,modelValue:e.dialogSubmit,"onUpdate:modelValue":g[11]||(g[11]=t=>e.dialogSubmit=t),width:"600"},{default:o((()=>[a(D,null,{default:o((()=>[a(E,{density:"compact"},{default:o((()=>[a(R,{text:"Create Submit",class:""})])),_:1}),a(W,null,{default:o((()=>[a(J,{label:"url",modelValue:e.createUrl,"onUpdate:modelValue":g[8]||(g[8]=t=>e.createUrl=t)},null,8,["modelValue"])])),_:1}),a(q,{class:"justify-end"},{default:o((()=>[a(m,{variant:"text",onClick:g[9]||(g[9]=t=>e.dialogSubmit=!e.dialogSubmit)},{default:o((()=>[d(l(e.$t("Close")),1)])),_:1}),a(m,{variant:"elevated",onClick:g[10]||(g[10]=t=>e.createSubmit())},{default:o((()=>[d(l(e.$t("Add")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):r("",!0)],64)}});export{U as default};
