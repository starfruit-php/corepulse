import e from"./Layout-35d4a5a5.js";import{r as t,o,h as i,f as l,t as s,a,w as r,d as n,i as d,c,F as u,y as m,x as p,M as h,k as f}from"./app-92a05057.js";import g from"./ModalView-c4c6be02.js";import x from"./ModalRedirectEdit-10eaa13a.js";const R={class:"mainAppWrapper d-flex flex-column"},v={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},y={class:"--text"},S={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-auto"},_={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},M={class:"--text"},k={class:"--text"},b={class:"--text"},L={key:0,class:"reportTableWrapper py-4 d-flex flex-column overflow-visible"},w={class:"--filterBar d-flex align-center justify-end mb-2"},D={class:"tableListingWrapper d-flex flex-column"},V={key:0,class:"reportTableWrapper py-4 d-flex flex-column overflow-visible"},C={class:"--filterBar d-flex align-center justify-end mb-2"},T={class:"tableListingWrapper d-flex flex-column"},U=l("h4",null,"General",-1),j={data(){let e=[{title:"Xem",icon:"mdi-eye-outline",url:"seo_monitor_detail",component:g,post:!1,reload:!1},{title:"Xóa",icon:"mdi-delete-outline",url:{path:"seo_monitor_delete",data:{}},component:p,post:!0,reload:!1}],t=[{title:"Delete",icon:"mdi-delete-outline",url:{path:"seo_monitor_delete",data:{all:!0},content:{title:"Delete",content:"Are you sure you want to delete all selected objects",confirm:"Delete"}},component:h,post:!0,reload:!1}],o=[{title:"Sửa",icon:"mdi-pencil-outline",url:"seo_monitor_edit",component:x,post:!1,reload:!1},{title:"Xóa",icon:"mdi-delete-outline",url:{path:"seo_redirect_delete",data:{}},component:p,post:!0,reload:!1}],i=[{title:"Delete",icon:"mdi-delete-outline",url:{path:"seo_redirect_delete",data:{all:!0},content:{title:"Delete",content:"Are you sure you want to delete all selected objects",confirm:"Delete"}},component:h,post:!0,reload:!1}];return{dialog:!1,ModalView:m(g),ModalDelete:m(p),ModalSelected:m(h),ModalRedirectEdit:m(x),tabAll:null,tabSeoRedirect:null,seoMonitor:!1,seoMonitorListing:[],seoMonitorHeaders:[],seoMonitorFields:[],seoMonitorTotalItems:0,seoMonitorLimit:10,seoMonitorRouterList:{router:route("seo_monitor")},seoMonitorAction:e,seoMonitorSelectAction:t,seoRedirect:!1,seoRedirectListing:[],seoRedirectHeaders:[],seoRedirectFields:[],seoRedirectTotalItems:0,seoRedirectLimit:10,seoRedirectRouterList:{router:route("seo_redirect")},seoRedirectAction:o,seoRedirectSelectAction:i,seoSetting:"",seoSettingDefault:"",seoSettingCustom:"",editDialog:!1,editComponent:"ModalRedirectEdit",editItem:{},toast:f.useToast({position:"top-right",style:{zIndex:"200"}})}},mounted(){this.getMonitor(),this.getRedirect(),this.getSetting()},watch:{seoRedirect(e){this.getRedirect()}},methods:{getSetting(e=null){let t=null,o="GET";e&&(o="POST",t=new FormData,t.append("type",this.seoSetting),"default"==this.seoSetting?t.append("defaultValue",this.seoSettingDefault):"custom"==this.seoSetting&&t.append("customValue",this.seoSettingCustom)),fetch(route("seo_setting"),{method:o,body:t}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((t=>{e?this.successMess("Update success!"):(this.seoSetting=t.type,this.seoSettingDefault=parseInt(t.defaultValue),this.seoSettingCustom=t.customValue)})).finally((()=>{}))},clearSeoMonitor(){fetch(route("seo_monitor_truncate"),{method:"POST"}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((e=>{})).catch((e=>{console.error("Lỗi xảy ra khi gửi yêu cầu:",e)})).finally((()=>{this.dialog=!this.dialog}))},getMonitor(){this.seoMonitor||fetch(route("seo_monitor"),{method:"POST"}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((e=>{this.$nextTick((()=>{this.seoMonitorFields=e.fields,this.seoMonitorHeaders=e.fields,this.seoMonitorListing=e.listData,this.seoMonitorLimit=e.limit,this.seoMonitorTotalItems=e.totalItems,this.seoMonitor=!0}))})).catch((e=>{console.error("Lỗi xảy ra khi gửi yêu cầu:",e)})).finally((()=>{}))},getRedirect(){this.seoRedirect||fetch(route("seo_redirect"),{method:"POST"}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((e=>{this.$nextTick((()=>{this.seoRedirectFields=e.fields,this.seoRedirectHeaders=e.headers,this.seoRedirectListing=e.listData,this.seoRedirectLimit=e.limit,this.seoRedirectTotalItems=e.totalItems,this.seoRedirect=!0}))})).catch((e=>{console.error("Lỗi xảy ra khi gửi yêu cầu:",e)})).finally((()=>{}))},exportExcel(e=""){let t=new FormData,o=[],i=[],l="export.xlsx";if("monitor"==e?(o=this.seoMonitorListing,i=this.seoMonitorHeaders,l="monitor.xlsx"):"redirect"==e&&(o=this.seoRedirectListing,i=this.seoRedirectHeaders,l="redirect.xlsx"),o&&i){for(var[s,a]of Object.entries(o))t.append("data[]",JSON.stringify(a));t.append("fields",JSON.stringify(i)),fetch(route("vuetify_export_excel"),{method:"POST",body:t}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download=l,o.click(),URL.revokeObjectURL(t)})).catch((e=>{})).finally((()=>{}))}},successMess(e){e&&setTimeout((()=>{this.toast.open({message:e,type:"success"})}),1e3)}}},A=Object.assign(j,{layout:e},{__name:"HttpError",setup:e=>(e,m)=>{const p=t("v-tab"),h=t("v-tabs"),f=t("CustomField"),g=t("v-btn"),j=t("DataTableServer"),A=t("v-window-item"),I=t("v-radio"),E=t("v-radio-group"),H=t("Select"),$=t("Input"),F=t("v-window"),O=t("v-card-item"),W=t("v-card"),P=t("v-toolbar-title"),B=t("v-toolbar"),X=t("v-card-text"),G=t("v-card-actions"),J=t("v-dialog");return o(),i(u,null,[l("div",R,[l("div",v,[l("h1",{value:"seoRedirect",onClick:m[0]||(m[0]=t=>e.getMonitor())},[l("span",y,s(e.$t("404 & 301 Redirection")),1)])]),l("div",S,[l("div",_,[a(W,{class:"mx-auto"},{default:r((()=>[a(O,null,{default:r((()=>[a(h,{modelValue:e.tabSeoRedirect,"onUpdate:modelValue":m[2]||(m[2]=t=>e.tabSeoRedirect=t),class:"mainTabPanel"},{default:r((()=>[a(p,{value:"seoMonitors"},{default:r((()=>[l("span",M,s(e.$t("404 Monitors")),1)])),_:1}),a(p,{value:"seoRedirections",onClick:m[1]||(m[1]=t=>e.getRedirect())},{default:r((()=>[l("span",k,s(e.$t("301 Redirections")),1)])),_:1}),a(p,{value:"seoSetting"},{default:r((()=>[l("span",b,s(e.$t("Setting")),1)])),_:1})])),_:1},8,["modelValue"]),a(F,{modelValue:e.tabSeoRedirect,"onUpdate:modelValue":m[15]||(m[15]=t=>e.tabSeoRedirect=t)},{default:r((()=>[a(A,{key:"seoMonitorsItem",value:"seoMonitors"},{default:r((()=>[e.seoMonitor?(o(),i("div",L,[l("div",w,[a(f,{headers:e.seoMonitorHeaders,list:e.seoMonitorFields,"onUpdate:headers":m[3]||(m[3]=t=>e.seoMonitorHeaders=t)},null,8,["headers","list"]),a(g,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:m[4]||(m[4]=t=>e.exportExcel("monitor"))},{default:r((()=>[n(s(e.$t("Export")),1)])),_:1}),a(g,{variant:"text",class:"","prepend-icon":"mdi-close",onClick:m[5]||(m[5]=t=>e.dialog=!0)},{default:r((()=>[n(s(e.$t("Clear log")),1)])),_:1})]),l("div",D,[a(j,{listing:e.seoMonitorListing,router:e.seoMonitorRouterList,"total-items":e.seoMonitorTotalItems,headers:e.seoMonitorHeaders,limit:e.seoMonitorLimit,fetchData:!0,multipleSelecte:!0,"onUpdate:data":m[6]||(m[6]=t=>e.seoMonitorListing=t),action:e.seoMonitorAction,selectedAction:e.seoMonitorSelectAction},null,8,["listing","router","total-items","headers","limit","action","selectedAction"])])])):d("",!0)])),_:1}),a(A,{key:"seoRedirectionsItem",value:"seoRedirections"},{default:r((()=>[e.seoRedirect?(o(),i("div",V,[l("div",C,[a(g,{variant:"text",class:"","prepend-icon":"mdi-plus",onClick:m[7]||(m[7]=t=>e.editDialog=!0)},{default:r((()=>[n(s(e.$t("Create")),1)])),_:1}),a(f,{headers:e.seoRedirectHeaders,list:e.seoRedirectFields,"onUpdate:headers":m[8]||(m[8]=t=>e.seoRedirectHeaders=t)},null,8,["headers","list"]),a(g,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:m[9]||(m[9]=t=>e.exportExcel("redirect"))},{default:r((()=>[n(s(e.$t("Export")),1)])),_:1})]),l("div",T,[a(j,{listing:e.seoRedirectListing,router:e.seoRedirectRouterList,"total-items":e.seoRedirectTotalItems,headers:e.seoRedirectHeaders,limit:e.seoRedirectLimit,fetchData:!0,multipleSelecte:!0,"onUpdate:data":m[10]||(m[10]=t=>e.seoRedirectListing=t),action:e.seoRedirectAction,selectedAction:e.seoRedirectSelectAction},null,8,["listing","router","total-items","headers","limit","action","selectedAction"])])])):d("",!0)])),_:1}),a(A,{key:"seoSettingItem",value:"seoSetting"},{default:r((()=>[U,n(" Fallback behaviour "),a(E,{modelValue:e.seoSetting,"onUpdate:modelValue":m[11]||(m[11]=t=>e.seoSetting=t)},{default:r((()=>[a(I,{label:"Default 404",value:"default"}),a(I,{label:"Redirect to Homepage",value:"homepage"}),a(I,{label:"Custom Redirection",value:"custom"})])),_:1},8,["modelValue"]),"default"==e.seoSetting?(o(),c(H,{key:0,label:"Select Document",modelValue:e.seoSettingDefault,"onUpdate:modelValue":m[12]||(m[12]=t=>e.seoSettingDefault=t),route:"seo_document_page"},null,8,["modelValue"])):d("",!0),"custom"==e.seoSetting?(o(),c($,{key:1,label:"Custom Redirection Url",modelValue:e.seoSettingCustom,"onUpdate:modelValue":m[13]||(m[13]=t=>e.seoSettingCustom=t)},null,8,["modelValue"])):d("",!0),a(g,{variant:"text",onClick:m[14]||(m[14]=t=>e.getSetting("save")),"prepend-icon":"mdi-check"},{default:r((()=>[n(s(e.$t("Save")),1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])])]),e.dialog?(o(),c(J,{key:0,modelValue:e.dialog,"onUpdate:modelValue":m[18]||(m[18]=t=>e.dialog=t)},{default:r((()=>[a(W,null,{default:r((()=>[a(B,{color:"red-lighten-5",density:"compact"},{default:r((()=>[a(P,{text:"Delete",class:"text-red-darken-1"})])),_:1}),a(X,{class:"py-8"},{default:r((()=>[n(s(e.$t("Are you sure you want to delete?")),1)])),_:1}),a(G,{class:"justify-end"},{default:r((()=>[a(g,{color:"",variant:"text",onClick:m[16]||(m[16]=t=>e.dialog=!1)},{default:r((()=>[n(s(e.$t("Close")),1)])),_:1}),a(g,{variant:"elevated",color:"red",onClick:m[17]||(m[17]=t=>e.clearSeoMonitor())},{default:r((()=>[n(s(e.$t("Delete")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):d("",!0),e.editDialog?(o(),c(J,{key:1,modelValue:e.editDialog,"onUpdate:modelValue":m[21]||(m[21]=t=>e.editDialog=t),width:"800"},{default:r((()=>[a(W,null,{default:r((()=>[a(x,{item:e.editItem,"onUpdate:dialog":m[19]||(m[19]=t=>e.editDialog=t),"onUpdate:loading":m[20]||(m[20]=t=>e.seoRedirect=t)},null,8,["item"])])),_:1})])),_:1},8,["modelValue"])):d("",!0)],64)}});export{A as default};
