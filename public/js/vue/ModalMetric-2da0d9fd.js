import{r as e,o as t,h as a,a as l,w as o,d as s,f as i,c as d,i as r,n,t as c,k as u}from"./app-f5e6873e.js";const p={style:{width:"500px"}},m={class:"--formContent componentField-input"},h=i("label",null,"Title",-1),g={class:"--formContent componentField-input"},f=i("label",null,"Type Metric",-1),v={class:"--formContent componentField-input"},C=i("label",null,"Time",-1),_={class:"--formContent componentField-input"},y=i("label",null,"Color",-1),b={class:"d-flex align-center mt-2"},T={props:{catalog:{type:[Number,String],default:"page"},data:Object},data:()=>({toast:u.useToast({position:"top-right",style:{zIndex:"200"}}),rules:[e=>!!e||"Required."],titlePage:"",navigationPage:"",keyPage:"",typeTime:["Today","7 day","10 day","30 day","6 month","12 month","Custom range"],selectTime:"",typeMetric:["visits","visitors","pageviews","views_per_visit","bounce_rate","visit_duration","time_on_page"],selectMetric:"visitors",selectedColor:"#6a1b9a",current_date:"",start_date:"",dateRange:[],showCustomRange:!1}),watch:{selectTime(e){"Custom range"===e&&(this.showCustomRange=!0,this.selectTime="")},dateRange(e){let t=this.dateRange.split("-").map((e=>e.trim())),a=t[1].replace(/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/,((e,t,a,l)=>`${t}-${a=a.padStart(2,"0")}-${l=l.padStart(2,"0")}`)),l=t[0].replace(/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/,((e,t,a,l)=>`${t}-${a=a.padStart(2,"0")}-${l=l.padStart(2,"0")}`));this.current_date=a,this.start_date=l,console.log(this.current_date)}},methods:{closeDialog(){this.$emit("update:dialog",!1)},addDataMetric(){this.$emit("update:showArrChart",!1);const e=new FormData;e.append("title",this.titlePage),e.append("metrics",this.selectMetric),e.append("time",this.selectTime),e.append("current_date",this.current_date),e.append("start_date",this.start_date),e.append("color",this.selectedColor),fetch("../cms/add-arr-chart",{method:"POST",body:e}).then((e=>e.json())).then((e=>{this.$nextTick((()=>{this.data.push(e.data),this.$emit("update:arrChart",this.data),this.$emit("update:showArrChart",!0),this.closeDialog()}))})).catch((e=>{console.log(e)}))}}},V=Object.assign(T,{__name:"ModalMetric",setup:u=>(u,T)=>{const V=e("v-card-title"),w=e("v-text-field"),$=e("Select"),M=e("DateRange"),R=e("v-color-picker"),k=e("v-card-text"),x=e("v-spacer"),D=e("v-btn"),P=e("v-card-actions"),S=e("v-card");return t(),a("div",p,[l(S,null,{default:o((()=>[l(V,{style:{background:"var(--color-primary--light)",color:"var(--color-primary)"}},{default:o((()=>[s(" Add Metric ")])),_:1}),l(k,null,{default:o((()=>[i("div",m,[h,l(w,{variant:"outlined",density:"compact","bg-color":"white",modelValue:u.titlePage,"onUpdate:modelValue":T[0]||(T[0]=e=>u.titlePage=e),required:""},null,8,["modelValue"])]),i("div",g,[f,l($,{items:u.typeMetric,modelValue:u.selectMetric,"onUpdate:modelValue":T[1]||(T[1]=e=>u.selectMetric=e)},null,8,["items","modelValue"])]),i("div",v,[C,l($,{items:u.typeTime,modelValue:u.selectTime,"onUpdate:modelValue":T[2]||(T[2]=e=>u.selectTime=e)},null,8,["items","modelValue"]),u.showCustomRange?(t(),d(M,{key:0,modelValue:u.dateRange,"onUpdate:modelValue":T[3]||(T[3]=e=>u.dateRange=e),label:"Custom Range"},null,8,["modelValue"])):r("",!0)]),i("div",_,[y,l(R,{modelValue:u.selectedColor,"onUpdate:modelValue":T[4]||(T[4]=e=>u.selectedColor=e),class:"w-100","hide-canvas":"","hide-input":"","preset-colors":["#ffffff","#000000","#ff0000","#00ff00","#0000ff"]},null,8,["modelValue"]),i("div",b,[i("div",{class:"color-box",style:n({backgroundColor:u.selectedColor})},null,4),i("span",null,[s(" Color code selected: "),i("strong",null,c(u.selectedColor),1)])])])])),_:1}),l(P,null,{default:o((()=>[l(x),l(D,{text:"Close Dialog",onClick:u.closeDialog},null,8,["onClick"]),l(D,{color:"primary",variant:"text",onClick:T[5]||(T[5]=e=>u.addDataMetric())},{default:o((()=>[s(" OK ")])),_:1})])),_:1})])),_:1})])}});export{V as default};
