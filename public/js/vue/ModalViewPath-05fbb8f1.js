import{am as e,o as t,c as a,a as l,k as i,q as s,N as o,I as n,C as p,E as r,K as d,p as c,M as m}from"./@vue-9ee83fb6.js";import{_ as u}from"./app-059e4860.js";import"./vue-draggable-next-3bc70602.js";import"./unidecode-5a54da0f.js";import"./@ckeditor-fa9b3055.js";import"./vue-abe8eda6.js";import"./ckeditor5-custom-build-7f9f8982.js";import"./vue-toast-notification-f2a3de7a.js";import"./vue3-treeview-e35ab4eb.js";import"./vue-filepond-82332930.js";import"./filepond-136e7cc4.js";import"./filepond-plugin-image-preview-4f29f0b3.js";import"./filepond-plugin-file-validate-type-324437b8.js";import"./mapbox-gl-38e32bee.js";import"./@vueuse-3c3b27e0.js";/* empty css             */import"./vuetify-193e6d04.js";import"./@inertiajs-d76518b1.js";import"./axios-3d65c6bd.js";import"./deepmerge-3a6ffb65.js";import"./side-channel-e57be611.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./call-bind-36d0f176.js";import"./set-function-length-801a4962.js";import"./define-data-property-daf1763a.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-61b1e1fb.js";import"./object-inspect-0fa0b9de.js";import"./nprogress-9c4c7d08.js";import"./lodash.clonedeep-c1370659.js";import"./lodash.isequal-feeae999.js";import"./@vuepic-f846cd73.js";import"./date-fns-421fcf3e.js";import"./@babel-0d6f2215.js";import"./element-plus-e3c76eb0.js";import"./lodash-es-fb3d0246.js";import"./@element-plus-283d896c.js";import"./@popperjs-2d1e819d.js";import"./@ctrl-91de2ec7.js";import"./dayjs-7398d4dd.js";import"./async-validator-8d480e59.js";import"./memoize-one-63ab667a.js";import"./escape-html-5c28ffbb.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-24fcdcc4.js";import"./vue3-apexcharts-663397fa.js";import"./apexcharts-4d1d416c.js";import"./vue-i18n-d397f996.js";import"./@intlify-90b40ed7.js";const h={props:{modelValue:[Object,Array,String],name:String,label:String,hint:String,disabled:{type:Boolean,default:!1},options:[Object,Array],dataSearch:[Object,Array],mandatory:{type:Boolean,default:!1}},data(){return{internalValue:this.modelValue??"",dialogSearch:!1,search:null,listType:["object","document","asset"],listAsset:[],listDataObject:[],listDocument:[],allowedTypes:this.options?this.options.allowedTypes:null,isLoading:!1,allowedTargets:["_blank","_self","_top","_parent"],timeout:null}},watch:{modalValue(e,t){this.internalValue=e},dialogSearch(e){e||(this.search=null,this.handleClearableClick())},internalValue:{handler:function(e,t){this.$emit("update:modelValue",JSON.parse(JSON.stringify(e)))},deep:!0}},methods:{handleClearableClick(){this.listAsset=null,this.listDataObject=null,this.listDocument=null},handleSearchInput(){clearTimeout(this.timeout),this.isLoading=!0,this.timeout=setTimeout((()=>{this.fetchSearchData()}),1500)},fetchSearchData(){if(this.search){let e=["dataObject","document","asset"];this.listType&&this.listType.length>0&&(e=this.listType),this.handleClearableClick(),e.forEach(((e,t)=>{const a=new FormData;"object"==e&&(e="dataObject"),a.append("type[]",e),a.append("search",this.search),e="dataObject"==e?"listDataObject":"document"==e?"listDocument":"listAsset",fetch(route("search_tree"),{method:"POST",body:a}).then((e=>{if(e.ok)return e.json();throw new Error("Có lỗi khi gửi yêu cầu POST.")})).then((t=>{this[e]=t})).catch((e=>{console.error(e)}))})),this.isLoading=!1}else this.isLoading=!1,this.handleClearableClick()},copyPath(e){navigator.clipboard.writeText(e).then((()=>{})).catch((e=>{console.error("Lỗi khi sao chép: ",e)})),this.internalValue=e,this.dialogSearch=!1}}},y={class:"d-flex align-end mb-2"},j={class:"--formContent componentField-input flex-1-1"},b=l("label",{for:""},"Path",-1),f={class:"d-flex justify-space-between align-center w-100 pe-6"},g={class:"d-flex w-50"},v={class:"--body overflow-auto"},w={class:"--icon me-4"},T={class:"--icon me-4"},k={class:"--icon me-4"};const S=u(h,[["render",function(u,h,S,C,_,V){const D=e("v-text-field"),x=e("v-btn"),O=e("v-toolbar-title"),z=e("v-icon"),A=e("v-autocomplete"),L=e("v-toolbar"),P=e("v-progress-linear"),F=e("v-list-item"),E=e("v-list"),G=e("v-card-text"),U=e("v-card"),q=e("v-dialog");return t(),a(d,null,[l("div",y,[l("div",j,[b,i(D,{variant:"outlined",density:"compact",modelValue:_.internalValue,"onUpdate:modelValue":h[0]||(h[0]=e=>_.internalValue=e),disabled:S.disabled,"hide-details":"auto"},null,8,["modelValue","disabled"])]),i(x,{class:"btn-primary ml-2",onClick:h[1]||(h[1]=e=>_.dialogSearch=!0),size:"small",icon:"mdi-magnify"})]),i(q,{class:"dialog-dataSearch",modelValue:_.dialogSearch,"onUpdate:modelValue":h[8]||(h[8]=e=>_.dialogSearch=e),width:"560px"},{default:s((()=>[i(U,null,{default:s((()=>[i(L,null,{default:s((()=>[l("div",f,[i(O,{class:"flex-0-0"},{default:s((()=>[o(" Choose content ")])),_:1}),l("div",g,[i(D,{density:"compact",variant:"solo","append-inner-icon":"mdi-magnify","single-line":"","hide-details":"",modelValue:_.search,"onUpdate:modelValue":h[3]||(h[3]=e=>_.search=e),onKeydown:h[4]||(h[4]=n((e=>V.fetchSearchData()),["enter"])),onInput:h[5]||(h[5]=e=>V.fetchSearchData()),clearable:"","onClick:clear":h[6]||(h[6]=e=>V.handleClearableClick()),class:"--formContent componentField-input me-2"},{"append-inner":s((()=>[i(z,{onClick:h[2]||(h[2]=e=>V.fetchSearchData())},{default:s((()=>[o("mdi-magnify")])),_:1})])),_:1},8,["modelValue"]),i(A,{class:"--formContent componentField-select d-none",label:"Type",density:"compact",width:"120","hide-details":"",items:_.allowedTypes&&_.allowedTypes.length?_.allowedTypes:["object","document","asset"],chips:!0,"closable-chips":!0,variant:"solo",multiple:"",modelValue:_.listType,"onUpdate:modelValue":h[7]||(h[7]=e=>_.listType=e)},null,8,["items","modelValue"])])])])),_:1}),i(G,{class:"pa-0"},{default:s((()=>[l("div",v,[_.isLoading?(t(),p(P,{key:0,active:_.isLoading,indeterminate:""},null,8,["active"])):r("",!0),i(E,{density:"compact",class:"px-2"},{default:s((()=>[_.allowedTypes&&(!_.allowedTypes.length||_.allowedTypes.includes("document"))||_.listType&&_.listType.includes("document")?(t(),a(d,{key:0},[i(F,{type:"type",title:"Document"}),(t(!0),a(d,null,c(_.listDocument,(e=>(t(),p(F,{key:e.name,title:e.name,subtitle:"path: "+e.path,class:"itemDataSearch"},{prepend:s((()=>[l("div",w,[i(z,null,{default:s((()=>[o(m(e.icon),1)])),_:2},1024)])])),append:s((()=>[i(x,{class:"btn-primary --btn-select","prepend-icon":"mdi-content-copy",onClick:t=>V.copyPath(e.path),elevated:"",size:"small"},{default:s((()=>[o(" Select ")])),_:2},1032,["onClick"]),i(x,{class:"btn-primary ms-2","append-icon":"mdi-arrow-right",elevated:"",size:"small"},{default:s((()=>[o(" Go to ")])),_:1})])),_:2},1032,["title","subtitle"])))),128))],64)):r("",!0),_.allowedTypes&&(!_.allowedTypes.length||_.allowedTypes.includes("object"))||_.listType&&_.listType.includes("object")?(t(),a(d,{key:1},[i(F,{type:"type",title:"Object"}),(t(!0),a(d,null,c(_.listDataObject,(e=>(t(),p(F,{key:e.name,title:e.name,subtitle:"path: "+e.path,class:"itemDataSearch"},{prepend:s((()=>[l("div",T,[i(z,null,{default:s((()=>[o(m(e.icon),1)])),_:2},1024)])])),append:s((()=>[i(x,{class:"btn-primary --btn-select","prepend-icon":"mdi-content-copy",onClick:t=>V.copyPath(e.path),elevated:"",size:"small"},{default:s((()=>[o(" Select ")])),_:2},1032,["onClick"]),i(x,{class:"btn-primary ms-2","append-icon":"mdi-arrow-right",elevated:"",size:"small"},{default:s((()=>[o(" Go to ")])),_:1})])),_:2},1032,["title","subtitle"])))),128))],64)):r("",!0),_.allowedTypes&&(!_.allowedTypes.length||_.allowedTypes.includes("asset"))||_.listType&&_.listType.includes("asset")?(t(),a(d,{key:2},[i(F,{type:"type",title:"Asset"}),(t(!0),a(d,null,c(_.listAsset,(e=>(t(),p(F,{key:e.name,title:e.name,subtitle:"path: "+e.path,class:"itemDataSearch"},{prepend:s((()=>[l("div",k,[i(z,null,{default:s((()=>[o(m(e.icon),1)])),_:2},1024)])])),append:s((()=>[i(x,{class:"btn-primary --btn-select","prepend-icon":"mdi-content-copy",onClick:t=>V.copyPath(e.path),elevated:"",size:"small"},{default:s((()=>[o(" Select ")])),_:2},1032,["onClick"]),i(x,{class:"btn-primary ms-2","append-icon":"mdi-arrow-right",elevated:"",size:"small"},{default:s((()=>[o(" Go to ")])),_:1})])),_:2},1032,["title","subtitle"])))),128))],64)):r("",!0)])),_:1})])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}]]);export{S as default};
