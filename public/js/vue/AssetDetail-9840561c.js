import e from"./Layout-9a29d640.js";import{v as l,m as s,q as a,r as t,o as i,h as o,c as d,w as n,d as c,t as r,i as m,f as p,a as u,F as v,l as f,u as h,k as g}from"./app-b548be80.js";const b={class:"mainAppWrapper d-flex flex-column"},y={class:"mainBarWrapper px-5 py-3 d-flex justify-space-between align-center flex-grow-0 flex-shrink-0"},A={class:"--left d-flex"},k={class:"--left d-flex me-4"},D={class:"--listing"},w={class:"d-flex flex-1-0 flex-column w-0"},C=p("span",null,"Home",-1),x=p("span",{class:"--divider"},"·",-1),F=p("span",{class:"--divider"},"·",-1),V={class:"--objectTitle"},I={class:"--right"},_={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-hidden"},T={class:"detailFormWrapper py-5 ps-5 pe-12 flex-grow-1 overflow-auto"},U={key:0,class:"componentLayout-tabPanel pa-4"},M={key:0},P=["src"],W={key:1},L={class:"assetPreviewWrapper type-code pa-4"},j={key:2,controls:"",width:"100%",class:"rounded-lg"},S=["src"],R={key:1,class:"d-flex justify-space-between mt-6"},O={class:"d-flex"},N={id:"app"},$={key:2},B={class:"detailSidebarWrapper overflow-auto"},q={class:"detailSidebarBlock"},z=p("h4",{class:"--blockTitle"},"Attribute",-1),E={key:0,class:"--blockContent"},G={class:"--formWrapper"},H={key:0,class:"--formItem"},J={class:"--formItem"},K={class:"--formItem"},Q={class:"--formItem"},X={key:1,class:"--blockContent"},Y={class:"metaDataGroup"},Z={class:"--metaDataItem"},ee={class:"d-flex align-center"},le=p("div",null,null,-1),se={class:"--metaDataItem"},ae={class:"d-flex align-center"},te={key:0},ie={key:1},oe={class:"--metaDataItem"},de={class:"d-flex align-center"},ne={key:0},ce={key:1},re={class:"detailSidebarBlock"},me=p("h4",{class:"--blockTitle"},"Meta Data",-1),pe={class:"--blockContent"},ue={class:"metaDataGroup"},ve={class:"--metaDataItem"},fe=p("small",null,"File URL",-1),he={class:"--metaDataItem"},ge=p("small",null,"File name",-1),be={key:0,class:"--metaDataItem"},ye=p("small",null,"Dimensions",-1),Ae={class:"--metaDataItem"},ke=p("small",null,"File Type",-1),De={class:"--metaDataItem"},we=p("small",null,"File Size",-1),Ce={class:"--metaDataItem"},xe=p("small",null,"Uploaded on",-1),Fe=p("div",{class:"--formWrapper px-4"},null,-1),Ve=l(a,s),Ie={name:"Asset",components:{FilePond:Ve},props:{detailAsset:Object,nameParent:Object},data(){return{showDeleteDialog:!1,itemToDelete:null,showFileSelectionDialog:!1,selectedFiles:[],languages:this.detailAsset&&this.detailAsset.languages?this.detailAsset.languages[0]:null,ex4:["red","success"],showCopySuccess:!1,alertMessage:"Copy successful!",successMessage:null,errorMessage:null,toast:g.useToast({position:"top-right"}),rules:[e=>!!e||"Required."],dialogFilepond:!1,myFiles:[]}},methods:{setFocalPoint(){},downloadMedia(){const e=this.detailAsset.publicURL,l=document.createElement("a");l.href=e,l.download="",document.body.appendChild(l),l.click(),document.body.removeChild(l)},copyToClipboard(){const e=document.createElement("textarea");e.value=this.detailAsset.publicURL,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),setTimeout((()=>{this.toast.open({message:"Copy Link URL Success",type:"success"})}),100)},showDeleteConfirmationDialog(e){this.itemToDelete=e,this.showDeleteDialog=!0},deleteItem(){const e=this.itemToDelete.id,l=this.itemToDelete.parentId,s=new FormData;s.append("id",e),s.append("folderId",l),this.$inertia.post("/cms/asset/delete",s),this.showDeleteDialog=!1},closeDeleteDialog(){this.showDeleteDialog=!1,this.itemToDelete=null},saveInfoAsset(){const e=this.detailAsset.id,l=this.detailAsset.alt,s=this.detailAsset.caption,a=this.detailAsset.description,t=this.languages,i=this.detailAsset.fileName,o=this.detailAsset.videoMov,d=this.detailAsset.videoWebm;if(void 0!==i&&""!==i.trim()){const n=new FormData;n.append("id",e),n.append("alt",l),n.append("caption",s),n.append("description",a),n.append("language",t),n.append("fileName",i),n.append("videoMov",o),n.append("videoWebm",d),this.$inertia.post("/cms/asset/add-attribute",n),setTimeout((()=>{this.flash.success&&this.toast.open({message:this.flash.success,type:"success"});var e=this.flash.errors.key??"",l=this.flash.errors.message??this.flash.errors;this.flash.errors&&this.toast.open({message:e+" "+l,type:"error"})}),1e3),this.loading=!1}else setTimeout((()=>{this.toast.open({message:"There was an error while renaming the item.",type:"error"})}),1e3)},navigateToFolder(){this.$inertia.post("/cms/asset/listing")},navigateToFolderChill(e){this.$inertia.post("/cms/asset/listing?folderId="+e.id)},handleFilePondInit(){this.$refs.pond.getFiles()},filesChange:function(e,l){l.setMetadata("id",this.detailAsset.id)},handleProcessFile(e){sessionStorage.clear(),this.$inertia.post("/cms/asset/detail/"+this.detailAsset.id),setTimeout((()=>{this.toast.open({message:"Upload the file successfully",type:"success"}),this.dialogFilepond=!1,this.dialog=!1}),1e3),sessionStorage.clear()}},watch:{languages(){const e=this.detailAsset.id,l=this.languages,s=new FormData;s.append("language",l),this.$inertia.post("/cms/asset/detail/"+e,s)}}},_e=Object.assign(Ie,{layout:e},{props:{detailAsset:Object,flash:Object,nameParent:Object},setup:e=>(l,s)=>{const a=t("v-alert"),g=t("v-icon"),Ie=t("v-breadcrumbs-item"),_e=t("v-breadcrumbs"),Te=t("v-btn"),Ue=t("v-toolbar-title"),Me=t("v-toolbar"),Pe=t("v-card-text"),We=t("v-card-actions"),Le=t("v-card"),je=t("v-dialog"),Se=t("Input"),Re=t("v-img"),Oe=t("Select"),Ne=t("v-text-field"),$e=t("v-textarea"),Be=t("Images");return i(),o(v,null,[l.successMessage?(i(),d(a,{key:0,type:"success",dismissible:""},{default:n((()=>[c(r(l.successMessage),1)])),_:1})):m("",!0),l.errorMessage?(i(),d(a,{key:1,type:"error",dismissible:""},{default:n((()=>[c(r(l.errorMessage),1)])),_:1})):m("",!0),p("div",b,[p("div",y,[p("div",A,[p("div",k,[p("div",{class:"--objectIcon me-3",onClick:s[0]||(s[0]=e=>l.back(l.breadcrumb.root.id))},[p("div",D,[u(g,{icon:"mdi-image-outline"}),u(g,{icon:"mdi-arrow-left"}),u(g,{icon:"mdi-image-outline"})])]),p("div",w,[u(_e,{class:"breadcrumbWrapper pa-0"},{default:n((()=>[u(Ie,{class:"--itemBreadcrumb",disabled:!e.nameParent,onClick:l.navigateToFolder,title:"Home"},{default:n((()=>[C])),_:1},8,["disabled","onClick"]),x,(i(!0),o(v,null,f(e.nameParent,((e,s)=>(i(),o(v,{key:s},[e?(i(),d(Ie,{key:0,onClick:s=>l.navigateToFolderChill(e),class:"--itemBreadcrumb",disabled:e.end},{default:n((()=>[p("span",null,r(e.name),1)])),_:2},1032,["onClick","disabled"])):m("",!0),F],64)))),128))])),_:1}),p("h3",V,r(e.detailAsset.fileName),1)])])]),p("div",I,[u(Te,{class:"me-2 btn-primary","prepend-icon":"mdi-content-save",onClick:l.saveInfoAsset},{default:n((()=>[c(" Save ")])),_:1},8,["onClick"]),u(Te,{elevated:"",class:"bg-red","prepend-icon":"mdi-delete-outline",onClick:s[1]||(s[1]=s=>l.showDeleteConfirmationDialog(e.detailAsset))},{default:n((()=>[c(" Delete ")])),_:1}),u(je,{modelValue:l.showDeleteDialog,"onUpdate:modelValue":s[2]||(s[2]=e=>l.showDeleteDialog=e),"max-width":"300"},{default:n((()=>[u(Le,null,{default:n((()=>[u(Me,{color:"red-lighten-5",density:"compact"},{default:n((()=>[u(Ue,{text:"Delete",class:"text-red-darken-1"})])),_:1}),u(Pe,{class:"py-8"},{default:n((()=>[c(" Are you sure you want to delete? ")])),_:1}),u(We,{class:"justify-end"},{default:n((()=>[u(Te,{color:"",variant:"text",onClick:l.closeDeleteDialog},{default:n((()=>[c("Close ")])),_:1},8,["onClick"]),u(Te,{variant:"elevated",color:"red-darken-1",onClick:l.deleteItem},{default:n((()=>[c(" Delete ")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])]),p("div",_,[p("div",T,[u(Se,{label:"Media Name",rules:l.rules,modelValue:e.detailAsset.fileName,"onUpdate:modelValue":s[3]||(s[3]=l=>e.detailAsset.fileName=l),class:"mb-3"},null,8,["rules","modelValue"]),e.detailAsset.publish?m("",!0):(i(),o("div",U,[u(Re,{class:"rounded-lg",width:"auto",variant:"",src:e.detailAsset.publicURL},null,8,["src"]),"document"===e.detailAsset.type&&"application/pdf"===e.detailAsset.mimetype?(i(),o("div",M,[p("iframe",{class:"rounded-lg",src:e.detailAsset.publicURL,width:"100%",height:"420px",frameborder:"0"},null,8,P)])):m("",!0),"text"===e.detailAsset.type?(i(),o("div",W,[p("div",L,r(e.detailAsset.data),1)])):m("",!0),"video"===e.detailAsset.type?(i(),o("video",j,[p("source",{src:e.detailAsset.publicURL,type:"video/mp4"},null,8,S)])):m("",!0)])),e.detailAsset.publish?(i(),o("div",$,"Preview not available")):(i(),o("div",R,[u(Te,{class:"btn-primary",onClick:l.downloadMedia,"prepend-icon":"mdi-download-outline"},{default:n((()=>[c(" Download ")])),_:1},8,["onClick"]),p("div",O,["image"===e.detailAsset.type?(i(),d(Te,{key:0,class:"me-2",variant:"tonal",onClick:l.setFocalPoint,"prepend-icon":"mdi-crosshairs"},{default:n((()=>[c(" Set Focal Point ")])),_:1},8,["onClick"])):m("",!0),"image"===e.detailAsset.type?(i(),d(Te,{key:1,class:"",variant:"tonal",onClick:s[4]||(s[4]=e=>l.dialogFilepond=!0),"prepend-icon":"mdi-reload"},{default:n((()=>[c(" Replace Media ")])),_:1})):m("",!0)]),u(je,{modelValue:l.dialogFilepond,"onUpdate:modelValue":s[5]||(s[5]=e=>l.dialogFilepond=e),ref:"modalContent",class:"dialog-mediaLibrary",width:"500"},{default:n((()=>[p("div",N,[u(h(Ve),{name:"test",ref:"pond","label-idle":"Drop files here or <span class='filepond--label-action'>Browse</span>","allow-multiple":!0,server:"/cms/asset/replace-image",files:l.myFiles,onInit:l.handleFilePondInit,onProcessfile:l.handleProcessFile,onAddfile:l.filesChange},null,8,["files","onInit","onProcessfile","onAddfile"])])])),_:1},8,["modelValue"])]))]),p("div",B,[p("div",q,[z,"image"===e.detailAsset.type?(i(),o("div",E,[p("div",G,[e.detailAsset.languages.length>1?(i(),o("div",H,[u(Oe,{items:e.detailAsset.languages,name:"Languge",modelValue:l.languages,"onUpdate:modelValue":s[6]||(s[6]=e=>l.languages=e),density:"compact",label:"Languge","hide-details":"auto",itemTitle:"key",itemValue:"value",subtitle:"value"},null,8,["items","modelValue"])])):m("",!0),p("div",J,[u(Ne,{class:"--formContent componentField-input",variant:"outlined",density:"compact","bg-color":"white",label:"Alt Text",modelValue:e.detailAsset.alt,"onUpdate:modelValue":s[7]||(s[7]=l=>e.detailAsset.alt=l)},null,8,["modelValue"])]),p("div",K,[u(Ne,{class:"--formContent componentField-input",variant:"outlined",density:"compact","bg-color":"white",label:"Caption",modelValue:e.detailAsset.caption,"onUpdate:modelValue":s[8]||(s[8]=l=>e.detailAsset.caption=l)},null,8,["modelValue"])]),p("div",Q,[u($e,{class:"--formContent",variant:"outlined",label:"Description",modelValue:e.detailAsset.description,"onUpdate:modelValue":s[9]||(s[9]=l=>e.detailAsset.description=l)},null,8,["modelValue"])])])])):m("",!0),"video"===e.detailAsset.type?(i(),o("div",X,[p("div",Y,[p("div",Z,[p("small",ee,[u(g,{class:"me-2",left:"",style:{color:"green"}},{default:n((()=>[c("mdi-check-circle")])),_:1}),c(" .mp4 (Original) ")]),le]),p("div",se,[p("small",ae,[e.detailAsset.videoMov?(i(),o("div",te,[u(g,{class:"me-2",left:"",style:{color:"green"}},{default:n((()=>[c("mdi-check-circle")])),_:1})])):(i(),o("div",ie,[u(g,{class:"me-2",left:"",style:{color:"red"}},{default:n((()=>[c("mdi-close-circle")])),_:1})])),c(" .mov ")]),p("div",null,[u(Be,{name:"mov",label:"",modelValue:e.detailAsset.videoMov,"onUpdate:modelValue":s[10]||(s[10]=l=>e.detailAsset.videoMov=l),disabled:!1,checkbox:"1",type:"video",class:"mt-2",mimetype:"video/quicktime"},null,8,["modelValue"])])]),p("div",oe,[p("small",de,[e.detailAsset.videoWebm?(i(),o("div",ne,[u(g,{class:"me-2",left:"",style:{color:"green"}},{default:n((()=>[c("mdi-check-circle")])),_:1})])):(i(),o("div",ce,[u(g,{class:"me-2",left:"",style:{color:"red"}},{default:n((()=>[c("mdi-close-circle")])),_:1})])),c(" .webm ")]),p("div",null,[u(Be,{name:"webm",label:"",modelValue:e.detailAsset.videoWebm,"onUpdate:modelValue":s[11]||(s[11]=l=>e.detailAsset.videoWebm=l),disabled:!1,checkbox:"1",type:"video",class:"mt-2",mimetype:"video/webm"},null,8,["modelValue"])])])])])):m("",!0)]),p("div",re,[me,p("div",pe,[p("div",ue,[p("div",ve,[fe,p("p",null,r(e.detailAsset.publicURL),1),u(Te,{variant:"elevated",size:"small",class:"mt-1 btn-primary","prepend-icon":"mdi-content-copy",onClick:l.copyToClipboard},{default:n((()=>[c(" Copy ")])),_:1},8,["onClick"])]),p("div",he,[ge,p("p",null,r(e.detailAsset.fileName),1)]),"image"===e.detailAsset.type?(i(),o("div",be,[ye,p("p",null,r(e.detailAsset.dimensions),1)])):m("",!0),p("div",Ae,[ke,p("p",null,r(e.detailAsset.fomat),1)]),p("div",De,[we,p("p",null,r(e.detailAsset.size),1)]),p("div",Ce,[xe,p("p",null,r(e.detailAsset.uploadOn),1)])])]),Fe])])])])],64)}});export{_e as default};
