import"./lodash-3c0bd755.js";import e from"./Layout-1a15ace9.js";import{r as a,o as t,h as s,f as i,a as l,t as n,w as o,d as r,F as c,l as d,k as u}from"./app-ab7f825e.js";const g={class:"mainAppWrapper d-flex flex-column"},b={class:"mainBarWrapper px-5 py-3 d-flex justify-space-between align-center flex-grow-0 flex-shrink-0"},h={class:"--left d-flex align-center"},p={class:"d-flex flex-1-0 flex-column w-0"},m={class:"--objectTitle"},f={class:"--right"},v={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1"},w={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},y=["value"],j={class:"detailSidebarWrapper"},O={class:"detailSidebarBlock"},x=i("h4",{class:"--blockTitle"},"Languague",-1),S={class:"--blockContent"},k={class:"--formWrapper"},L={class:"--formItem"},N={props:{data:Object,label:String,route:String,dataField:Array,options:[Array],modelValue:[Object,Array],breadcrumb:[Object,Array]},data(){var e="";return this.language&&(e=this.language),{languages:this.sidebar.language,dataNew:this.data,selectedLanguage:null,panel:[0],tab:null,validationMessages:{},locale:e,toast:u.useToast({position:"top-right",style:{zIndex:"200"}})}},name:"Detail",mounted(){this.createLocalStorage()},methods:{createLocalStorage(e=null){var a=window.location.href;window.localStorage.setItem(a,e)},save(e){this.loading=!0,this.dataNew.status=e,this.dataNew.language=this.sidebar.language;const a=new FormData;for(const t in this.dataNew)"children"===t?a.append(t,JSON.stringify(this.dataNew[t])):a.append(t,this.dataNew[t]);fetch(route("object_create",{object:this.classObject.name}),{method:"POST",body:a}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((e=>{e.warning?this.warningMess(e.warning):(this.successMess("Create object success!"),this.$inertia.get(route("vuetify_object",{object:this.classObject.id})))})).catch((e=>{console.error("Lỗi xảy ra khi gửi yêu cầu:",e)})).finally((()=>{this.loading=!1}))},warningMess(e){e&&setTimeout((()=>{this.toast.open({message:e,type:"warning"})}),1e3)},successMess(e){e&&setTimeout((()=>{this.toast.open({message:e,type:"success"})}),1e3)},back(e){const a=window.location.href;let t=window.localStorage.getItem(a);t=JSON.parse(t),t&&"onchange"in t?confirm("Leave Site? Changes you made may not be saved.")&&this.$inertia.get(route("vuetify_object",{object:e})):this.$inertia.get(route("vuetify_object",{object:e}))}},watch:{languages(e){this.sidebar.language=e},dataNew:{deep:!0,handler(){this.createLocalStorage(JSON.stringify({onchange:!0}))}}}},C=Object.assign(N,{layout:e},{props:{data:Object,breadcrumb:[Object,Array],language:String,languageOption:Object,sidebar:Object,classObject:Object},setup:e=>(u,N)=>{const C=a("v-icon"),T=a("v-btn"),W=a("DataObjectField"),_=a("v-form"),A=a("Select");return t(),s("div",g,[i("div",b,[i("div",h,[l(C,{icon:"mdi-cube-outline",class:"--objectIcon me-3"}),i("div",p,[i("h3",m," Create a new "+n(e.breadcrumb.root.title),1)])]),i("div",f,[l(T,{class:"btn-primary me-2","prepend-icon":"mdi-check-all",onClick:N[0]||(N[0]=e=>u.save("Publish"))},{default:o((()=>[r(" Save & Publish ")])),_:1}),l(T,{class:"btn-primary","prepend-icon":"mdi-content-save",onClick:N[1]||(N[1]=e=>u.save("UnPublish"))},{default:o((()=>[r(" Save ")])),_:1})])]),i("div",v,[i("div",w,[(t(!0),s(c,null,d(u.dataNew.children,((e,a)=>(t(),s("div",{key:a,value:e,class:"componentLayout-tabPanel mb-8"},[l(_,null,{default:o((()=>[l(W,{item:e,languages:u.languages},null,8,["item","languages"])])),_:2},1024)],8,y)))),128))]),i("div",j,[i("div",O,[x,i("div",S,[i("div",k,[i("div",L,[l(A,{items:e.languageOption,name:"Languge",modelValue:u.languages,"onUpdate:modelValue":N[2]||(N[2]=e=>u.languages=e),"hide-details":"auto",label:"Languge",itemTitle:"key",itemValue:"value",subtitle:"value"},null,8,["items","modelValue"])])])])])])])])}});export{C as default};
