import e from"./Layout-2e8924a8.js";import{r as l,o as t,h as s,f as a,a as o,w as u,d as n,t as c,F as d,l as i,k as m}from"./app-ea1e27d8.js";const r={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},h={class:"d-flex justify-space-between"},b={class:"--left d-flex align-center"},f=a("div",{class:"d-flex flex-1-0 flex-column w-0"},[a("h3",{class:"--objectTitle"},"Create User")],-1),p={class:"--right"},v=a("span",{class:"--text"},"Basic",-1),x=a("span",{class:"--text"},"Permission",-1),V={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-auto"},j={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},A={class:"componentLayout-tabPanel px-8 py-4 w-50"},g=a("div",{class:"ml-5"},"Accessible Data",-1),C=a("thead",null,[a("tr",null,[a("th",{class:"text-left"}," Documents "),a("th",{class:"text-left"}," All "),a("th",{class:"text-left"}," List "),a("th",{class:"text-left"}," View "),a("th",{class:"text-left"}," Save "),a("th",{class:"text-left"}," Publish "),a("th",{class:"text-left"}," UnPublish "),a("th",{class:"text-left"}," Delete "),a("th",{class:"text-left"}," Create ")])],-1),_=a("td",null,"Documents",-1),S=a("thead",null,[a("tr",null,[a("th",{class:"text-left"}," Object "),a("th",{class:"text-left"}," All "),a("th",{class:"text-left"}," List "),a("th",{class:"text-left"}," View "),a("th",{class:"text-left"}," Save "),a("th",{class:"text-left"}," Publish "),a("th",{class:"text-left"}," UnPublish "),a("th",{class:"text-left"}," Delete "),a("th",{class:"text-left"}," Create ")])],-1),O=a("thead",null,[a("tr",null,[a("th",{class:"text-left"}," Assets "),a("th",{class:"text-left"}," All "),a("th",{class:"text-left"}," List "),a("th",{class:"text-left"}," View "),a("th",{class:"text-left"}," Save "),a("th",{class:"text-left"}," Publish "),a("th",{class:"text-left"}," UnPublish "),a("th",{class:"text-left"}," Delete "),a("th",{class:"text-left"}," Create ")])],-1),D=a("td",null,"Assets",-1),R={data(){var e=[],l=[];return this.objectSetting.forEach((t=>{t.name,e=[t.name+"ObjectList",t.name+"ObjectView",t.name+"ObjectSave",t.name+"ObjectPublish",t.name+"ObjectUnPublish",t.name+"ObjectDelete",t.name+"ObjectCreate"],t.name,l.push({objArr:e,vmodelObjSelected:!1,vmodelObjArr:[],objName:t.name})})),{tabPermission:null,tab:null,username:[e=>!!e||"Required.",e=>(e||"").length<=20||"Max 20 characters"],email:[e=>!!e||"Required.",e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"Invalid e-mail."],name:[e=>!!e||"Required."],password:[e=>!!e||"Required.",e=>(e||"").length>=6||"Password must be at least 6 characters"],role:[e=>!!e||"Required."],user:{permission:[]},documentRoles:["homeDocumentList","homeDocumentView","homeDocumentSave","homeDocumentPublish","homeDocumentUnPublish","homeDocumentDelete","homeDocumentCreate"],docRoleSelected:[],objectRoleSelected:[],assetsRoleSelected:[],assetsRoles:["assetsList","assetsView","assetsSave","assetsPublish","assetsUnPublish","assetsDelete","assetsCreate"],selectAllDocument:!1,selectAllAssets:!1,objectOptions:l,toast:m.useToast()}},watch:{},methods:{submitForm(e){this.objectOptions.forEach((e=>{this.objectRoleSelected=this.objectRoleSelected.concat(e.vmodelObjArr)})),this.user.permission=[...this.docRoleSelected,...this.objectRoleSelected,...this.assetsRoleSelected],this.$inertia.post(route("user_create"),this.user,{forceFormData:!0,onStart:()=>this.loading=!0,onFinish:()=>this.loading=!1}),setTimeout((()=>{var e=this.flash.errors.key?this.flash.errors.key:"",l=this.flash.errors.message??this.flash.errors;this.flash.errors&&this.toast.open({message:e+" "+l,type:"error",position:"bottom"})}),1e3),this.loading=!1},toggleAllCheckboxesDocument(){this.docRoleSelected=this.selectAllDocument?this.documentRoles.slice():[]},checkIfAllDocumentChecked(){this.selectAllDocument=this.docRoleSelected.length===this.documentRoles.length},toggleAllCheckboxesAssets(){this.assetsRoleSelected=this.selectAllAssets?this.assetsRoles.slice():[]},checkIfAllAssetsChecked(){this.selectAllAssets=this.assetsRoleSelected.length===this.assetsRoles.length},checkIfAllObjectChecked(e,l){this.objectOptions.forEach((l=>{e==l.objName&&(l.vmodelObjSelected=l.vmodelObjArr.length===l.objArr.length)}))},toggleAllCheckboxesObject(e){this.objectOptions.forEach((l=>{e==l.objName&&(l.vmodelObjArr=l.vmodelObjSelected?l.objArr.slice():[])}))}}},k=Object.assign(R,{layout:e},{__name:"Create",props:{roles:Array,flash:Object,objectSetting:Array},setup:e=>(m,R)=>{const k=l("v-icon"),w=l("v-btn"),y=l("v-tab"),U=l("v-tabs"),P=l("Checkbox"),F=l("Input"),I=l("Email"),N=l("Password"),L=l("Select"),E=l("v-window-item"),q=l("v-radio"),T=l("v-radio-group"),W=l("v-col"),z=l("v-row"),$=l("v-checkbox"),B=l("v-table"),Z=l("v-window");return t(),s("form",{onSubmit:R[17]||(R[17]=(...e)=>m.submitForm&&m.submitForm(...e)),class:"mainAppWrapper d-flex flex-column"},[a("div",r,[a("div",h,[a("div",b,[o(k,{icon:"mdi-account-group-outline",class:"--objectIcon me-3"}),f]),a("div",p,[o(w,{class:"btn-primary",onClick:m.submitForm,"prepend-icon":"mdi-check-all",variant:"elevated"},{default:u((()=>[n(c(m.$t("save")),1)])),_:1},8,["onClick"])])]),o(U,{modelValue:m.tab,"onUpdate:modelValue":R[0]||(R[0]=e=>m.tab=e),class:"mainTabPanel"},{default:u((()=>[o(y,{value:"informnation"},{default:u((()=>[v])),_:1}),o(y,{value:"permission"},{default:u((()=>[x])),_:1})])),_:1},8,["modelValue"])]),a("div",V,[a("div",j,[o(Z,{modelValue:m.tab,"onUpdate:modelValue":R[16]||(R[16]=e=>m.tab=e),class:"overflow-visible"},{default:u((()=>[o(E,{value:"informnation",class:""},{default:u((()=>[a("div",A,[o(P,{label:"Active",modelValue:m.user.active,"onUpdate:modelValue":R[1]||(R[1]=e=>m.user.active=e)},null,8,["modelValue"]),o(F,{name:"username",label:"Username",modelValue:m.user.username,"onUpdate:modelValue":R[2]||(R[2]=e=>m.user.username=e)},null,8,["modelValue"]),o(I,{name:"email",label:"Email",modelValue:m.user.email,"onUpdate:modelValue":R[3]||(R[3]=e=>m.user.email=e)},null,8,["modelValue"]),o(N,{name:"password",label:"Password",modelValue:m.user.password,"onUpdate:modelValue":R[4]||(R[4]=e=>m.user.password=e)},null,8,["modelValue"]),o(F,{name:"name",label:"Full Name",modelValue:m.user.name,"onUpdate:modelValue":R[5]||(R[5]=e=>m.user.name=e)},null,8,["modelValue"]),o(L,{name:"roles",label:"Select Role",density:"compact",items:e.roles,itemTitle:"name",itemValue:"id",modelValue:m.user.role,"onUpdate:modelValue":R[6]||(R[6]=e=>m.user.role=e)},null,8,["items","modelValue"])])])),_:1}),o(E,{value:"permission"},{default:u((()=>[o(z,null,{default:u((()=>[o(W,{cols:"12",class:"d-flex align-center mt-5"},{default:u((()=>[g,o(T,{class:"d-flex align-center",modelValue:m.user.accessibleData,"onUpdate:modelValue":R[7]||(R[7]=e=>m.user.accessibleData=e),inline:""},{default:u((()=>[o(q,{label:"All",value:"all"}),o(q,{label:"Personal data only",value:"personalDataOnly"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),o(z,null,{default:u((()=>[o(W,{cols:"12"},{default:u((()=>[o(U,{modelValue:m.tabPermission,"onUpdate:modelValue":R[8]||(R[8]=e=>m.tabPermission=e),direction:"horizontal","background-color":"primary"},{default:u((()=>[o(y,{value:"documents"},{default:u((()=>[o(k,{start:""},{default:u((()=>[n(" mdi-file-document-outline ")])),_:1}),n(" Documents ")])),_:1}),o(y,{value:"object"},{default:u((()=>[o(k,{start:""},{default:u((()=>[n(" mdi-cube-outline ")])),_:1}),n(" Object ")])),_:1}),o(y,{value:"assets"},{default:u((()=>[o(k,{start:""},{default:u((()=>[n(" mdi-image ")])),_:1}),n(" Assets ")])),_:1})])),_:1},8,["modelValue"]),o(Z,{modelValue:m.tabPermission,"onUpdate:modelValue":R[15]||(R[15]=e=>m.tabPermission=e)},{default:u((()=>[o(E,{value:"documents"},{default:u((()=>[o(z,{justify:"center",class:"pa-4"},{default:u((()=>[o(W,{cols:"12"},{default:u((()=>[o(B,{"fixed-header":"",height:"300px"},{default:u((()=>[C,a("tbody",null,[a("tr",null,[_,a("td",null,[o($,{modelValue:m.selectAllDocument,"onUpdate:modelValue":R[9]||(R[9]=e=>m.selectAllDocument=e),onChange:R[10]||(R[10]=e=>m.toggleAllCheckboxesDocument(m.item.objName)),type:"multi"},null,8,["modelValue"])]),(t(!0),s(d,null,i(m.documentRoles,(e=>(t(),s("td",null,[o(P,{modelValue:m.docRoleSelected,"onUpdate:modelValue":R[11]||(R[11]=e=>m.docRoleSelected=e),value:e,type:"multi",onChange:m.checkIfAllDocumentChecked},null,8,["modelValue","value","onChange"])])))),256))])])])),_:1})])),_:1})])),_:1})])),_:1}),o(E,{value:"object"},{default:u((()=>[o(z,{justify:"center",class:"pa-4"},{default:u((()=>[o(W,{cols:"12"},{default:u((()=>[o(B,{"fixed-header":""},{default:u((()=>[S,a("tbody",null,[(t(!0),s(d,null,i(m.objectOptions,((e,l)=>(t(),s("tr",null,[a("td",null,c(e.objName),1),a("td",null,[o($,{modelValue:e.vmodelObjSelected,"onUpdate:modelValue":l=>e.vmodelObjSelected=l,onChange:l=>m.toggleAllCheckboxesObject(e.objName),type:"multi"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),(t(!0),s(d,null,i(e.objArr,(l=>(t(),s("td",null,[o(P,{modelValue:e.vmodelObjArr,"onUpdate:modelValue":l=>e.vmodelObjArr=l,value:l,type:"multi",onChange:t=>m.checkIfAllObjectChecked(e.objName,l)},null,8,["modelValue","onUpdate:modelValue","value","onChange"])])))),256))])))),256))])])),_:1})])),_:1})])),_:1})])),_:1}),o(E,{value:"assets"},{default:u((()=>[o(z,{justify:"center",class:"pa-4"},{default:u((()=>[o(W,{cols:"12"},{default:u((()=>[o(B,{"fixed-header":"",height:"300px"},{default:u((()=>[O,a("tbody",null,[a("tr",null,[D,a("td",null,[o($,{modelValue:m.selectAllAssets,"onUpdate:modelValue":R[12]||(R[12]=e=>m.selectAllAssets=e),onChange:R[13]||(R[13]=e=>m.toggleAllCheckboxesAssets(m.item.objName)),type:"multi"},null,8,["modelValue"])]),(t(!0),s(d,null,i(m.assetsRoles,(e=>(t(),s("td",null,[o(P,{modelValue:m.assetsRoleSelected,"onUpdate:modelValue":R[14]||(R[14]=e=>m.assetsRoleSelected=e),value:e,type:"multi",onChange:m.checkIfAllAssetsChecked},null,8,["modelValue","value","onChange"])])))),256))])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])])],32)}});export{k as default};
