import e from"./Layout-8c51cdb8.js";import{d as t}from"./vue-toast-notification-f2a3de7a.js";import a from"./ModalViewPath-ab66b918.js";import i from"./ModalBlockEditable-0106ccc0.js";import l from"./ModalVideo-cd4e0ee7.js";import n from"./ModalScheduled-a99231db.js";import s from"./ModalAreaBlock-803ba0d3.js";import{V as o}from"./vue-draggable-next-3bc70602.js";import{am as d,o as r,c as p,a as m,k as u,q as c,K as y,p as h,C as g,M as v,E as f,N as w,L as k}from"./@vue-9ee83fb6.js";import"./@vueuse-3c3b27e0.js";import"./unidecode-5a54da0f.js";import"./@ckeditor-fa9b3055.js";import"./vue-abe8eda6.js";import"./app-0745d670.js";import"./ckeditor5-custom-build-7f9f8982.js";import"./vue3-treeview-e35ab4eb.js";import"./vue-filepond-82332930.js";import"./filepond-136e7cc4.js";import"./filepond-plugin-image-preview-4f29f0b3.js";import"./filepond-plugin-file-validate-type-324437b8.js";import"./mapbox-gl-38e32bee.js";/* empty css             */import"./vuetify-193e6d04.js";import"./@inertiajs-d76518b1.js";import"./axios-3d65c6bd.js";import"./deepmerge-3a6ffb65.js";import"./side-channel-e57be611.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./call-bind-36d0f176.js";import"./set-function-length-801a4962.js";import"./define-data-property-daf1763a.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-61b1e1fb.js";import"./object-inspect-0fa0b9de.js";import"./nprogress-9c4c7d08.js";import"./lodash.clonedeep-c1370659.js";import"./lodash.isequal-feeae999.js";import"./@vuepic-f846cd73.js";import"./date-fns-421fcf3e.js";import"./@babel-0d6f2215.js";import"./element-plus-e3c76eb0.js";import"./lodash-es-fb3d0246.js";import"./@element-plus-283d896c.js";import"./@popperjs-2d1e819d.js";import"./@ctrl-91de2ec7.js";import"./dayjs-7398d4dd.js";import"./async-validator-8d480e59.js";import"./memoize-one-63ab667a.js";import"./escape-html-5c28ffbb.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-24fcdcc4.js";import"./vue3-apexcharts-663397fa.js";import"./apexcharts-4d1d416c.js";import"./vue-i18n-d397f996.js";import"./@intlify-90b40ed7.js";import"./ModalFeaturette-a74a8453.js";const b={class:"mainAppWrapper d-flex flex-column"},V={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},C={class:"d-flex justify-space-between align-center"},D={class:"--left d-flex align-center"},S={class:"d-flex flex-column me-4"},I=m("span",null,"Home",-1),x=m("span",{class:"--divider"},"·",-1),T=m("span",{class:"--divider"},"·",-1),B={class:"--objectTitle me-4"},E={class:"--right"},j=m("span",{class:"--text"},"Main",-1),R=m("span",{class:"--text"},"SEO & Settings",-1),L=m("span",{class:"--text"},"Revision",-1),N={key:1,class:"list-button d-flex",style:{gap:"10px",margin:"10px 0px"}},_={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-auto"},O={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},M={class:"componentLayout-tabPanel h-100",style:{overflow:"auto"}},A=["src"],U={key:2,class:"relation"},P=m("p",null," Choose item to create new relationships ",-1),W={key:3},J=m("p",null," Choose item to create new relationships ",-1),F={key:0},H=m("thead",null,[m("tr",null,[m("th",{class:"text-left"},"ID"),m("th",{class:"text-left"},"Name"),m("th",{class:"text-left"},"Type"),m("th",{class:"text-left"}),m("th",{class:"text-left"})])],-1),$={key:8},q={key:13},K=m("h3",null,"Please select images",-1),G={key:14},z=m("h3",null,"Please select file PDF",-1),Q={class:"detailSidebarWrapper"},X={class:"detailSidebarBlock"},Y=m("h4",{class:"--blockTitle"},"Meta Document",-1),Z={class:"--blockContent"},ee={class:"metaDataGroup"},te={class:"--metaDataItem"},ae={class:"--metaDataItem"},ie={class:"--metaDataItem"},le={class:"--metaDataItem"},ne={class:"--metaDataItem"},se={class:"--metaDataItem"},oe={class:"--metaDataItem"},de={name:"App",components:{draggable:o},props:{nameParent:Object},data(){return{tab:null,tabRelation:null,tabLink:null,select:null,items:["Item 1","Item 2","Item 3","Item 4"],object:this.listing,page:1,itemsPerPage:25,headers:[{title:"ID",align:"start",key:"id"},{title:"User",align:"end",key:"user"},{title:"Published",align:"end",key:"published"},{title:"Date",align:"end",key:"date"}],desserts:this.data.version,listingDoc:this.data.listingDoc,listingAsset:this.data.listingAsset,listingObject:this.data.listingObject,iframeSrc:"../edit-mode/"+this.data.id+"?cms_editmode=true",dialog:!1,idCurrentDiv:"",typeCurrentDiv:"",nameRelations:"",showInput:!1,inputValue:"",showWysiwyg:!1,WysiwygValue:"",radioValue:"",showNumeric:!1,numericValue:"",minNumeric:"",maxNumeric:"",showSelect:!1,valueSelect:"",showMultiselect:!1,valueMultiselect:"",optionSelect:[],list2:this.data.listRelations,listSelect:[],targetItemIdsObject:[],relationsText:"",selectedPerpage:1,listBlock:this.data.listBlock,selectedIndex:null,listSnippet:this.data.listSnippet,snippetChoosed:this.data.snippetChoosed,listScheduled:this.data.schedulesItem,showDate:!1,dateValue:"",showTextarea:!1,textareaValue:"",textValue:"",pathValue:"",optionTarget:[{key:"_blank",value:"_blank"},{key:"_self",value:"_self"},{key:"_top",value:"_top"},{key:"_parent",value:"_parent"}],showImage:!1,listImage:"",showPDF:!1,listPDF:"",showVideo:"",optionType:[{key:"asset",value:"asset"},{key:"youtube",value:"youtube"},{key:"vimeo",value:"vimeo"},{key:"dailymotion",value:"dailymotion"}],typeValue:"",pathVideoValue:"",posterValue:"",titleVideoValue:"",descriptionValue:"",listImage:this.data.listImage,template:this.data.template,listImageBlock:"",panel:[0,1],toast:t.useToast({position:"top-right"}),dialog:!1,showInput:!1,showWysiwyg:!1,showRelation:!1,showRenderlet:!1,showRelations:!1,showBlock:!1,showSnippet:!1,showScheduled:!1,showNumeric:!1,showSelect:!1,showMultiselect:!1,showDate:!1,showTextarea:!1,showLink:!1,showImage:!1,showPDF:!1,showVideo:!1,showAreaBlock:!1,typesRelation:[],subtypesRelation:[],options:[],optionsRela:[],optionsSnippet:[],dataLink:["internalType","internal","direct","linktype","path","text","title","target","parameters","anchorLink","attributes","accessKey","rel","tabIndex","class"],pdfInfo:this.data.pdfInfo,htmlContent:"",listType:[],realNameBlock:"",dataVideos:this.data.dataVideos,datetimescheduled:"",scheduleImageBlock:"",allTypeSchedule:this.data.allTypeSchedule,valueRelation:this.data.valueRelation,dataAllItem:this.data.dataAllItem,arrTypesArea:[],realNameArea:"",listAreaBlock:this.data.listAreaBlock,nameInput:"Input",nameTextarea:"TextArea",nameWysiwyg:"Wysiwyg",nameSelect:"Select",nameMultiselect:"Multiselect",nameDate:"Date",nameNumeric:"Numeric",isLoading:!1,style:"",displayType:"",styleWindow:"",listBlockShow:[],listRelationsShow:[],listRelaShow:[],dataVideosShow:[],toggle_one:0,validRelations:[]}},methods:{save(){this.isLoading=!0;const e=new FormData;e.append("id",this.data.id);const t=this;if("link"!=t.data.type){const a=document.getElementById("myIframe").contentWindow;window.editable=a;const i=a.document;editable.editableDefinitions.forEach((function(a){if("checkbox"==a.type){let t=i.getElementById(a.id).querySelector("input");const l={name:a.name,value:!!t&&t.checked};e.append(a.type,JSON.stringify(l))}if("input"==a.type||"wysiwyg"==a.type){let t=i.getElementById(a.id);const l={name:a.name,value:t?t.innerHTML:""};e.append(a.type+"."+a.name,JSON.stringify(l))}if("relation"==a.type){let t=i.getElementById(a.id);const l={name:a.name,value:t.dataset};e.append(a.type+"."+a.name,JSON.stringify(l))}if("relations"==a.type){const i={name:a.name,value:t.list2};e.append(a.type,JSON.stringify(i))}if("numeric"==a.type){let t=i.getElementById(a.id);const l={name:a.name,value:t.innerHTML};e.append(a.type,JSON.stringify(l))}if("select"==a.type){let t=i.getElementById(a.id);const l={name:a.name,value:t.innerHTML};e.append(a.type,JSON.stringify(l))}if("block"==a.type){const i={name:a.name,value:t.listBlock};e.append(a.type,JSON.stringify(i))}if("snippet"==a.type){const i={name:a.name,value:t.snippetChoosed};e.append(a.type,JSON.stringify(i))}if("multiselect"==a.type){var l=i.getElementById(a.id).innerHTML.split(",");const t={name:a.name,value:l};e.append(a.type,JSON.stringify(t))}if("date"==a.type){let t=i.getElementById(a.id);const l={name:a.name,value:t.innerHTML};e.append(a.type+"."+a.name,JSON.stringify(l))}if("textarea"==a.type){let t=i.getElementById(a.id);const l={name:a.name,value:t.innerHTML};e.append(a.type+"."+a.name,JSON.stringify(l))}if("link"==a.type){let t=i.getElementById(a.id);const l={name:a.name,value:t.dataset};e.append(a.type,JSON.stringify(l))}if("renderlet"==a.type){let t=i.getElementById(a.id);const l={name:a.name,value:t.dataset};e.append(a.type,JSON.stringify(l))}if("image"==a.type){let t=i.getElementById(a.id);var n=t?t.getElementsByTagName("img")[0]:"";if(t){const t={name:a.name,value:n.dataset};e.append(a.type+"."+a.name,JSON.stringify(t))}}if("pdf"==a.type){let t=i.getElementById(a.id);const l={name:a.name,value:t.dataset};e.append(a.type+"."+a.name,JSON.stringify(l))}if("video"==a.type){let t=i.getElementById(a.id);const l={name:a.name,value:t.dataset};e.append(a.type+"."+a.name,JSON.stringify(l))}if("table"==a.type){let t=i.getElementById(a.id).getElementsByTagName("table")[0],l=[];if(t)for(let e=0;e<t.rows.length;e++){let a=t.rows[e],i=[];for(let e=0;e<a.cells.length;e++){let t=a.cells[e].textContent.trim();i.push(t)}l.push(i)}let n=JSON.stringify(l);const s={name:a.name,value:n};e.append(a.type,JSON.stringify(s))}if("scheduledblock"==a.type){const i={name:a.name,value:t.listScheduled};e.append(a.type,JSON.stringify(i))}}))}"link"==t.data.type&&e.append("href",t.data.href);var a="";t.data.prettyUrl||(a=t.data.title.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-").trim()),e.append("imageSeo",t.data.imageSeo),e.append("title",t.data.title),e.append("description",t.data.description),e.append("prettyUrl",a),e.append("controller",t.data.controller),e.append("template",t.data.template),e.append("enabled",t.data.staticGeneratorEnabled),e.append("lifetime",t.data.staticGeneratorLifetime),e.append("id",this.data.id),fetch(route("vuetify_doc_edit"),{method:"POST",body:e}).then((e=>{if(e.ok)return e.json();throw setTimeout((()=>{this.toast.open({message:"ERROR",type:"warning"})}),1e3),new Error("Có lỗi khi gửi yêu cầu POST.")})).then((e=>{e.warning?setTimeout((()=>{this.toast.open({message:e.warning,type:"warning"})}),1e3):e.success?(this.isLoading=!1,setTimeout((()=>{this.toast.open({message:e.success,type:"success"})}),1e3),this.$emit("update:componentLoad",(new Date).getTime()),setTimeout((()=>{location.reload()}),3e3)):e.error&&setTimeout((()=>{this.toast.open({message:e.error,type:"error"})}),1e3)})).catch((e=>{setTimeout((()=>{this.toast.open({message:"ERROR",type:"warning"})}),1e3),console.error(e)}))},handleIframeLoad(){const e=document.getElementById("myIframe").contentWindow;window.editable=e;const t=e.document,a=editable.editableDefinitions;var i=e.$;const l=this;a.forEach((function(e){i("#"+e.id).click((function(){let a=t.getElementById(e.id);if("checkbox"!=e.type&&"table"!=e.type&&(l.dialog=!0),"input"==e.type&&(l.inputValue=a.textContent,l.showInput=!0,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type,l.nameInput=e.name.charAt(0).toUpperCase()+e.name.slice(1)),"wysiwyg"==e.type&&(l.WysiwygValue=a.innerHTML,l.showWysiwyg=!0,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type,l.nameWysiwyg=e.name.charAt(0).toUpperCase()+e.name.slice(1)),"relation"==e.type){l.showRelation=!0,e.config.types,l.typesRelation=e.config.types,l.subtypesRelation=e.config.classes,l.listRelaShow=l.valueRelation[e.realName];const t=new FormData;t.append("type","manyToOneRelation"),t.append("subTypes",JSON.stringify(l.subtypesRelation));fetch("../get-list-options",{method:"POST",body:t}).then((e=>e.json())).then((e=>{l.$nextTick((()=>{l.optionsRela=e.data}))})).catch((e=>{console.log(e)})),l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type}if("numeric"==e.type&&(l.numericValue=a.textContent,l.minNumeric=e.config.minValue,l.maxNumeric=e.config.maxValue,l.showNumeric=!0,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type,l.nameNumeric=e.name.charAt(0).toUpperCase()+e.name.slice(1)),"select"==e.type){l.showSelect=!0,l.valueSelect=i("#"+e.id).text(),l.nameSelect=e.name.charAt(0).toUpperCase()+e.name.slice(1);var n=[];i.each(e.config.store,(function(e,t){var a=t[0],i=t[1];n.push({value:a,key:i})})),l.optionSelect=JSON.parse(JSON.stringify(n)),l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type}if("multiselect"==e.type){l.showMultiselect=!0,l.nameMultiselect=e.name.charAt(0).toUpperCase()+e.name.slice(1),l.valueMultiselect=a.textContent.split(",");n=[];i.each(e.config.store,(function(e,t){var a=t[0],i=t[1];n.push({value:a,key:i})})),l.optionSelect=JSON.parse(JSON.stringify(n)),l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type}if("block"==e.type){l.showBlock=!0;const t=e.config.template.editables;l.realNameBlock=e.realName;const a=t.map((({realName:e,type:t})=>({realName:e,type:t})));l.listType=a,l.listBlockShow=l.listBlock[l.realNameBlock],l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type}if("scheduledblock"==e.type){l.showScheduled=!0;var s=Object.values(l.data.assetChillList).filter((function(e){return 1===e.parentId}));l.listImageBlock=s,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type}if("snippet"==e.type){l.showSnippet=!0;const t=new FormData;t.append("type","manyToOneRelation"),t.append("subTypes",JSON.stringify("snippet"));fetch("../get-list-options",{method:"POST",body:t}).then((e=>e.json())).then((e=>{l.optionsSnippet=e.data})).catch((e=>{console.log(e)})),l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type}if("relations"==e.type){l.showRelations=!0,e.config.types,l.listRelationsShow=l.list2[e.realName],l.validRelations=[],l.listRelationsShow.forEach((function(e){const t=l.dataAllItem.find((t=>t.id===e[2]&&t.type==e[0].toLowerCase()));t&&l.validRelations.push(t)})),l.typesRelation=e.config.types,l.subtypesRelation=e.config.classes;const t=new FormData;t.append("type","manyToManyRelation"),t.append("subTypes",JSON.stringify(l.subtypesRelation));fetch("../get-list-options",{method:"POST",body:t}).then((e=>e.json())).then((e=>{l.options=e.data})).catch((e=>{console.log(e)})),l.nameRelations=e.realName,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type}if("date"==e.type&&(l.showDate=!0,l.dateValue=a.textContent,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type,l.nameDate=e.name.charAt(0).toUpperCase()+e.name.slice(1)),"textarea"==e.type&&(l.showTextarea=!0,l.textareaValue=a.textContent,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type,l.nameTextarea=e.name.charAt(0).toUpperCase()+e.name.slice(1)),"link"==e.type&&(l.showLink=!0,l.dataLink.text=a.dataset.text,l.dataLink.path=a.dataset.path,l.dataLink.target=a.dataset.target,l.dataLink.parameters=a.dataset.textparameter,l.dataLink.anchorLink=a.dataset.anchor,l.dataLink.title=a.dataset.title,l.dataLink.accessKey=a.dataset.accesskey,l.dataLink.rel=a.dataset.rel,l.dataLink.tabIndex=a.dataset.tabindex,l.dataLink.class=a.dataset.class,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type),"renderlet"==e.type&&(l.showRelation=!0,l.showRenderlet=!0,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type),"image"==e.type){l.showImage=!0;var o=Object.values(l.listingAsset).filter((function(e){return"image"===e.subtype}));l.listImage=o,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type}if("pdf"==e.type){l.showPDF=!0;var d=Object.values(l.listingAsset).filter((function(e){return"document"===e.subtype}));l.listPDF=d,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type}if("video"==e.type){l.showVideo=!0;var r=a.querySelector("source"),p=a.querySelector("video"),m=r?r.getAttribute("src"):"",u=p?p.getAttribute("poster"):"";l.dataVideosShow=l.dataVideos[e.realName],l.typeValue=l.dataVideosShow.type,l.pathVideoValue=m,l.posterValue=u,l.titleVideoValue=a.dataset.title,l.descriptionValue=a.dataset.description,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type}"areablock"==e.type&&(l.showAreaBlock=!0,l.arrTypesArea=e.config.types,l.realNameArea=e.realName,l.idCurrentDiv=e.id,l.typeCurrentDiv=e.type)}))}))},closeDialog(){this.dialog=!1,this.showInput=!1,this.showWysiwyg=!1,this.showRelation=!1,this.showRenderlet=!1,this.showRelations=!1,this.showBlock=!1,this.showSnippet=!1,this.showScheduled=!1,this.showNumeric=!1,this.showSelect=!1,this.showMultiselect=!1,this.showDate=!1,this.showTextarea=!1,this.showLink=!1,this.showImage=!1,this.showPDF=!1,this.showVideo=!1,this.showAreaBlock=!1},saveData(){const e=document.getElementById("myIframe").contentWindow;window.editable=e;const t=e.document,a=editable.editableDefinitions,i=editable.pimcore_document_id,l=this;if("input"==l.typeCurrentDiv&&(t.getElementById(l.idCurrentDiv).textContent=this.inputValue),"wysiwyg"==l.typeCurrentDiv&&(t.getElementById(l.idCurrentDiv).innerHTML=this.WysiwygValue),"relation"==l.typeCurrentDiv)if(l.listRelaShow){const e=l.dataAllItem.find((e=>e.id===l.listRelaShow[2]&&e.type==l.listRelaShow[0].toLowerCase()));t.getElementById(l.idCurrentDiv).innerHTML=e.name,t.getElementById(l.idCurrentDiv).dataset.id=l.listRelaShow[2],t.getElementById(l.idCurrentDiv).dataset.type=l.listRelaShow[0],t.getElementById(l.idCurrentDiv).dataset.subtype=l.listRelaShow[1]}else t.getElementById(l.idCurrentDiv).innerHTML="",t.getElementById(l.idCurrentDiv).dataset.id="",t.getElementById(l.idCurrentDiv).dataset.type="",t.getElementById(l.idCurrentDiv).dataset.subtype="";if("numeric"==l.typeCurrentDiv&&(t.getElementById(l.idCurrentDiv).innerHTML=this.numericValue),"select"==l.typeCurrentDiv&&(t.getElementById(l.idCurrentDiv).innerHTML=this.valueSelect),"relations"==l.typeCurrentDiv&&(l.relationsText="",l.validRelations=[],l.list2[l.nameRelations]=l.listRelationsShow,l.relationsText+='<table class="tab-relations" border="1"><tr><th>Id</th><th>Name</th><th>Type</th><th>SubType</th></tr>',l.listRelationsShow.forEach((function(e){const t=l.dataAllItem.find((t=>t.id===e[2]&&t.type==e[0].toLowerCase()));t&&(l.validRelations.push(t),l.relationsText+="<tr><td>"+t.id+"</td><td>"+t.name+"</td><td>"+t.type+"</td><td>"+t.subtype+"</td></tr>")})),t.getElementById(l.idCurrentDiv).innerHTML=l.relationsText),l.typeCurrentDiv,"snippet"==l.typeCurrentDiv){var n="Name Snippeted: null";if(l.snippetChoosed){n="Name Snippeted: "+l.dataAllItem.find((e=>e.id===l.snippetChoosed[2]&&e.type==l.snippetChoosed[0].toLowerCase())).name}t.getElementById(l.idCurrentDiv).innerHTML=n}if("multiselect"==l.typeCurrentDiv&&(t.getElementById(l.idCurrentDiv).innerHTML=this.valueMultiselect),"date"==l.typeCurrentDiv&&(t.getElementById(l.idCurrentDiv).innerHTML=this.dateValue),"textarea"==l.typeCurrentDiv&&(t.getElementById(l.idCurrentDiv).textContent=this.textareaValue),"link"==l.typeCurrentDiv&&(t.getElementById(l.idCurrentDiv).innerHTML=this.dataLink.text,t.getElementById(l.idCurrentDiv).dataset.text=this.dataLink.text,t.getElementById(l.idCurrentDiv).dataset.path=this.dataLink.path,t.getElementById(l.idCurrentDiv).dataset.target=this.dataLink.target,t.getElementById(l.idCurrentDiv).dataset.parameters=this.dataLink.parameters,t.getElementById(l.idCurrentDiv).dataset.anchor=this.dataLink.anchorLink,t.getElementById(l.idCurrentDiv).dataset.title=this.dataLink.title,t.getElementById(l.idCurrentDiv).dataset.accesskey=this.dataLink.accessKey,t.getElementById(l.idCurrentDiv).dataset.rel=this.dataLink.rel,t.getElementById(l.idCurrentDiv).dataset.tabindex=this.dataLink.tabIndex,t.getElementById(l.idCurrentDiv).dataset.class=this.dataLink.class),"renderlet"==l.typeCurrentDiv){t.getElementById(l.idCurrentDiv).dataset.id=l.radioValue.id,t.getElementById(l.idCurrentDiv).dataset.type=l.radioValue.type,t.getElementById(l.idCurrentDiv).dataset.subtype=l.radioValue.subtype;const e=a.filter((e=>e.id===l.idCurrentDiv));var s=JSON.stringify(e[0].config),o=e[0].name,d=l.radioValue.id,r=l.radioValue.type,p=l.radioValue.subtype;const n=new URLSearchParams;n.set("id",i),n.set("option",s),n.set("name",o),n.set("changeId",d),n.set("type",r),n.set("subtype",p);const m=`${"../renderlet"}?${n.toString()}`;fetch(m).then((e=>e.json())).then((e=>{t.getElementById(l.idCurrentDiv).innerHTML=e.data})).catch((e=>{console.log(e)}))}if("image"==l.typeCurrentDiv){var m=t.getElementById(l.idCurrentDiv).getElementsByTagName("img");l.radioValue&&(m[0].src=l.radioValue),m[0].dataset.src=l.radioValue}if("pdf"==l.typeCurrentDiv){var u=t.getElementById(l.idCurrentDiv);u.innerHTML=l.pdfInfo,u.dataset.src=l.pdfInfo}if("video"==l.typeCurrentDiv){var c=t.getElementById(l.idCurrentDiv);c.dataset.type=l.dataVideosShow.type,c.dataset.title=l.dataVideosShow.title,c.dataset.description=l.dataVideosShow.description,c.dataset.path=l.dataVideosShow.path,c.dataset.poster=l.dataVideosShow.poster;var y=c.querySelector("source"),h=c.querySelector("video");y&&h&&(y.src=l.pathVideoValue,h.poster=l.dataVideosShow.poster,h.load())}l.typeCurrentDiv,l.typeCurrentDiv,this.closeDialog()},navigateToFolder(){this.$inertia.post("/cms/document/listing")},navigateToFolderChill(e){this.$inertia.post("/cms/document/listing?folderId="+e.id)},preview(){var e=(new Date).getTime();this.tab="main",this.iframeSrc=this.data.path+this.data.key+"?pimcore_preview=true&time="+e+"&forceDeviceType=tablet&pimcore_override_output_timestamp=1709485200",this.displayType="preview",this.styleWindow="align-items: center; justify-content: center; display: flex;"},display(e){"desktop"==e&&(this.style="width: 100%; background: rgb(255, 255, 255); height: 211px; position: relative; border: 0px; top: initial; left: initial;"),"tablet"==e&&(this.style="width: 1024px; background: rgb(255, 255, 255); height: 208px; border: 5px solid rgb(50, 50, 50); top: 0px;"),"phone"==e&&(this.style="width: 375px; background: rgb(255, 255, 255); height: 208px; border: 5px solid rgb(50, 50, 50); top: 0px; left: 200px;"),"phoneRotate"==e&&(this.style="width: 667px; background: rgb(255, 255, 255); height: 208px; border: 5px solid rgb(50, 50, 50); top: 0px; left: 120px;")},openInNew(){var e=(new Date).getTime(),t="/"+this.data.title+"?pimcore_preview=true&_dc="+e;this.data.prettyUrl&&(t=this.data.prettyUrl),1==this.data.id&&(t="/?pimcore_preview=true&_dc="+e),window.open(t,"_blank")},editMode(){this.iframeSrc="../edit-mode/"+this.data.id+"?cms_editmode=true",this.displayType="",this.styleWindow="",this.tab="main",this.style="width: 100%; background: rgb(255, 255, 255); height: 211px; position: relative; border: 0px; top: initial; left: initial;"},arrowUpClicked(e,t){if(e>0){const a=this.list2[t][e];this.list2[t].splice(e,1),this.list2[t].splice(e-1,0,a)}},arrowDownClicked(e,t){if(e<this.list2[t].length-1){const a=this.list2[t][e];this.list2[t].splice(e,1),this.list2[t].splice(e+1,0,a)}}}},re=Object.assign(de,{layout:e},{props:{data:[Object,Array],nameParent:Object,flash:Object,sidebar:[Object,Array]},setup:e=>(t,o)=>{const de=d("v-icon"),re=d("v-breadcrumbs-item"),pe=d("v-breadcrumbs"),me=d("v-btn"),ue=d("v-btn-toggle"),ce=d("v-tab"),ye=d("v-tabs"),he=d("v-toolbar"),ge=d("Input"),ve=d("Wysiwyg"),fe=d("ManyToOneRelation"),we=d("ManyToManyRelation"),ke=d("v-table"),be=d("Numeric"),Ve=d("Select"),Ce=d("Multiselect"),De=d("Date"),Se=d("Textarea"),Ie=d("Link"),xe=d("Images"),Te=d("v-card-text"),Be=d("v-spacer"),Ee=d("v-card-actions"),je=d("v-card"),Re=d("v-dialog"),Le=d("v-window-item"),Ne=d("v-expansion-panel-title"),_e=d("v-expansion-panel-text"),Oe=d("v-expansion-panel"),Me=d("v-expansion-panels"),Ae=d("v-data-table"),Ue=d("v-window");return r(),p("div",b,[m("div",V,[m("div",C,[m("div",D,[u(de,{icon:"mdi-file-document-outline",class:"--objectIcon me-3"}),m("div",S,[u(pe,{class:"breadcrumbWrapper pa-0"},{default:c((()=>[u(re,{class:"--itemBreadcrumb",disabled:!e.nameParent,onClick:t.navigateToFolder,title:"Home"},{default:c((()=>[I])),_:1},8,["disabled","onClick"]),x,(r(!0),p(y,null,h(e.nameParent,((e,a)=>(r(),p(y,{key:a},[e?(r(),g(re,{key:0,onClick:a=>t.navigateToFolderChill(e),class:"--itemBreadcrumb",disabled:e.end},{default:c((()=>[m("span",null,v(e.name),1)])),_:2},1032,["onClick","disabled"])):f("",!0),T],64)))),128))])),_:1}),m("h3",B,v(e.data.key),1)])]),m("div",E,[u(ue,{mandatory:"",shaped:"",modelValue:t.toggle_one,"onUpdate:modelValue":o[2]||(o[2]=e=>t.toggle_one=e),style:{height:"36px","box-shadow":"rgba(33, 43, 54, 0.2) 0px 8px 16px 0px"},class:"btn-primary me-2"},{default:c((()=>["page"==e.data.type?(r(),g(me,{key:0,class:"btn-primary",variant:"elevated","prepend-icon":"mdi-pencil-outline",onClick:o[0]||(o[0]=e=>t.editMode())},{default:c((()=>[w(" Edit ")])),_:1})):f("",!0),"page"==e.data.type?(r(),g(me,{key:1,class:"btn-primary",variant:"elevated","prepend-icon":"mdi-presentation-play",onClick:o[1]||(o[1]=e=>t.preview())},{default:c((()=>[w(" Live Preview ")])),_:1})):f("",!0)])),_:1},8,["modelValue"]),u(me,{class:"btn-primary me-2",variant:"elevated",onClick:o[3]||(o[3]=e=>t.save())},{default:c((()=>[t.isLoading?(r(),g(de,{key:0,class:"v-btn__prepend"},{default:c((()=>[w("mdi-loading mdi-spin")])),_:1})):f("",!0),t.isLoading?f("",!0):(r(),g(de,{key:1,class:"v-btn__prepend"},{default:c((()=>[w("mdi-content-save")])),_:1})),w(" "+v(t.isLoading?"Saving...":"Save and Publish"),1)])),_:1})])]),"preview"!=t.displayType?(r(),g(ye,{key:0,modelValue:t.tab,"onUpdate:modelValue":o[4]||(o[4]=e=>t.tab=e),class:"mainTabPanel"},{default:c((()=>[u(ce,{value:"main"},{default:c((()=>[j])),_:1}),"link"!=e.data.type?(r(),g(ce,{key:0,value:"seo"},{default:c((()=>[R])),_:1})):f("",!0),"link"!=e.data.type?(r(),g(ce,{key:1,value:"revision"},{default:c((()=>[L])),_:1})):f("",!0)])),_:1},8,["modelValue"])):f("",!0),"preview"==t.displayType?(r(),p("div",N,[u(me,{"prepend-icon":"mdi-monitor",onClick:o[5]||(o[5]=e=>t.display("desktop"))},{default:c((()=>[w(" Desktop ")])),_:1}),u(me,{"prepend-icon":"mdi-tablet",onClick:o[6]||(o[6]=e=>t.display("tablet"))},{default:c((()=>[w(" Tablet ")])),_:1}),u(me,{"prepend-icon":"mdi-cellphone",onClick:o[7]||(o[7]=e=>t.display("phone"))},{default:c((()=>[w(" Phone ")])),_:1}),u(me,{"prepend-icon":"mdi-phone-rotate-landscape",onClick:o[8]||(o[8]=e=>t.display("phoneRotate"))},{default:c((()=>[w(" Phone ")])),_:1}),u(me,{"prepend-icon":"mdi-open-in-new",onClick:o[9]||(o[9]=e=>t.openInNew())},{default:c((()=>[w(" Open in new Window ")])),_:1})])):f("",!0)]),m("div",_,[m("div",O,[m("div",M,[u(Ue,{modelValue:t.tab,"onUpdate:modelValue":o[34]||(o[34]=e=>t.tab=e),class:"h-100"},{default:c((()=>[u(Le,{value:"main",class:"documentEditorWrapper h-100",style:k(t.styleWindow)},{default:c((()=>["link"!=e.data.type?(r(),p("iframe",{key:0,id:"myIframe",class:"h-100",src:t.iframeSrc,onLoad:o[10]||(o[10]=(...e)=>t.handleIframeLoad&&t.handleIframeLoad(...e)),style:k(t.style)},null,44,A)):f("",!0),"link"==e.data.type?(r(),g(a,{key:1,modelValue:e.data.href,"onUpdate:modelValue":o[11]||(o[11]=t=>e.data.href=t),disabled:!1},null,8,["modelValue"])):f("",!0),"link"!=e.data.type?(r(),g(Re,{key:2,modelValue:t.dialog,"onUpdate:modelValue":o[26]||(o[26]=e=>t.dialog=e),activator:"parent","onClick:outside":t.closeDialog,width:"50%"},{default:c((()=>[u(je,null,{default:c((()=>[t.showInput?(r(),g(he,{key:0,density:"compact",title:"Edit Text"})):f("",!0),t.showWysiwyg?(r(),g(he,{key:1,density:"compact",title:"Edit Wysiwyg"})):f("",!0),t.showRelation&&!t.showRenderlet?(r(),g(he,{key:2,density:"compact",title:"Edit Relation"})):f("",!0),t.showRenderlet?(r(),g(he,{key:3,density:"compact",title:"Edit Renderlet"})):f("",!0),t.showRelations?(r(),g(he,{key:4,density:"compact",title:"Edit Relations"})):f("",!0),t.showNumeric?(r(),g(he,{key:5,density:"compact",title:"Edit Numeric"})):f("",!0),t.showSelect?(r(),g(he,{key:6,density:"compact",title:"Edit Select"})):f("",!0),t.showMultiselect?(r(),g(he,{key:7,density:"compact",title:"Edit Multiselect"})):f("",!0),t.showBlock?(r(),g(he,{key:8,density:"compact",title:"Edit Block"})):f("",!0),t.showSnippet?(r(),g(he,{key:9,density:"compact",title:"Edit Snippet"})):f("",!0),t.showScheduled?(r(),g(he,{key:10,density:"compact",title:"Edit Scheduled"})):f("",!0),t.showDate?(r(),g(he,{key:11,density:"compact",title:"Edit Date"})):f("",!0),t.showTextarea?(r(),g(he,{key:12,density:"compact",title:"Edit TextArea"})):f("",!0),t.showLink?(r(),g(he,{key:13,density:"compact",title:"Edit Link"})):f("",!0),t.showImage?(r(),g(he,{key:14,density:"compact",title:"Edit Image"})):f("",!0),t.showPDF?(r(),g(he,{key:15,density:"compact",title:"Edit PDF"})):f("",!0),t.showVideo?(r(),g(he,{key:16,density:"compact",title:"Edit Video"})):f("",!0),t.showAreaBlock?(r(),g(he,{key:17,density:"compact",title:"Edit Area Block"})):f("",!0),u(Te,null,{default:c((()=>[t.showInput?(r(),g(ge,{key:0,class:"input",label:t.nameInput,modelValue:t.inputValue,"onUpdate:modelValue":o[12]||(o[12]=e=>t.inputValue=e)},null,8,["label","modelValue"])):f("",!0),t.showWysiwyg?(r(),g(ve,{key:1,modelValue:t.WysiwygValue,"onUpdate:modelValue":o[13]||(o[13]=e=>t.WysiwygValue=e),label:t.nameWysiwyg},null,8,["modelValue","label"])):f("",!0),t.showRelation?(r(),p("div",U,[P,u(fe,{items:t.optionsRela,modelValue:t.listRelaShow,"onUpdate:modelValue":o[14]||(o[14]=e=>t.listRelaShow=e),chips:!0,disabled:!1},null,8,["items","modelValue"])])):f("",!0),t.showRelations?(r(),p("div",W,[J,u(we,{items:t.options,modelValue:t.listRelationsShow,"onUpdate:modelValue":o[15]||(o[15]=e=>t.listRelationsShow=e),chips:!0,disabled:!1},null,8,["items","modelValue"]),t.listRelationsShow&&0!==t.listRelationsShow.length?(r(),p("div",F,[u(ke,null,{default:c((()=>[H,m("tbody",null,[w(v(t.nameRelations)+" ",1),(r(!0),p(y,null,h(t.validRelations,((e,a)=>(r(),p("tr",{key:e.id},[m("td",null,v(e.id),1),m("td",null,v(e.name),1),m("td",null,v(e.subtype),1),m("td",null,[u(de,{onClick:e=>t.arrowUpClicked(a,t.nameRelations)},{default:c((()=>[w("mdi-arrow-up")])),_:2},1032,["onClick"])]),m("td",null,[u(de,{onClick:e=>t.arrowDownClicked(a,t.nameRelations)},{default:c((()=>[w("mdi-arrow-down")])),_:2},1032,["onClick"])])])))),128))])])),_:1})])):f("",!0)])):f("",!0),t.showNumeric?(r(),g(be,{key:4,min:t.minNumeric,max:t.maxNumeric,label:t.nameNumeric,modelValue:t.numericValue,"onUpdate:modelValue":o[16]||(o[16]=e=>t.numericValue=e)},null,8,["min","max","label","modelValue"])):f("",!0),t.showSelect?(r(),g(Ve,{key:5,label:t.nameSelect,items:t.optionSelect,modelValue:t.valueSelect,"onUpdate:modelValue":o[17]||(o[17]=e=>t.valueSelect=e)},null,8,["label","items","modelValue"])):f("",!0),t.showMultiselect?(r(),g(Ce,{key:6,items:t.optionSelect,modelValue:t.valueMultiselect,"onUpdate:modelValue":o[18]||(o[18]=e=>t.valueMultiselect=e),label:t.nameMultiselect},null,8,["items","modelValue","label"])):f("",!0),t.showBlock?(r(),g(i,{key:7,listType:t.listType,listBlock:t.listBlockShow,realNameBlock:t.realNameBlock},null,8,["listType","listBlock","realNameBlock"])):f("",!0),t.showSnippet?(r(),p("div",$,[u(fe,{items:t.optionsSnippet,modelValue:t.snippetChoosed,"onUpdate:modelValue":o[19]||(o[19]=e=>t.snippetChoosed=e),label:"Snippet",chips:!0,disabled:!1},null,8,["items","modelValue"])])):f("",!0),t.showScheduled?(r(),g(n,{key:9,name:"Scheduled",listScheduled:t.listScheduled,type:t.allTypeSchedule,disabled:!1},null,8,["listScheduled","type"])):f("",!0),t.showDate?(r(),g(De,{key:10,modelValue:t.dateValue,"onUpdate:modelValue":o[20]||(o[20]=e=>t.dateValue=e),label:t.nameDate},null,8,["modelValue","label"])):f("",!0),t.showTextarea?(r(),g(Se,{key:11,modelValue:t.textareaValue,"onUpdate:modelValue":o[21]||(o[21]=e=>t.textareaValue=e),label:"TextArea"},null,8,["modelValue"])):f("",!0),t.showLink?(r(),g(Ie,{key:12,label:"Edit Link",modelValue:t.dataLink,"onUpdate:modelValue":o[22]||(o[22]=e=>t.dataLink=e)},null,8,["modelValue"])):f("",!0),t.showImage?(r(),p("div",q,[K,u(xe,{name:"image",label:"Image",modelValue:t.radioValue,"onUpdate:modelValue":o[23]||(o[23]=e=>t.radioValue=e),disabled:!1,checkbox:"1",class:"mt-2"},null,8,["modelValue"])])):f("",!0),t.showPDF?(r(),p("div",G,[z,u(xe,{name:"pdf",label:"Pdf",modelValue:t.pdfInfo,"onUpdate:modelValue":o[24]||(o[24]=e=>t.pdfInfo=e),disabled:!1,checkbox:"1",class:"mt-2",type:"document"},null,8,["modelValue"])])):f("",!0),t.showVideo?(r(),g(l,{key:15,items:t.optionType,type:t.typeValue,name:"Video",modelValue:t.dataVideosShow,"onUpdate:modelValue":o[25]||(o[25]=e=>t.dataVideosShow=e),label:"Video",disabled:!1},null,8,["items","type","modelValue"])):f("",!0),t.showAreaBlock?(r(),g(s,{key:16,arrTypesArea:t.arrTypesArea,arrField:t.listAreaBlock,realNameArea:t.realNameArea},null,8,["arrTypesArea","arrField","realNameArea"])):f("",!0)])),_:1}),u(Ee,{class:"pa-3"},{default:c((()=>[u(Be),u(me,{color:"primary",onClick:t.saveData},{default:c((()=>[w("OK")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])):f("",!0)])),_:1},8,["style"]),u(Le,{value:"seo",class:"seo-setting"},{default:c((()=>[u(Me,{modelValue:t.panel,"onUpdate:modelValue":o[32]||(o[32]=e=>t.panel=e),multiple:""},{default:c((()=>["page"==e.data.type?(r(),g(Oe,{key:0},{default:c((()=>[u(Ne,{"expand-icon":"mdi-plus","collapse-icon":"mdi-minus"},{default:c((()=>[w(" Title & Description & Image ")])),_:1}),u(_e,null,{default:c((()=>[u(xe,{name:"image",label:"Image",modelValue:e.data.imageSeo,"onUpdate:modelValue":o[27]||(o[27]=t=>e.data.imageSeo=t),disabled:!1,checkbox:"1",class:"mt-2"},null,8,["modelValue"]),u(ge,{label:"Title",modelValue:e.data.title,"onUpdate:modelValue":o[28]||(o[28]=t=>e.data.title=t)},null,8,["modelValue"]),u(Se,{label:"Description:",modelValue:e.data.description,"onUpdate:modelValue":o[29]||(o[29]=t=>e.data.description=t)},null,8,["modelValue"])])),_:1})])),_:1})):f("",!0),u(Oe,null,{default:c((()=>[u(Ne,{"expand-icon":"mdi-plus","collapse-icon":"mdi-minus"},{default:c((()=>[w(" Controller, Action & Template ")])),_:1}),u(_e,null,{default:c((()=>[u(ge,{label:"Predefined Document Type:"}),u(ge,{label:"Controller:",modelValue:e.data.controller,"onUpdate:modelValue":o[30]||(o[30]=t=>e.data.controller=t)},null,8,["modelValue"]),u(ge,{label:"Template:",modelValue:e.data.template,"onUpdate:modelValue":o[31]||(o[31]=t=>e.data.template=t)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),u(Le,{value:"revision"},{default:c((()=>[u(Ae,{page:t.page,"onUpdate:page":o[33]||(o[33]=e=>t.page=e),headers:t.headers,items:t.desserts,"items-per-page":t.itemsPerPage,class:"elevation-1"},null,8,["page","headers","items","items-per-page"])])),_:1})])),_:1},8,["modelValue"])])]),m("div",Q,[m("div",X,[Y,m("div",Z,[m("div",ee,[m("div",te,[m("small",null,v(t.$t("ID")),1),m("p",null,v(e.sidebar.id),1)]),m("div",ae,[m("small",null,v(t.$t("Key")),1),m("p",null,v(e.sidebar.key),1)]),m("div",ie,[m("small",null,v(t.$t("Full Path")),1),m("p",null,v(e.sidebar.fullPath),1)]),m("div",le,[m("small",null,v(t.$t("Created date")),1),m("p",null,v(e.sidebar.creationDate),1)]),m("div",ne,[m("small",null,v(t.$t("Modification date")),1),m("p",null,v(e.sidebar.modificationDate),1)]),m("div",se,[m("small",null,v(t.$t("User Owner")),1),m("p",null,v(e.sidebar.userOwner),1)]),m("div",oe,[m("small",null,v(t.$t("User modification")),1),m("p",null,v(e.sidebar.userModification),1)])])])])])])])}});export{re as default};
