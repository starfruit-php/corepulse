import e from"./Layout-e382ae58.js";import{r as t,o as a,h as l,f as i,a as n,w as s,F as d,l as o,c as r,t as p,i as u,d as m,n as c,V as y,k as h}from"./app-06874ede.js";import g from"./ModalViewPath-1d7c2f98.js";import v from"./ModalBlockEditable-0120dd49.js";import f from"./ModalVideo-9990f4ad.js";import w from"./ModalScheduled-677f970e.js";import k from"./ModalAreaBlock-dc48dd95.js";import"./ModalFeaturette-38ca4220.js";const b={class:"mainAppWrapper d-flex flex-column"},V={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},C={class:"d-flex justify-space-between align-center"},D={class:"--left d-flex align-center"},S={class:"d-flex flex-column me-4"},I=i("span",null,"Home",-1),x=i("span",{class:"--divider"},"·",-1),T=i("span",{class:"--divider"},"·",-1),B={class:"--objectTitle me-4"},E={class:"--right"},L=i("span",{class:"--text"},"Main",-1),R=i("span",{class:"--text"},"SEO & Settings",-1),_=i("span",{class:"--text"},"Revision",-1),N={key:1,class:"list-button d-flex",style:{gap:"10px",margin:"10px 0px"}},O={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-auto"},M={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},U={class:"componentLayout-tabPanel h-100"},A=["src"],P={key:2,class:"relation"},W=i("p",null," Choose item to create new relationships ",-1),j={key:3},J=i("p",null," Choose item to create new relationships ",-1),F={key:0},H=i("thead",null,[i("tr",null,[i("th",{class:"text-left"},"ID"),i("th",{class:"text-left"},"Type"),i("th",{class:"text-left"},"SubType"),i("th",{class:"text-left"}),i("th",{class:"text-left"})])],-1),$={key:8},G={key:13},K=i("h3",null,"Please select images",-1),q={key:14},z=i("h3",null,"Please select file PDF",-1),Q={class:"detailSidebarWrapper"},X={class:"detailSidebarBlock"},Y=i("h4",{class:"--blockTitle"},"Meta Data",-1),Z={class:"--blockContent"},ee={class:"metaDataGroup"},te={class:"--metaDataItem"},ae={class:"--metaDataItem"},le={class:"--metaDataItem"},ie={class:"--metaDataItem"},ne={class:"--metaDataItem"},se={class:"--metaDataItem"},de={class:"--metaDataItem"},oe={name:"App",components:{draggable:y},props:{nameParent:Object},data(){return{tab:null,tabRelation:null,tabLink:null,select:null,items:["Item 1","Item 2","Item 3","Item 4"],object:this.listing,page:1,itemsPerPage:25,headers:[{title:"ID",align:"start",key:"id"},{title:"User",align:"end",key:"user"},{title:"Published",align:"end",key:"published"},{title:"Date",align:"end",key:"date"}],desserts:this.data.version,listingDoc:this.data.listingDoc,listingAsset:this.data.listingAsset,listingObject:this.data.listingObject,iframeSrc:"../edit-mode/"+this.data.id+"?cms_editmode=true",dialog:!1,idCurrentDiv:"",typeCurrentDiv:"",nameRelations:"",showInput:!1,inputValue:"",showWysiwyg:!1,WysiwygValue:"",radioValue:"",showNumeric:!1,numericValue:"",minNumeric:"",maxNumeric:"",showSelect:!1,valueSelect:"",showMultiselect:!1,valueMultiselect:"",optionSelect:[],list2:this.data.listRelations,listSelect:[],targetItemIdsObject:[],relationsText:"",selectedPerpage:1,listBlock:this.data.listBlock,selectedIndex:null,listSnippet:this.data.listSnippet,snippetChoosed:this.data.snippetChoosed,listScheduled:this.data.schedulesItem,showDate:!1,dateValue:"",showTextarea:!1,textareaValue:"",textValue:"",pathValue:"",optionTarget:[{key:"_blank",value:"_blank"},{key:"_self",value:"_self"},{key:"_top",value:"_top"},{key:"_parent",value:"_parent"}],showImage:!1,listImage:"",showPDF:!1,listPDF:"",showVideo:"",optionType:[{key:"asset",value:"asset"},{key:"youtube",value:"youtube"},{key:"vimeo",value:"vimeo"},{key:"dailymotion",value:"dailymotion"}],typeValue:"",pathVideoValue:"",posterValue:"",titleVideoValue:"",descriptionValue:"",listImage:this.data.listImage,template:this.data.template,listImageBlock:"",panel:[0,1],toast:h.useToast({position:"top-right"}),dialog:!1,showInput:!1,showWysiwyg:!1,showRelation:!1,showRenderlet:!1,showRelations:!1,showBlock:!1,showSnippet:!1,showScheduled:!1,showNumeric:!1,showSelect:!1,showMultiselect:!1,showDate:!1,showTextarea:!1,showLink:!1,showImage:!1,showPDF:!1,showVideo:!1,showAreaBlock:!1,typesRelation:[],subtypesRelation:[],options:[],optionsRela:[],optionsSnippet:[],dataLink:["internalType","internal","direct","linktype","path","text","title","target","parameters","anchorLink","attributes","accessKey","rel","tabIndex","class"],pdfInfo:this.data.pdfInfo,htmlContent:"",listType:[],realNameBlock:"",dataVideos:this.data.dataVideos,datetimescheduled:"",scheduleImageBlock:"",allTypeSchedule:this.data.allTypeSchedule,valueRelation:this.data.valueRelation,dataAllItem:this.data.dataAllItem,arrTypesArea:[],realNameArea:"",listAreaBlock:this.data.listAreaBlock,nameInput:"Input",nameTextarea:"TextArea",nameWysiwyg:"Wysiwyg",nameSelect:"Select",nameMultiselect:"Multiselect",nameDate:"Date",nameNumeric:"Numeric",isLoading:!1,style:"",displayType:"",styleWindow:"",listBlockShow:[],listRelationsShow:[],listRelaShow:[],dataVideosShow:[]}},methods:{save(){this.isLoading=!0;const e=new FormData;e.append("id",this.data.id);const t=this;if("link"!=t.data.type){const a=document.getElementById("myIframe").contentWindow;window.editable=a;const l=a.document;editable.editableDefinitions.forEach((function(a){if("checkbox"==a.type){let t=l.getElementById(a.id).querySelector("input");const i={name:a.name,value:!!t&&t.checked};e.append(a.type,JSON.stringify(i))}if("input"==a.type||"wysiwyg"==a.type){let t=l.getElementById(a.id);const i={name:a.name,value:t?t.innerHTML:""};e.append(a.type+"."+a.name,JSON.stringify(i))}if("relation"==a.type){let t=l.getElementById(a.id);const i={name:a.name,value:t.dataset};e.append(a.type+"."+a.name,JSON.stringify(i))}if("relations"==a.type){console.log(t.list2);const l={name:a.name,value:t.list2};e.append(a.type,JSON.stringify(l))}if("numeric"==a.type){let t=l.getElementById(a.id);const i={name:a.name,value:t.innerHTML};e.append(a.type,JSON.stringify(i))}if("select"==a.type){let t=l.getElementById(a.id);const i={name:a.name,value:t.innerHTML};e.append(a.type,JSON.stringify(i))}if("block"==a.type){const l={name:a.name,value:t.listBlock};e.append(a.type,JSON.stringify(l))}if("snippet"==a.type){const l={name:a.name,value:t.snippetChoosed};e.append(a.type,JSON.stringify(l))}if("multiselect"==a.type){var i=l.getElementById(a.id).innerHTML.split(",");const t={name:a.name,value:i};e.append(a.type,JSON.stringify(t))}if("date"==a.type){let t=l.getElementById(a.id);const i={name:a.name,value:t.innerHTML};e.append(a.type,JSON.stringify(i))}if("textarea"==a.type){let t=l.getElementById(a.id);const i={name:a.name,value:t.innerHTML};e.append(a.type+"."+a.name,JSON.stringify(i))}if("link"==a.type){let t=l.getElementById(a.id);const i={name:a.name,value:t.dataset};e.append(a.type,JSON.stringify(i))}if("renderlet"==a.type){let t=l.getElementById(a.id);const i={name:a.name,value:t.dataset};e.append(a.type,JSON.stringify(i))}if("image"==a.type){let t=l.getElementById(a.id);var n=t?t.getElementsByTagName("img")[0]:"";if(t){const t={name:a.name,value:n.dataset};e.append(a.type+"."+a.name,JSON.stringify(t))}}if("pdf"==a.type){let t=l.getElementById(a.id);const i={name:a.name,value:t.dataset};e.append(a.type+"."+a.name,JSON.stringify(i))}if("video"==a.type){let t=l.getElementById(a.id);const i={name:a.name,value:t.dataset};e.append(a.type+"."+a.name,JSON.stringify(i))}if("table"==a.type){let t=l.getElementById(a.id).getElementsByTagName("table")[0],i=[];if(t)for(let e=0;e<t.rows.length;e++){let a=t.rows[e],l=[];for(let e=0;e<a.cells.length;e++){let t=a.cells[e].textContent.trim();l.push(t)}i.push(l)}let n=JSON.stringify(i);const s={name:a.name,value:n};e.append(a.type,JSON.stringify(s))}if("scheduledblock"==a.type){const l={name:a.name,value:t.listScheduled};e.append(a.type,JSON.stringify(l))}}))}"link"==t.data.type&&e.append("href",t.data.href);var a="";t.data.prettyUrl||(a=t.data.title.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-").trim()),e.append("title",t.data.title),e.append("description",t.data.description),e.append("prettyUrl",a),e.append("controller",t.data.controller),e.append("template",t.data.template),e.append("enabled",t.data.staticGeneratorEnabled),e.append("lifetime",t.data.staticGeneratorLifetime),e.append("id",this.data.id),fetch(route("vuetify_doc_edit"),{method:"POST",body:e}).then((e=>{if(e.ok)return e.json();throw setTimeout((()=>{this.toast.open({message:"ERROR",type:"warning"})}),1e3),new Error("Có lỗi khi gửi yêu cầu POST.")})).then((e=>{e.warning?setTimeout((()=>{this.toast.open({message:e.warning,type:"warning"})}),1e3):e.success?(this.isLoading=!1,setTimeout((()=>{this.toast.open({message:e.success,type:"success"})}),1e3),this.$emit("update:componentLoad",(new Date).getTime()),location.reload()):e.error&&setTimeout((()=>{this.toast.open({message:e.error,type:"error"})}),1e3)})).catch((e=>{setTimeout((()=>{this.toast.open({message:"ERROR",type:"warning"})}),1e3),console.error(e)}))},handleIframeLoad(){const e=document.getElementById("myIframe").contentWindow;window.editable=e;const t=e.document,a=editable.editableDefinitions;var l=e.$;const i=this;a.forEach((function(e){l("#"+e.id).click((function(){let a=t.getElementById(e.id);if("checkbox"!=e.type&&"table"!=e.type&&(i.dialog=!0),"input"==e.type&&(i.inputValue=a.textContent,i.showInput=!0,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type,i.nameInput=e.name.charAt(0).toUpperCase()+e.name.slice(1)),"wysiwyg"==e.type&&(i.WysiwygValue=a.innerHTML,i.showWysiwyg=!0,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type,i.nameWysiwyg=e.name.charAt(0).toUpperCase()+e.name.slice(1)),"relation"==e.type){i.showRelation=!0,console.log(i),e.config.types,i.typesRelation=e.config.types,i.subtypesRelation=e.config.classes,i.listRelaShow=i.valueRelation[e.realName];const t=new FormData;t.append("type","manyToOneRelation"),t.append("subTypes",JSON.stringify(i.subtypesRelation));fetch("../get-list-options",{method:"POST",body:t}).then((e=>e.json())).then((e=>{i.$nextTick((()=>{i.optionsRela=e.data}))})).catch((e=>{console.log(e)})),i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type}if("numeric"==e.type&&(i.numericValue=a.textContent,i.minNumeric=e.config.minValue,i.maxNumeric=e.config.maxValue,i.showNumeric=!0,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type,i.nameNumeric=e.name.charAt(0).toUpperCase()+e.name.slice(1)),"select"==e.type){i.showSelect=!0,i.valueSelect=l("#"+e.id).text(),i.nameSelect=e.name.charAt(0).toUpperCase()+e.name.slice(1);var n=[];l.each(e.config.store,(function(e,t){var a=t[0],l=t[1];n.push({value:a,key:l})})),i.optionSelect=JSON.parse(JSON.stringify(n)),i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type}if("multiselect"==e.type){i.showMultiselect=!0,i.nameMultiselect=e.name.charAt(0).toUpperCase()+e.name.slice(1),i.valueMultiselect=a.textContent.split(",");n=[];l.each(e.config.store,(function(e,t){var a=t[0],l=t[1];n.push({value:a,key:l})})),i.optionSelect=JSON.parse(JSON.stringify(n)),i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type}if("block"==e.type){i.showBlock=!0;const t=e.config.template.editables;i.realNameBlock=e.realName,console.log(e);const a=t.map((({realName:e,type:t})=>({realName:e,type:t})));i.listType=a,i.listBlockShow=i.listBlock[i.realNameBlock],i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type}if("scheduledblock"==e.type){i.showScheduled=!0;var s=Object.values(i.data.assetChillList).filter((function(e){return 1===e.parentId}));i.listImageBlock=s,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type}if("snippet"==e.type){i.showSnippet=!0;const t=new FormData;t.append("type","manyToOneRelation"),t.append("subTypes",JSON.stringify("snippet"));fetch("../get-list-options",{method:"POST",body:t}).then((e=>e.json())).then((e=>{i.optionsSnippet=e.data})).catch((e=>{console.log(e)})),i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type}if("relations"==e.type){i.showRelations=!0,e.config.types,i.listRelationsShow=i.list2[e.realName],i.typesRelation=e.config.types,i.subtypesRelation=e.config.classes;const t=new FormData;t.append("type","manyToManyRelation"),t.append("subTypes",JSON.stringify(i.subtypesRelation));fetch("../get-list-options",{method:"POST",body:t}).then((e=>e.json())).then((e=>{i.options=e.data})).catch((e=>{console.log(e)})),i.nameRelations=e.realName,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type}if("date"==e.type&&(i.showDate=!0,i.dateValue=a.textContent,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type,i.nameDate=e.name.charAt(0).toUpperCase()+e.name.slice(1)),"textarea"==e.type&&(i.showTextarea=!0,i.textareaValue=a.textContent,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type,i.nameTextarea=e.name.charAt(0).toUpperCase()+e.name.slice(1)),"link"==e.type&&(i.showLink=!0,i.dataLink.text=a.dataset.text,i.dataLink.path=a.dataset.path,i.dataLink.target=a.dataset.target,i.dataLink.parameters=a.dataset.textparameter,i.dataLink.anchorLink=a.dataset.anchor,i.dataLink.title=a.dataset.title,i.dataLink.accessKey=a.dataset.accesskey,i.dataLink.rel=a.dataset.rel,i.dataLink.tabIndex=a.dataset.tabindex,i.dataLink.class=a.dataset.class,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type),"renderlet"==e.type&&(i.showRelation=!0,i.showRenderlet=!0,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type),"image"==e.type){i.showImage=!0;var d=Object.values(i.listingAsset).filter((function(e){return"image"===e.subtype}));i.listImage=d,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type}if("pdf"==e.type){i.showPDF=!0;var o=Object.values(i.listingAsset).filter((function(e){return"document"===e.subtype}));i.listPDF=o,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type}if("video"==e.type){i.showVideo=!0;var r=a.querySelector("source"),p=a.querySelector("video"),u=r?r.getAttribute("src"):"",m=p?p.getAttribute("poster"):"";i.dataVideosShow=i.dataVideos[e.realName],i.typeValue=i.dataVideosShow.type,i.pathVideoValue=u,i.posterValue=m,i.titleVideoValue=a.dataset.title,i.descriptionValue=a.dataset.description,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type}"areablock"==e.type&&(i.showAreaBlock=!0,i.arrTypesArea=e.config.types,i.realNameArea=e.realName,i.idCurrentDiv=e.id,i.typeCurrentDiv=e.type)}))}))},closeDialog(){this.dialog=!1,this.showInput=!1,this.showWysiwyg=!1,this.showRelation=!1,this.showRenderlet=!1,this.showRelations=!1,this.showBlock=!1,this.showSnippet=!1,this.showScheduled=!1,this.showNumeric=!1,this.showSelect=!1,this.showMultiselect=!1,this.showDate=!1,this.showTextarea=!1,this.showLink=!1,this.showImage=!1,this.showPDF=!1,this.showVideo=!1,this.showAreaBlock=!1},saveData(){const e=document.getElementById("myIframe").contentWindow;window.editable=e;const t=e.document,a=editable.editableDefinitions,l=editable.pimcore_document_id,i=this;if("input"==i.typeCurrentDiv&&(t.getElementById(i.idCurrentDiv).textContent=this.inputValue),"wysiwyg"==i.typeCurrentDiv&&(t.getElementById(i.idCurrentDiv).innerHTML=this.WysiwygValue),"relation"==i.typeCurrentDiv)if(i.listRelaShow){const e=i.dataAllItem.find((e=>e.id===i.listRelaShow[2]&&e.type==i.listRelaShow[0].toLowerCase()));t.getElementById(i.idCurrentDiv).innerHTML=e.name,t.getElementById(i.idCurrentDiv).dataset.id=i.listRelaShow[2],t.getElementById(i.idCurrentDiv).dataset.type=i.listRelaShow[0],t.getElementById(i.idCurrentDiv).dataset.subtype=i.listRelaShow[1]}else t.getElementById(i.idCurrentDiv).innerHTML="",t.getElementById(i.idCurrentDiv).dataset.id="",t.getElementById(i.idCurrentDiv).dataset.type="",t.getElementById(i.idCurrentDiv).dataset.subtype="";if("numeric"==i.typeCurrentDiv&&(t.getElementById(i.idCurrentDiv).innerHTML=this.numericValue),"select"==i.typeCurrentDiv&&(t.getElementById(i.idCurrentDiv).innerHTML=this.valueSelect),"relations"==i.typeCurrentDiv&&(i.relationsText="",i.list2[i.nameRelations]=i.listRelationsShow,console.log(i.list2[i.nameRelations]),i.relationsText+='<table class="tab-relations" border="1"><tr><th>Id</th><th>Name</th><th>Type</th><th>SubType</th></tr>',i.listRelationsShow.forEach((function(e){const t=i.dataAllItem.find((t=>t.id===e[2]&&t.type==e[0].toLowerCase()));i.relationsText+="<tr><td>"+t.id+"</td><td>"+t.name+"</td><td>"+t.type+"</td><td>"+t.subtype+"</td></tr>"})),t.getElementById(i.idCurrentDiv).innerHTML=i.relationsText),i.typeCurrentDiv,"snippet"==i.typeCurrentDiv){var n="Name Snippeted: null";if(i.snippetChoosed){n="Name Snippeted: "+i.dataAllItem.find((e=>e.id===i.snippetChoosed[2]&&e.type==i.snippetChoosed[0].toLowerCase())).name}t.getElementById(i.idCurrentDiv).innerHTML=n}if("multiselect"==i.typeCurrentDiv&&(t.getElementById(i.idCurrentDiv).innerHTML=this.valueMultiselect),"date"==i.typeCurrentDiv&&(t.getElementById(i.idCurrentDiv).innerHTML=this.dateValue),"textarea"==i.typeCurrentDiv&&(t.getElementById(i.idCurrentDiv).textContent=this.textareaValue),"link"==i.typeCurrentDiv&&(t.getElementById(i.idCurrentDiv).innerHTML=this.dataLink.text,t.getElementById(i.idCurrentDiv).dataset.text=this.dataLink.text,t.getElementById(i.idCurrentDiv).dataset.path=this.dataLink.path,t.getElementById(i.idCurrentDiv).dataset.target=this.dataLink.target,t.getElementById(i.idCurrentDiv).dataset.parameters=this.dataLink.parameters,t.getElementById(i.idCurrentDiv).dataset.anchor=this.dataLink.anchorLink,t.getElementById(i.idCurrentDiv).dataset.title=this.dataLink.title,t.getElementById(i.idCurrentDiv).dataset.accesskey=this.dataLink.accessKey,t.getElementById(i.idCurrentDiv).dataset.rel=this.dataLink.rel,t.getElementById(i.idCurrentDiv).dataset.tabindex=this.dataLink.tabIndex,t.getElementById(i.idCurrentDiv).dataset.class=this.dataLink.class),"renderlet"==i.typeCurrentDiv){t.getElementById(i.idCurrentDiv).dataset.id=i.radioValue.id,t.getElementById(i.idCurrentDiv).dataset.type=i.radioValue.type,t.getElementById(i.idCurrentDiv).dataset.subtype=i.radioValue.subtype;const e=a.filter((e=>e.id===i.idCurrentDiv));var s=JSON.stringify(e[0].config),d=e[0].name,o=i.radioValue.id,r=i.radioValue.type,p=i.radioValue.subtype;const n=new URLSearchParams;n.set("id",l),n.set("option",s),n.set("name",d),n.set("changeId",o),n.set("type",r),n.set("subtype",p);const u=`${"../renderlet"}?${n.toString()}`;fetch(u).then((e=>e.json())).then((e=>{t.getElementById(i.idCurrentDiv).innerHTML=e.data})).catch((e=>{console.log(e)}))}if("image"==i.typeCurrentDiv){var u=t.getElementById(i.idCurrentDiv).getElementsByTagName("img");i.radioValue&&(u[0].src=i.radioValue),u[0].dataset.src=i.radioValue}if("pdf"==i.typeCurrentDiv){var m=t.getElementById(i.idCurrentDiv);m.innerHTML=i.pdfInfo,m.dataset.src=i.pdfInfo}if("video"==i.typeCurrentDiv){var c=t.getElementById(i.idCurrentDiv);c.dataset.type=i.dataVideosShow.type,c.dataset.title=i.dataVideosShow.title,c.dataset.description=i.dataVideosShow.description,c.dataset.path=i.dataVideosShow.path,c.dataset.poster=i.dataVideosShow.poster;var y=c.querySelector("source"),h=c.querySelector("video");y&&h&&(y.src=i.pathVideoValue,h.poster=i.dataVideosShow.poster,h.load())}i.typeCurrentDiv,i.typeCurrentDiv,this.closeDialog()},navigateToFolder(){this.$inertia.post("/cms/document/listing")},navigateToFolderChill(e){this.$inertia.post("/cms/document/listing?folderId="+e.id)},preview(){var e=(new Date).getTime();this.tab="main",this.iframeSrc=this.data.path+this.data.key+"?pimcore_preview=true&time="+e+"&forceDeviceType=tablet&pimcore_override_output_timestamp=1709485200",this.displayType="preview",this.styleWindow="align-items: center; justify-content: center; display: flex;"},display(e){"desktop"==e&&(this.style="width: 100%; background: rgb(255, 255, 255); height: 211px; position: relative; border: 0px; top: initial; left: initial;"),"tablet"==e&&(this.style="width: 1024px; background: rgb(255, 255, 255); height: 208px; border: 5px solid rgb(50, 50, 50); top: 0px;"),"phone"==e&&(this.style="width: 375px; background: rgb(255, 255, 255); height: 208px; border: 5px solid rgb(50, 50, 50); top: 0px; left: 200px;"),"phoneRotate"==e&&(this.style="width: 667px; background: rgb(255, 255, 255); height: 208px; border: 5px solid rgb(50, 50, 50); top: 0px; left: 120px;")},openInNew(){var e=(new Date).getTime(),t="/"+this.data.title+"?pimcore_preview=true&_dc="+e;this.data.prettyUrl&&(t=this.data.prettyUrl),window.open(t,"_blank")},editMode(){this.iframeSrc="../edit-mode/"+this.data.id+"?cms_editmode=true",this.displayType="",this.styleWindow="",this.tab="main",this.style="width: 100%; background: rgb(255, 255, 255); height: 211px; position: relative; border: 0px; top: initial; left: initial;"},arrowUpClicked(e){if(e>0){const t=this.list2[e];this.list2.splice(e,1),this.list2.splice(e-1,0,t)}},arrowDownClicked(e){if(e<this.list2.length-1){const t=this.list2[e];this.list2.splice(e,1),this.list2.splice(e+1,0,t)}}}},re=Object.assign(oe,{layout:e},{props:{data:[Object,Array],nameParent:Object,flash:Object,sidebar:[Object,Array]},setup:e=>(y,h)=>{const oe=t("v-icon"),re=t("v-breadcrumbs-item"),pe=t("v-breadcrumbs"),ue=t("v-btn"),me=t("v-tab"),ce=t("v-tabs"),ye=t("v-toolbar"),he=t("Input"),ge=t("Wysiwyg"),ve=t("ManyToOneRelation"),fe=t("ManyToManyRelation"),we=t("v-table"),ke=t("Numeric"),be=t("Select"),Ve=t("Multiselect"),Ce=t("Date"),De=t("Textarea"),Se=t("Link"),Ie=t("Images"),xe=t("v-card-text"),Te=t("v-spacer"),Be=t("v-card-actions"),Ee=t("v-card"),Le=t("v-dialog"),Re=t("v-window-item"),_e=t("v-expansion-panel-title"),Ne=t("v-expansion-panel-text"),Oe=t("v-expansion-panel"),Me=t("v-checkbox"),Ue=t("v-expansion-panels"),Ae=t("v-data-table"),Pe=t("v-window");return a(),l("div",b,[i("div",V,[i("div",C,[i("div",D,[n(oe,{icon:"mdi-file-document-outline",class:"--objectIcon me-3"}),i("div",S,[n(pe,{class:"breadcrumbWrapper pa-0"},{default:s((()=>[n(re,{class:"--itemBreadcrumb",disabled:!e.nameParent,onClick:y.navigateToFolder,title:"Home"},{default:s((()=>[I])),_:1},8,["disabled","onClick"]),x,(a(!0),l(d,null,o(e.nameParent,((e,t)=>(a(),l(d,{key:t},[e?(a(),r(re,{key:0,onClick:t=>y.navigateToFolderChill(e),class:"--itemBreadcrumb",disabled:e.end},{default:s((()=>[i("span",null,p(e.name),1)])),_:2},1032,["onClick","disabled"])):u("",!0),T],64)))),128))])),_:1}),i("h3",B,p(e.data.key),1)])]),i("div",E,["page"==e.data.type?(a(),r(ue,{key:0,class:"btn-primary me-2",variant:"elevated","prepend-icon":"mdi-pencil-outline",onClick:h[0]||(h[0]=e=>y.editMode())},{default:s((()=>[m(" Edit ")])),_:1})):u("",!0),"page"==e.data.type?(a(),r(ue,{key:1,class:"btn-primary me-2",variant:"elevated","prepend-icon":"mdi-presentation-play",onClick:h[1]||(h[1]=e=>y.preview())},{default:s((()=>[m(" Live Preview ")])),_:1})):u("",!0),n(ue,{class:"btn-primary me-2",variant:"elevated",onClick:h[2]||(h[2]=e=>y.save())},{default:s((()=>[y.isLoading?(a(),r(oe,{key:0,class:"v-btn__prepend"},{default:s((()=>[m("mdi-loading mdi-spin")])),_:1})):u("",!0),y.isLoading?u("",!0):(a(),r(oe,{key:1,class:"v-btn__prepend"},{default:s((()=>[m("mdi-content-save")])),_:1})),m(" "+p(y.isLoading?"Saving...":"Save and Publish"),1)])),_:1})])]),"preview"!=y.displayType?(a(),r(ce,{key:0,modelValue:y.tab,"onUpdate:modelValue":h[3]||(h[3]=e=>y.tab=e),class:"mainTabPanel"},{default:s((()=>[n(me,{value:"main"},{default:s((()=>[L])),_:1}),"link"!=e.data.type?(a(),r(me,{key:0,value:"seo"},{default:s((()=>[R])),_:1})):u("",!0),"link"!=e.data.type?(a(),r(me,{key:1,value:"revision"},{default:s((()=>[_])),_:1})):u("",!0)])),_:1},8,["modelValue"])):u("",!0),"preview"==y.displayType?(a(),l("div",N,[n(ue,{"prepend-icon":"mdi-monitor",onClick:h[4]||(h[4]=e=>y.display("desktop"))},{default:s((()=>[m(" Desktop ")])),_:1}),n(ue,{"prepend-icon":"mdi-tablet",onClick:h[5]||(h[5]=e=>y.display("tablet"))},{default:s((()=>[m(" Tablet ")])),_:1}),n(ue,{"prepend-icon":"mdi-cellphone",onClick:h[6]||(h[6]=e=>y.display("phone"))},{default:s((()=>[m(" Phone ")])),_:1}),n(ue,{"prepend-icon":"mdi-phone-rotate-landscape",onClick:h[7]||(h[7]=e=>y.display("phoneRotate"))},{default:s((()=>[m(" Phone ")])),_:1}),n(ue,{"prepend-icon":"mdi-open-in-new",onClick:h[8]||(h[8]=e=>y.openInNew())},{default:s((()=>[m(" Open in new Window ")])),_:1})])):u("",!0)]),i("div",O,[i("div",M,[i("div",U,[n(Pe,{modelValue:y.tab,"onUpdate:modelValue":h[38]||(h[38]=e=>y.tab=e),class:"h-100"},{default:s((()=>[n(Re,{value:"main",class:"documentEditorWrapper h-100",style:c(y.styleWindow)},{default:s((()=>["link"!=e.data.type?(a(),l("iframe",{key:0,id:"myIframe",class:"h-100",src:y.iframeSrc,onLoad:h[9]||(h[9]=(...e)=>y.handleIframeLoad&&y.handleIframeLoad(...e)),style:c(y.style)},null,44,A)):u("",!0),"link"==e.data.type?(a(),r(g,{key:1,modelValue:e.data.href,"onUpdate:modelValue":h[10]||(h[10]=t=>e.data.href=t),disabled:!1},null,8,["modelValue"])):u("",!0),"link"!=e.data.type?(a(),r(Le,{key:2,modelValue:y.dialog,"onUpdate:modelValue":h[25]||(h[25]=e=>y.dialog=e),activator:"parent","onClick:outside":y.closeDialog,width:"50%"},{default:s((()=>[n(Ee,null,{default:s((()=>[y.showInput?(a(),r(ye,{key:0,density:"compact",title:"Edit Text"})):u("",!0),y.showWysiwyg?(a(),r(ye,{key:1,density:"compact",title:"Edit Wysiwyg"})):u("",!0),y.showRelation&&!y.showRenderlet?(a(),r(ye,{key:2,density:"compact",title:"Edit Relation"})):u("",!0),y.showRenderlet?(a(),r(ye,{key:3,density:"compact",title:"Edit Renderlet"})):u("",!0),y.showRelations?(a(),r(ye,{key:4,density:"compact",title:"Edit Relations"})):u("",!0),y.showNumeric?(a(),r(ye,{key:5,density:"compact",title:"Edit Numeric"})):u("",!0),y.showSelect?(a(),r(ye,{key:6,density:"compact",title:"Edit Select"})):u("",!0),y.showMultiselect?(a(),r(ye,{key:7,density:"compact",title:"Edit Multiselect"})):u("",!0),y.showBlock?(a(),r(ye,{key:8,density:"compact",title:"Edit Block"})):u("",!0),y.showSnippet?(a(),r(ye,{key:9,density:"compact",title:"Edit Snippet"})):u("",!0),y.showScheduled?(a(),r(ye,{key:10,density:"compact",title:"Edit Scheduled"})):u("",!0),y.showDate?(a(),r(ye,{key:11,density:"compact",title:"Edit Date"})):u("",!0),y.showTextarea?(a(),r(ye,{key:12,density:"compact",title:"Edit TextArea"})):u("",!0),y.showLink?(a(),r(ye,{key:13,density:"compact",title:"Edit Link"})):u("",!0),y.showImage?(a(),r(ye,{key:14,density:"compact",title:"Edit Image"})):u("",!0),y.showPDF?(a(),r(ye,{key:15,density:"compact",title:"Edit PDF"})):u("",!0),y.showVideo?(a(),r(ye,{key:16,density:"compact",title:"Edit Video"})):u("",!0),y.showAreaBlock?(a(),r(ye,{key:17,density:"compact",title:"Edit Area Block"})):u("",!0),n(xe,null,{default:s((()=>[y.showInput?(a(),r(he,{key:0,class:"input",label:y.nameInput,modelValue:y.inputValue,"onUpdate:modelValue":h[11]||(h[11]=e=>y.inputValue=e)},null,8,["label","modelValue"])):u("",!0),y.showWysiwyg?(a(),r(ge,{key:1,modelValue:y.WysiwygValue,"onUpdate:modelValue":h[12]||(h[12]=e=>y.WysiwygValue=e),label:y.nameWysiwyg},null,8,["modelValue","label"])):u("",!0),y.showRelation?(a(),l("div",P,[W,n(ve,{items:y.optionsRela,modelValue:y.listRelaShow,"onUpdate:modelValue":h[13]||(h[13]=e=>y.listRelaShow=e),chips:!0,disabled:!1},null,8,["items","modelValue"])])):u("",!0),y.showRelations?(a(),l("div",j,[J,m(" "+p(y.listRelationsShow)+" ",1),n(fe,{items:y.options,modelValue:y.listRelationsShow,"onUpdate:modelValue":h[14]||(h[14]=e=>y.listRelationsShow=e),chips:!0,disabled:!1},null,8,["items","modelValue"]),y.listRelationsShow&&0!==y.listRelationsShow.length?(a(),l("div",F,[n(we,null,{default:s((()=>[H,i("tbody",null,[(a(!0),l(d,null,o(y.listRelationsShow,((e,t)=>(a(),l("tr",{key:e.id},[i("td",null,p(e[2]),1),i("td",null,p(e[0]),1),i("td",null,p(e[1]),1),i("td",null,[n(oe,{onClick:e=>y.arrowUpClicked(t)},{default:s((()=>[m("mdi-arrow-up")])),_:2},1032,["onClick"])]),i("td",null,[n(oe,{onClick:e=>y.arrowDownClicked(t)},{default:s((()=>[m("mdi-arrow-down")])),_:2},1032,["onClick"])])])))),128))])])),_:1})])):u("",!0)])):u("",!0),y.showNumeric?(a(),r(ke,{key:4,min:y.minNumeric,max:y.maxNumeric,label:y.nameNumeric,modelValue:y.numericValue,"onUpdate:modelValue":h[15]||(h[15]=e=>y.numericValue=e)},null,8,["min","max","label","modelValue"])):u("",!0),y.showSelect?(a(),r(be,{key:5,label:y.nameSelect,items:y.optionSelect,modelValue:y.valueSelect,"onUpdate:modelValue":h[16]||(h[16]=e=>y.valueSelect=e)},null,8,["label","items","modelValue"])):u("",!0),y.showMultiselect?(a(),r(Ve,{key:6,items:y.optionSelect,modelValue:y.valueMultiselect,"onUpdate:modelValue":h[17]||(h[17]=e=>y.valueMultiselect=e),label:y.nameMultiselect},null,8,["items","modelValue","label"])):u("",!0),y.showBlock?(a(),r(v,{key:7,listType:y.listType,listBlock:y.listBlockShow,realNameBlock:y.realNameBlock},null,8,["listType","listBlock","realNameBlock"])):u("",!0),y.showSnippet?(a(),l("div",$,[n(ve,{items:y.optionsSnippet,modelValue:y.snippetChoosed,"onUpdate:modelValue":h[18]||(h[18]=e=>y.snippetChoosed=e),label:"Snippet",chips:!0,disabled:!1},null,8,["items","modelValue"])])):u("",!0),y.showScheduled?(a(),r(w,{key:9,name:"Scheduled",listScheduled:y.listScheduled,type:y.allTypeSchedule,disabled:!1},null,8,["listScheduled","type"])):u("",!0),y.showDate?(a(),r(Ce,{key:10,modelValue:y.dateValue,"onUpdate:modelValue":h[19]||(h[19]=e=>y.dateValue=e),label:y.nameDate},null,8,["modelValue","label"])):u("",!0),y.showTextarea?(a(),r(De,{key:11,modelValue:y.textareaValue,"onUpdate:modelValue":h[20]||(h[20]=e=>y.textareaValue=e),label:"TextArea"},null,8,["modelValue"])):u("",!0),y.showLink?(a(),r(Se,{key:12,label:"Edit Link",modelValue:y.dataLink,"onUpdate:modelValue":h[21]||(h[21]=e=>y.dataLink=e)},null,8,["modelValue"])):u("",!0),y.showImage?(a(),l("div",G,[K,n(Ie,{name:"image",label:"Image",modelValue:y.radioValue,"onUpdate:modelValue":h[22]||(h[22]=e=>y.radioValue=e),disabled:!1,checkbox:"1",class:"mt-2"},null,8,["modelValue"])])):u("",!0),y.showPDF?(a(),l("div",q,[z,n(Ie,{name:"pdf",label:"Pdf",modelValue:y.pdfInfo,"onUpdate:modelValue":h[23]||(h[23]=e=>y.pdfInfo=e),disabled:!1,checkbox:"1",class:"mt-2",type:"document"},null,8,["modelValue"])])):u("",!0),y.showVideo?(a(),r(f,{key:15,items:y.optionType,type:y.typeValue,name:"Video",modelValue:y.dataVideosShow,"onUpdate:modelValue":h[24]||(h[24]=e=>y.dataVideosShow=e),label:"Video",disabled:!1},null,8,["items","type","modelValue"])):u("",!0),y.showAreaBlock?(a(),r(k,{key:16,arrTypesArea:y.arrTypesArea,arrField:y.listAreaBlock,realNameArea:y.realNameArea},null,8,["arrTypesArea","arrField","realNameArea"])):u("",!0)])),_:1}),n(Be,{class:"pa-3"},{default:s((()=>[n(Te),n(ue,{color:"primary",onClick:y.saveData},{default:s((()=>[m("OK")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue","onClick:outside"])):u("",!0)])),_:1},8,["style"]),n(Re,{value:"seo"},{default:s((()=>[n(Ue,{modelValue:y.panel,"onUpdate:modelValue":h[36]||(h[36]=e=>y.panel=e),multiple:""},{default:s((()=>["page"==e.data.type?(a(),r(Oe,{key:0},{default:s((()=>[n(_e,{"expand-icon":"mdi-plus","collapse-icon":"mdi-minus"},{default:s((()=>[m(" Title & Description ")])),_:1}),n(Ne,null,{default:s((()=>[n(he,{label:"Title",modelValue:e.data.title,"onUpdate:modelValue":h[26]||(h[26]=t=>e.data.title=t)},null,8,["modelValue"]),n(De,{label:"Description:",modelValue:e.data.description,"onUpdate:modelValue":h[27]||(h[27]=t=>e.data.description=t)},null,8,["modelValue"])])),_:1})])),_:1})):u("",!0),"page"==e.data.type?(a(),r(Oe,{key:1},{default:s((()=>[n(_e,{"expand-icon":"mdi-plus","collapse-icon":"mdi-minus"},{default:s((()=>[m(" Pretty URL / URL Slug ")])),_:1}),n(Ne,null,{default:s((()=>[n(he,{label:"Prety URL (overrides path from tree-structure):",modelValue:e.data.prettyUrl,"onUpdate:modelValue":h[28]||(h[28]=t=>e.data.prettyUrl=t)},null,8,["modelValue"])])),_:1})])),_:1})):u("",!0),n(Oe,null,{default:s((()=>[n(_e,{"expand-icon":"mdi-plus","collapse-icon":"mdi-minus"},{default:s((()=>[m(" Controller, Action & Template ")])),_:1}),n(Ne,null,{default:s((()=>[n(he,{label:"Predefined Document Type:"}),n(he,{label:"Controller:",modelValue:e.data.controller,"onUpdate:modelValue":h[29]||(h[29]=t=>e.data.controller=t)},null,8,["modelValue"]),n(he,{label:"Template:",modelValue:e.data.template,"onUpdate:modelValue":h[30]||(h[30]=t=>e.data.template=t)},null,8,["modelValue"])])),_:1})])),_:1}),"page"==e.data.type?(a(),r(Oe,{key:2},{default:s((()=>[n(_e,{"expand-icon":"mdi-plus","collapse-icon":"mdi-minus"},{default:s((()=>[m(" Static Page Generator ")])),_:1}),n(Ne,null,{default:s((()=>[n(Me,{label:"Enable server side static rendering:",modelValue:e.data.staticGeneratorEnabled,"onUpdate:modelValue":h[31]||(h[31]=t=>e.data.staticGeneratorEnabled=t)},null,8,["modelValue"]),n(he,{label:"Lifetime (in minutes) for static page (optional):",type:"number",min:"1",modelValue:e.data.staticGeneratorLifetime,"onUpdate:modelValue":h[32]||(h[32]=t=>e.data.staticGeneratorLifetime=t)},null,8,["modelValue"])])),_:1})])),_:1})):u("",!0),n(Oe,null,{default:s((()=>[n(_e,{"expand-icon":"mdi-plus","collapse-icon":"mdi-minus"},{default:s((()=>[m(" Path, Key & ID ")])),_:1}),n(Ne,null,{default:s((()=>[n(he,{label:"Path:",modelValue:e.data.path,"onUpdate:modelValue":h[33]||(h[33]=t=>e.data.path=t),disabled:!0},null,8,["modelValue"]),n(he,{label:"Key:",modelValue:e.data.key,"onUpdate:modelValue":h[34]||(h[34]=t=>e.data.key=t),disabled:!0},null,8,["modelValue"]),n(he,{label:"ID:",modelValue:e.data.id,"onUpdate:modelValue":h[35]||(h[35]=t=>e.data.id=t),disabled:!0},null,8,["modelValue"])])),_:1})])),_:1}),n(Oe,null,{default:s((()=>[n(_e,{"expand-icon":"mdi-plus","collapse-icon":"mdi-minus"},{default:s((()=>[m(" Content-Main Document ")])),_:1}),n(Ne,null,{default:s((()=>[n(he,{label:"Document:"})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),n(Re,{value:"revision"},{default:s((()=>[n(Ae,{page:y.page,"onUpdate:page":h[37]||(h[37]=e=>y.page=e),headers:y.headers,items:y.desserts,"items-per-page":y.itemsPerPage,class:"elevation-1"},null,8,["page","headers","items","items-per-page"])])),_:1})])),_:1},8,["modelValue"])])]),i("div",Q,[i("div",X,[Y,i("div",Z,[i("div",ee,[i("div",te,[i("small",null,p(y.$t("ID")),1),i("p",null,p(e.sidebar.id),1)]),i("div",ae,[i("small",null,p(y.$t("Key")),1),i("p",null,p(e.sidebar.key),1)]),i("div",le,[i("small",null,p(y.$t("Full Path")),1),i("p",null,p(e.sidebar.fullPath),1)]),i("div",ie,[i("small",null,p(y.$t("Created date")),1),i("p",null,p(e.sidebar.creationDate),1)]),i("div",ne,[i("small",null,p(y.$t("Modification date")),1),i("p",null,p(e.sidebar.modificationDate),1)]),i("div",se,[i("small",null,p(y.$t("User Owner")),1),i("p",null,p(e.sidebar.userOwner),1)]),i("div",de,[i("small",null,p(y.$t("User modification")),1),i("p",null,p(e.sidebar.userModification),1)])])])])])])])}});export{re as default};
