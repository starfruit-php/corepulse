import e from"./Layout-3c7b1426.js";import{r as t,o as a,h as l,f as s,a as i,w as r,d as o,t as n,Y as c,x as d,M as m}from"./app-7dbf1b60.js";const u={class:"mainAppWrapper d-flex flex-column"},p={class:"mainBarWrapper px-5 py-3 d-flex justify-space-between align-center flex-grow-0 flex-shrink-0"},h={class:"--left d-flex align-center"},f=s("div",{class:"d-flex flex-column me-4"},[s("h3",{class:"--objectTitle me-4"},"Users")],-1),v={class:"--right"},b=s("div",{class:"utilityBarWrapper flex-grow-0 flex-shrink-0"},null,-1),g={class:"mainContentWrapper px-5 py-4 d-flex flex-column flex-grow-1 flex-shrink-1 overflow-hidden"},x={class:"tableListingWrapper d-flex flex-column"},y={name:"User",data(){var e=window.location.href;let t=window.localStorage.getItem(e);t?t=JSON.parse(t):(t=[{title:this.$t("Name"),align:"start",key:"name",sortable:!0,removable:!0},{title:this.$t("Email"),align:"start",key:"email",sortable:!0,removable:!0},{title:this.$t("Username"),align:"start",key:"username",sortable:!0,removable:!0},{title:this.$t("Active"),align:"start",key:"active",searchType:"Select",sortable:!0,removable:!0,options:[{value:"1",key:"Active"},{value:"0",key:"Inactive"}]},{title:this.$t("Role"),align:"start",key:"role",sortable:!0,removable:!1}],window.localStorage.setItem(e,JSON.stringify(t)));var a=[];t.map((e=>{e.removable&&a.push(e)}));var l=[this.createAction("Sửa","mdi-pencil-outline","user_detail",!1,!1,!1),this.createAction("Xóa","mdi-delete-outline","user_delete",d,!0,!0,!1)];return{createUser:!1,fav:!0,menu:!1,message:!1,hints:!0,enabled:!0,headers:a,selectedAction:[{title:"Delete",icon:"mdi-delete-outline",url:{path:"user_delete",content:{title:"Delete",content:"Are you sure you want to Delete all selected",confirm:"Delete"}},component:m,post:!0,reload:!1}],list:t,selected:[],routerList:{router:route("user_listing")},action:l,search:this.search,dialog:!1,formData:{key:""}}},mounted(){this.checkTitle()},methods:{checkTitle(){if(this.objectSetting){const e=this.objectSetting.find((e=>e.id===this.classObject.id));e&&(this.title=e.title)}},createAction:(e,t,a,l=!1,s=!0,i=!0,r=!0)=>({title:e,icon:t,url:a,component:l,multiple:s,post:i,reload:r}),exportExcel(){let e=new FormData;if(this.data){for(var[t,a]of Object.entries(this.data))e.append("data[]",JSON.stringify(a));var l=this.headers;e.append("fields",JSON.stringify(l)),this.loading=!0,fetch(route("vuetify_export_excel"),{method:"POST",body:e}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e);console.log(t);const a=document.createElement("a");a.href=t,a.download="user_listing.xlsx",a.click(),URL.revokeObjectURL(t)})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))}}}},k=Object.assign(y,{layout:e},{props:{data:Array,totalItems:{default:0},search:{type:Object,default:{}},totalItems:Number},setup:e=>(d,m)=>{const y=t("v-icon"),k=t("v-btn"),w=t("v-menu"),S=t("v-dialog"),U=t("CustomField"),j=t("DataTableServer");return a(),l("div",u,[s("div",p,[s("div",h,[i(y,{icon:"mdi-account-multiple-outline",class:"--objectIcon me-3"}),f]),s("div",v,[i(w,{modelValue:d.menu,"onUpdate:modelValue":m[1]||(m[1]=e=>d.menu=e),"close-on-content-click":!1},{activator:r((({props:e})=>[i(k,{onClick:m[0]||(m[0]=e=>d.createUser=!0),class:"btn-primary me-2",variant:"elevated"},{default:r((()=>[i(y,{left:"",class:"me-2"},{default:r((()=>[o("mdi-plus")])),_:1}),o(" "+n(d.$t("Create")),1)])),_:1})])),_:1},8,["modelValue"]),i(S,{modelValue:d.createUser,"onUpdate:modelValue":m[2]||(m[2]=e=>d.createUser=e),width:"420"},{default:r((()=>[i(c,{object:"User",url:{path:"user_create"},urlReturn:{path:"user_detail"}})])),_:1},8,["modelValue"]),i(k,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:d.exportExcel},{default:r((()=>[o(n(d.$t("Export")),1)])),_:1},8,["onClick"]),i(U,{headers:d.headers,list:d.list,"onUpdate:headers":m[3]||(m[3]=e=>d.headers=e)},null,8,["headers","list"])])]),b,s("div",g,[s("div",x,[i(j,{listing:e.data,router:d.routerList,totalItems:e.totalItems,headers:d.headers,action:d.action,selectedAction:d.selectedAction,noOrder:d.noOrder,multiSelect:d.multiSelect},null,8,["listing","router","totalItems","headers","action","selectedAction","noOrder","multiSelect"])])])])}});export{k as default};
