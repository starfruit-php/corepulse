import e from"./Layout-7b37c0dd.js";import{r as t,o as i,h as s,f as l,t as n,a,w as o,d,i as u,F as c,l as r,c as m,y as g,x as p,M as h,k as f}from"./app-2b531625.js";import x from"./ModalResult-d83fb860.js";const S={class:"mainAppWrapper d-flex flex-column"},b={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},y={class:"--text"},_={class:"--text"},v={class:"--text"},I={class:"--text"},C={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-auto"},A={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},k={key:0,class:"reportTableWrapper py-4 d-flex flex-column overflow-visible"},L={class:"--filterBar d-flex align-center justify-end mb-2"},U={class:"tableListingWrapper d-flex flex-column"},D={key:0,target:"_blank"},w=l("h4",null,"Object",-1),V={class:"flex-container"},F={class:"flex-item"},T={class:"flex-item"},E=l("h4",null,"Document",-1),j={class:"flex-container"},O={class:"flex-item"},P={class:"flex-item"},$=l("br",null,null,-1),R={style:{padding:"20px",width:"400px"}},H={for:""},J={class:"progress-flex-container"},B={style:{padding:"20px",width:"400px","margin-left":"200px"}},N={key:2,class:"--filterBar d-flex align-center justify-end mb-2"},W={key:3,class:"tableListingWrapper d-flex flex-column"},G={data(){let e=[{title:"Update submit",icon:"mdi-update",url:{path:"seo_indexing_submit_type",data:{type:"update-submit"},content:{title:"Update Submit",content:"Are you sure you want to update submit",confirm:"Update"}},component:p,post:!0,reload:!1},{title:"Delete submit",icon:"mdi-cancel",url:{path:"seo_indexing_submit_type",data:{type:"delete-submit"},content:{title:"Delete Submit",content:"Are you sure you want to delete submit",confirm:"Delete"}},component:p,post:!0,reload:!1},{title:"Delete",icon:"mdi-delete-outline",url:{path:"seo_indexing_submit_type",data:{type:"delete"}},component:p,post:!0,reload:!1}],t=[{title:"Detail result",icon:"mdi-eye-outline",url:"seo_indexing_status_detail",component:x,post:!1,reload:!0}];t=[...t,...e];let i=[{title:"Update Submit",icon:"mdi-delete-outline",url:{path:"seo_indexing_submit_type",data:{all:!0,type:"update-submit"},content:{title:"Update Submit",content:"Are you sure you want to update submit all selected objects",confirm:"Update Submit"}},component:h,post:!0,reload:!1},{title:"Delete Submit",icon:"mdi-delete-outline",url:{path:"seo_indexing_submit_type",data:{all:!0,type:"delete-submit"},content:{title:"Delete Submit",content:"Are you sure you want to delete submit all selected objects",confirm:"Delete Submit"}},component:h,post:!0,reload:!1},{title:"Delete",icon:"mdi-delete-outline",url:{path:"seo_indexing_submit_type",data:{all:!0,type:"delete"},content:{title:"Delete",content:"Are you sure you want to delete all selected objects",confirm:"Delete"}},component:h,post:!0,reload:!1}],s=[{title:"Inspection Result",icon:"mdi-delete-outline",url:{path:"seo_indexing_submit_type",data:{all:!0,type:"inspection"},content:{title:"Update Submit",content:"Are you sure you want to update submit all selected objects",confirm:"Update Submit"}},component:h,post:!0,reload:!1}];return{ModalDelete:g(p),ModalSelected:g(h),ModalResult:g(x),dialogSubmit:null,createUrl:null,tabAll:null,settingIndexing:null,settingFile:null,settingFilePreview:null,settingJson:null,initClass:!1,classAll:!0,classConfig:[],documentAll:!0,documentConfig:[],initDocument:!1,toast:f.useToast({position:"top-right",style:{zIndex:"200"}}),seoIndexingSelectAction:i,seoIndexingAction:e,seoIndexing:!1,seoIndexingListing:[],seoIndexingHeaders:[],seoIndexingFields:[],seoIndexingTotalItems:0,seoIndexingLimit:10,seoIndexingRouterList:{router:route("seo_indexing_listing")},seoStatus:[],seoStatusPieChart:{},seoStatusLoading:!0,seoStatusHeaders:[],seoStatusFields:[],seoStatusAction:t,seoStatusSelectAction:s}},mounted(){this.getSetting(),this.getListing()},watch:{classAll(e,t){this.$nextTick((()=>{if(e)for(var t=0;t<this.classConfig.length;t++)this.classConfig[t].check=!0;if(!e&&!this.initClass)for(t=0;t<this.classConfig.length;t++)this.classConfig[t].check=!1;this.initClass=!1}))},classConfig:{deep:!0,handler(){const e=this.classConfig.every((e=>e.check));this.classConfig.forEach((e=>{e.check||(this.classAll=!1,this.initClass=!0)})),e!=this.classAll&&(this.classAll=e)}},documentAll(e,t){this.$nextTick((()=>{if(e)for(var t=0;t<this.documentConfig.length;t++)this.documentConfig[t].generateSitemap=!0;if(!e&&!this.initDocument)for(t=0;t<this.documentConfig.length;t++)this.documentConfig[t].generateSitemap=!1;this.initDocument=!1}))},documentConfig:{deep:!0,handler(){const e=this.documentConfig.every((e=>e.generateSitemap));this.documentConfig.forEach((e=>{e.generateSitemap||(this.documentAll=!1,this.initDocument=!0)})),e!=this.documentAll&&(this.documentAll=e)}},settingJson(e,t){e&&(this.settingFile="",this.settingFilePreview="")}},methods:{getIndexStatus(){this.seoStatusLoading=!0,fetch(route("seo_indexing_status"),{method:"GET"}).then((e=>e.json())).then((e=>{this.seoStatus=e;let t=e.counts.indexingState,i=[],s=[],l=[],n=[];const a={INDEXING_ALLOWED:"#00E396",INDEXING_STATE_UNSPECIFIED:"#F3722C",BLOCKED_BY_META_TAG:"#919EAB",BLOCKED_BY_HTTP_HEADER:"#F94144",BLOCKED_BY_ROBOTS_TXT:"#212B36"};for(let o in t)t.hasOwnProperty(o)&&(s.push(o),i.push(t[o]),l.push(o),n.push(a[o]));this.seoStatusPieChart={series:i,categories:s,labels:l,type:"donut",title:"Index Status",colors:n},this.seoStatusFields=e.fields,this.seoStatusHeaders=e.fields,this.seoStatusLoading=!1})).catch((e=>{}))},getSetting(){fetch(route("seo_indexing_setting"),{method:"GET"}).then((e=>e.json())).then((e=>{"json"==e.type&&(this.settingJson=e.value),"file"==e.type&&(this.settingFilePreview=e.value),this.classConfig=e.classes;for(var t=0;t<e.classes.length;t++)if(!e.classes[t].check){this.classAll=!1,this.initClass=!0;break}this.documentConfig=e.documents;for(t=0;t<e.documents.length;t++)if(!e.documents[t].generateSitemap){this.documentAll=!1,this.initDocument=!0;break}})).catch((e=>{}))},getListing(){this.seoIndexing||fetch(route("seo_indexing_listing"),{method:"POST"}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((e=>{this.$nextTick((()=>{this.seoIndexingFields=e.fields,this.seoIndexingHeaders=e.fields,this.seoIndexingListing=e.listData,this.seoIndexingLimit=e.limit,this.seoIndexingTotalItems=e.totalItems,this.seoIndexing=!0}))})).catch((e=>{console.error("Lỗi xảy ra khi gửi yêu cầu:",e)})).finally((()=>{}))},createClick(){this.dialogSubmit=!0},handleUpload(){this.$refs.jsonFile.$el.querySelector('input[type="file"]').click()},uploadFile(e){this.settingFile=e.target.files[0],this.settingFilePreview=this.settingFile.name,this.settingJson=""},createSubmit(){if(this.createUrl){const e=new FormData;e.append("url",this.createUrl),fetch(route("seo_indexing_create_submit"),{method:"POST",body:e}).then((e=>e.json())).then((e=>{e.success?this.message(e.message):this.message(e.message,"error")})).finally((()=>{this.dialogSubmit=!1,this.seoIndexing=!1,this.getListing()}))}},settingSubmit(){const e=new FormData;this.settingFile?(e.append("value",this.settingFile),e.append("type","file")):this.settingJson&&(e.append("type","json"),e.append("value",this.settingJson)),e.append("classes",JSON.stringify(this.classConfig)),e.append("documents",JSON.stringify(this.documentConfig)),fetch(route("seo_indexing_setting"),{method:"POST",body:e}).then((e=>e.json())).then((e=>{e.success?this.message(e.message):this.message(e.message,"error")})).catch((e=>{}))},message(e,t="success"){e&&setTimeout((()=>{this.toast.open({message:e,type:t})}),1e3)},exportExcel(){let e=new FormData,t=[],i=[];if(t=this.seoIndexingListing,i=this.seoIndexingHeaders,t&&i){for(var[s,l]of Object.entries(t))e.append("data[]",JSON.stringify(l));e.append("fields",JSON.stringify(i)),fetch(route("vuetify_export_excel"),{method:"POST",body:e}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download="indexing.xlsx",i.click(),URL.revokeObjectURL(t)})).catch((e=>{})).finally((()=>{}))}}}},M=Object.assign(G,{layout:e},{__name:"Indexing",setup:e=>(e,g)=>{const p=t("v-tab"),h=t("v-tabs"),f=t("v-btn"),x=t("CustomField"),G=t("DataTableServer"),M=t("v-window-item"),q=t("Textarea"),K=t("v-file-input"),X=t("v-checkbox"),Y=t("v-card-item"),z=t("v-card"),Q=t("v-progress-linear"),Z=t("PieChart"),ee=t("v-window"),te=t("v-toolbar-title"),ie=t("v-toolbar"),se=t("Input"),le=t("v-card-text"),ne=t("v-card-actions"),ae=t("v-dialog");return i(),s(c,null,[l("div",S,[l("div",b,[l("h1",y,n(e.$t("SEO Tools")),1),a(h,{modelValue:e.tabAll,"onUpdate:modelValue":g[1]||(g[1]=t=>e.tabAll=t),class:"mainTabPanel"},{default:o((()=>[a(p,{value:"indexingRequest"},{default:o((()=>[l("span",_,n(e.$t("Indexing Request")),1)])),_:1}),a(p,{value:"apiSetting"},{default:o((()=>[l("span",v,n(e.$t("API Setting")),1)])),_:1}),a(p,{value:"indexStatus",onClick:g[0]||(g[0]=t=>e.getIndexStatus())},{default:o((()=>[l("span",I,n(e.$t("Index Status")),1)])),_:1})])),_:1},8,["modelValue"])]),l("div",C,[l("div",A,[a(ee,{modelValue:e.tabAll,"onUpdate:modelValue":g[13]||(g[13]=t=>e.tabAll=t)},{default:o((()=>[a(M,{key:"indexingRequest",value:"indexingRequest"},{default:o((()=>[e.seoIndexing?(i(),s("div",k,[l("div",L,[a(f,{"prepend-icon":"mdi-plus",onClick:g[2]||(g[2]=t=>e.createClick())},{default:o((()=>[d(n(e.$t("Create Submit")),1)])),_:1}),a(x,{headers:e.seoIndexingHeaders,list:e.seoIndexingFields,"onUpdate:headers":g[3]||(g[3]=t=>e.seoIndexingHeaders=t)},null,8,["headers","list"]),a(f,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:g[4]||(g[4]=t=>e.exportExcel())},{default:o((()=>[d(n(e.$t("Export")),1)])),_:1})]),l("div",U,[a(G,{listing:e.seoIndexingListing,router:e.seoIndexingRouterList,"total-items":e.seoIndexingTotalItems,headers:e.seoIndexingHeaders,limit:e.seoIndexingLimit,fetchData:!0,multipleSelecte:!0,"onUpdate:data":g[5]||(g[5]=t=>e.seoIndexingListing=t),action:e.seoIndexingAction,selectedAction:e.seoIndexingSelectAction},null,8,["listing","router","total-items","headers","limit","action","selectedAction"])])])):u("",!0)])),_:1}),a(M,{key:"apiSetting",value:"apiSetting"},{default:o((()=>[a(z,{class:"mx-auto"},{default:o((()=>[a(Y,null,{default:o((()=>[l("h3",null,n(e.$t("General")),1),l("h4",null,n(e.$t("Setting")),1),a(q,{modelValue:e.settingJson,"onUpdate:modelValue":g[6]||(g[6]=t=>e.settingJson=t)},null,8,["modelValue"]),l("h4",null,n(e.$t("Or upload JSON file")),1),a(f,{variant:"text","prepend-icon":"mdi-upload",onClick:e.handleUpload},{default:o((()=>[d(n(e.$t("Upload file")),1)])),_:1},8,["onClick"]),a(K,{class:"d-none",ref:"jsonFile",onChange:e.uploadFile,accept:".json"},null,8,["onChange"]),e.settingFilePreview?(i(),s("a",D,n(e.settingFilePreview),1)):u("",!0),w,l("div",V,[l("div",F,[a(X,{modelValue:e.classAll,"onUpdate:modelValue":g[7]||(g[7]=t=>e.classAll=t),label:"All"},null,8,["modelValue"])]),(i(!0),s(c,null,r(e.classConfig,((e,t)=>(i(),s("div",T,[a(X,{label:e.name,modelValue:e.check,"onUpdate:modelValue":t=>e.check=t},null,8,["label","modelValue","onUpdate:modelValue"])])))),256))]),E,l("div",j,[l("div",O,[a(X,{modelValue:e.documentAll,"onUpdate:modelValue":g[8]||(g[8]=t=>e.documentAll=t),label:"All"},null,8,["modelValue"])]),(i(!0),s(c,null,r(e.documentConfig,((e,t)=>(i(),s("div",P,[a(X,{label:e.key,modelValue:e.generateSitemap,"onUpdate:modelValue":t=>e.generateSitemap=t},null,8,["label","modelValue","onUpdate:modelValue"])])))),256))]),$,a(f,{"prepend-icon":"mdi-setting",onClick:g[9]||(g[9]=t=>e.settingSubmit())},{default:o((()=>[d(n(e.$t("Save changes")),1)])),_:1})])),_:1})])),_:1})])),_:1}),a(M,{key:"indexStatus",value:"indexStatus"},{default:o((()=>[e.seoStatusLoading?(i(),m(Q,{key:0,color:"deep-purple-accent-4",height:"6",indeterminate:"",rounded:""})):u("",!0),e.seoStatusLoading?u("",!0):(i(),m(z,{key:1,class:"mx-auto",style:{display:"flex"}},{default:o((()=>[l("div",R,[(i(!0),s(c,null,r(e.seoStatus.counts.coverageState,((t,o)=>(i(),s(c,null,[l("label",H,n(o),1),l("div",J,[a(Q,{modelValue:e.seoStatus.percents.coverageState[o],"onUpdate:modelValue":t=>e.seoStatus.percents.coverageState[o]=t,color:e.seoStatus.colors.coverageState[o],height:"15"},null,8,["modelValue","onUpdate:modelValue","color"]),l("p",null,n(e.seoStatus.percents.coverageState[o])+"%",1),l("p",null,"("+n(t)+")",1)])],64)))),256))]),l("div",B,[e.seoStatusPieChart.series?(i(),m(Z,{key:0,chartData:e.seoStatusPieChart},null,8,["chartData"])):u("",!0)])])),_:1})),e.seoStatusLoading?u("",!0):(i(),s("div",N,[a(x,{headers:e.seoStatusHeaders,list:e.seoStatusFields,"onUpdate:headers":g[10]||(g[10]=t=>e.seoStatusHeaders=t)},null,8,["headers","list"]),a(f,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:g[11]||(g[11]=t=>e.exportExcel())},{default:o((()=>[d(n(e.$t("Export")),1)])),_:1})])),e.seoStatusLoading?u("",!0):(i(),s("div",W,[a(G,{listing:e.seoIndexingListing,router:e.seoIndexingRouterList,"total-items":e.seoIndexingTotalItems,headers:e.seoStatusHeaders,limit:e.seoIndexingLimit,fetchData:!0,multipleSelecte:!0,"onUpdate:data":g[12]||(g[12]=t=>e.seoIndexingListing=t),action:e.seoStatusAction,selectedAction:e.seoStatusSelectAction},null,8,["listing","router","total-items","headers","limit","action","selectedAction"])]))])),_:1})])),_:1},8,["modelValue"])])])]),e.dialogSubmit?(i(),m(ae,{key:0,modelValue:e.dialogSubmit,"onUpdate:modelValue":g[17]||(g[17]=t=>e.dialogSubmit=t),width:"600"},{default:o((()=>[a(z,null,{default:o((()=>[a(ie,{density:"compact"},{default:o((()=>[a(te,{text:"Create Submit",class:""})])),_:1}),a(le,null,{default:o((()=>[a(se,{label:"url",modelValue:e.createUrl,"onUpdate:modelValue":g[14]||(g[14]=t=>e.createUrl=t)},null,8,["modelValue"])])),_:1}),a(ne,{class:"justify-end"},{default:o((()=>[a(f,{variant:"text",onClick:g[15]||(g[15]=t=>e.dialogSubmit=!e.dialogSubmit)},{default:o((()=>[d(n(e.$t("Close")),1)])),_:1}),a(f,{variant:"elevated",onClick:g[16]||(g[16]=t=>e.createSubmit())},{default:o((()=>[d(n(e.$t("Add")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):u("",!0)],64)}});export{M as default};
