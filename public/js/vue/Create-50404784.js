import e from"./Layout-b42d48af.js";import{am as t,o as l,c as s,k as a,q as o,N as u,C as c,M as n,E as d,a as i,K as m,p as r}from"./@vue-9ee83fb6.js";import"./@vueuse-3c3b27e0.js";import"./unidecode-5a54da0f.js";import"./@ckeditor-fa9b3055.js";import"./vue-abe8eda6.js";const h=i("thead",null,[i("tr",null,[i("th",{class:"text-left"}," Documents "),i("th",{class:"text-left"}," All "),i("th",{class:"text-left"}," List "),i("th",{class:"text-left"}," View "),i("th",{class:"text-left"}," Save "),i("th",{class:"text-left"}," Publish "),i("th",{class:"text-left"}," UnPublish "),i("th",{class:"text-left"}," Delete "),i("th",{class:"text-left"}," Create ")])],-1),b=i("td",null,"Documents",-1),f=i("thead",null,[i("tr",null,[i("th",{class:"text-left"}," Object "),i("th",{class:"text-left"}," All "),i("th",{class:"text-left"}," List "),i("th",{class:"text-left"}," View "),i("th",{class:"text-left"}," Save "),i("th",{class:"text-left"}," Publish "),i("th",{class:"text-left"}," UnPublish "),i("th",{class:"text-left"}," Delete "),i("th",{class:"text-left"}," Create ")])],-1),j=i("thead",null,[i("tr",null,[i("th",{class:"text-left"}," Assets "),i("th",{class:"text-left"}," All "),i("th",{class:"text-left"}," List "),i("th",{class:"text-left"}," View "),i("th",{class:"text-left"}," Save "),i("th",{class:"text-left"}," Publish "),i("th",{class:"text-left"}," UnPublish "),i("th",{class:"text-left"}," Delete "),i("th",{class:"text-left"}," Create ")])],-1),p=i("td",null,"Assets",-1),v={data(){var e=[],t=[];return this.objectSetting.forEach((l=>{l.name,e=[l.name+"ObjectList",l.name+"ObjectView",l.name+"ObjectSave",l.name+"ObjectPublish",l.name+"ObjectUnPublish",l.name+"ObjectDelete",l.name+"ObjectCreate"],l.name,t.push({objArr:e,vmodelObjSelected:!1,vmodelObjArr:[],objName:l.name})})),{successMessage:null,errorMessage:null,tab:null,tabPermission:null,name:[e=>!!e||"Required."],role:{permission:[]},documentRoles:["homeDocumentList","homeDocumentView","homeDocumentSave","homeDocumentPublish","homeDocumentUnPublish","homeDocumentDelete","homeDocumentCreate"],docRoleSelected:[],objectRoleSelected:[],assetsRoleSelected:[],assetsRoles:["assetsList","assetsView","assetsSave","assetsPublish","assetsUnPublish","assetsDelete","assetsCreate"],selectAllDocument:!1,selectAllAssets:!1,objectOptions:t}},watch:{},methods:{submitForm(e){this.objectOptions.forEach((e=>{this.objectRoleSelected=this.objectRoleSelected.concat(e.vmodelObjArr)})),this.role.permission=[...this.docRoleSelected,...this.objectRoleSelected,...this.assetsRoleSelected,...this.role.permission],this.$inertia.post(route("role_create"),this.role,{forceFormData:!0,onStart:()=>this.loading=!0,onFinish:()=>this.loading=!1}),setTimeout((()=>{this.successMessage=this.flash.success,this.errorMessage=this.flash.errors.key+" "+this.flash.errors.message}),1e3),this.loading=!1,setTimeout((()=>{this.successMessage=null,this.errorMessage=null}),3e3)},toggleAllCheckboxesDocument(){this.docRoleSelected=this.selectAllDocument?this.documentRoles.slice():[]},checkIfAllDocumentChecked(){this.selectAllDocument=this.docRoleSelected.length===this.documentRoles.length},toggleAllCheckboxesAssets(){this.assetsRoleSelected=this.selectAllAssets?this.assetsRoles.slice():[]},checkIfAllAssetsChecked(){this.selectAllAssets=this.assetsRoleSelected.length===this.assetsRoles.length},checkIfAllObjectChecked(e,t){this.objectOptions.forEach((t=>{e==t.objName&&(t.vmodelObjSelected=t.vmodelObjArr.length===t.objArr.length)}))},toggleAllCheckboxesObject(e){this.objectOptions.forEach((t=>{e==t.objName&&(t.vmodelObjArr=t.vmodelObjSelected?t.objArr.slice():[])}))}}},g=Object.assign(v,{layout:e},{__name:"Create",props:{error:String,success:String,flash:Object,objectSetting:Array},setup:e=>(e,v)=>{const g=t("v-icon"),A=t("v-btn"),x=t("v-app-bar"),V=t("v-alert"),_=t("v-tab"),C=t("v-tabs"),S=t("v-col"),O=t("v-lable"),k=t("v-text-field"),D=t("v-window-item"),R=t("v-checkbox"),y=t("Checkbox"),U=t("v-table"),P=t("v-row"),w=t("v-window");return l(),s(m,null,[a(x,{title:"Roles",density:"compact"},{default:o((()=>[a(A,{onClick:e.submitForm,color:"primary",variant:"elevated"},{default:o((()=>[a(g,{left:""},{default:o((()=>[u("mdi-table-check")])),_:1}),u(" Tạo mới ")])),_:1},8,["onClick"])])),_:1}),e.successMessage?(l(),c(V,{key:0,type:"success",dismissible:""},{default:o((()=>[u(n(e.successMessage),1)])),_:1})):d("",!0),e.errorMessage?(l(),c(V,{key:1,type:"error",dismissible:""},{default:o((()=>[u(n(e.errorMessage),1)])),_:1})):d("",!0),i("form",{onSubmit:v[11]||(v[11]=(...t)=>e.submitForm&&e.submitForm(...t))},[a(P,null,{default:o((()=>[a(S,{cols:"12"},{default:o((()=>[a(C,{modelValue:e.tab,"onUpdate:modelValue":v[0]||(v[0]=t=>e.tab=t),"background-color":"primary"},{default:o((()=>[a(_,{value:"informnation"},{default:o((()=>[u("Basic Informnation")])),_:1}),a(_,{value:"permission"},{default:o((()=>[u("Permission")])),_:1})])),_:1},8,["modelValue"])])),_:1}),a(S,{cols:"12"},{default:o((()=>[a(w,{modelValue:e.tab,"onUpdate:modelValue":v[10]||(v[10]=t=>e.tab=t)},{default:o((()=>[a(D,{value:"informnation"},{default:o((()=>[a(S,{cols:"12"},{default:o((()=>[a(O,null,{default:o((()=>[u(" Name ")])),_:1}),a(k,{modelValue:e.role.name,"onUpdate:modelValue":v[1]||(v[1]=t=>e.role.name=t),rules:e.name},null,8,["modelValue","rules"])])),_:1})])),_:1}),a(D,{value:"permission"},{default:o((()=>[a(P,null,{default:o((()=>[a(S,{cols:"12"},{default:o((()=>[a(C,{modelValue:e.tabPermission,"onUpdate:modelValue":v[2]||(v[2]=t=>e.tabPermission=t),direction:"horizontal","background-color":"primary"},{default:o((()=>[a(_,{value:"documents"},{default:o((()=>[a(g,{start:""},{default:o((()=>[u(" mdi-file-document-outline ")])),_:1}),u(" Documents ")])),_:1}),a(_,{value:"object"},{default:o((()=>[a(g,{start:""},{default:o((()=>[u(" mdi-cube-outline ")])),_:1}),u(" Object ")])),_:1}),a(_,{value:"assets"},{default:o((()=>[a(g,{start:""},{default:o((()=>[u(" mdi-image ")])),_:1}),u(" Assets ")])),_:1})])),_:1},8,["modelValue"]),a(w,{modelValue:e.tabPermission,"onUpdate:modelValue":v[9]||(v[9]=t=>e.tabPermission=t)},{default:o((()=>[a(D,{value:"documents"},{default:o((()=>[a(P,{justify:"center",class:"pa-4"},{default:o((()=>[a(S,{cols:"12"},{default:o((()=>[a(U,{"fixed-header":"",height:"300px"},{default:o((()=>[h,i("tbody",null,[i("tr",null,[b,i("td",null,[a(R,{modelValue:e.selectAllDocument,"onUpdate:modelValue":v[3]||(v[3]=t=>e.selectAllDocument=t),onChange:v[4]||(v[4]=t=>e.toggleAllCheckboxesDocument(e.item.objName)),type:"multi"},null,8,["modelValue"])]),(l(!0),s(m,null,r(e.documentRoles,(t=>(l(),s("td",null,[a(y,{modelValue:e.docRoleSelected,"onUpdate:modelValue":v[5]||(v[5]=t=>e.docRoleSelected=t),value:t,type:"multi",onChange:e.checkIfAllDocumentChecked},null,8,["modelValue","value","onChange"])])))),256))])])])),_:1})])),_:1})])),_:1})])),_:1}),a(D,{value:"object"},{default:o((()=>[a(P,{justify:"center",class:"pa-4"},{default:o((()=>[a(S,{cols:"12"},{default:o((()=>[a(U,{"fixed-header":""},{default:o((()=>[f,i("tbody",null,[(l(!0),s(m,null,r(e.objectOptions,((t,o)=>(l(),s("tr",null,[i("td",null,n(t.objName),1),i("td",null,[a(R,{modelValue:t.vmodelObjSelected,"onUpdate:modelValue":e=>t.vmodelObjSelected=e,onChange:l=>e.toggleAllCheckboxesObject(t.objName),type:"multi"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),(l(!0),s(m,null,r(t.objArr,(o=>(l(),s("td",null,[a(y,{modelValue:t.vmodelObjArr,"onUpdate:modelValue":e=>t.vmodelObjArr=e,value:o,type:"multi",onChange:l=>e.checkIfAllObjectChecked(t.objName,o)},null,8,["modelValue","onUpdate:modelValue","value","onChange"])])))),256))])))),256))])])),_:1})])),_:1})])),_:1})])),_:1}),a(D,{value:"assets"},{default:o((()=>[a(P,{justify:"center",class:"pa-4"},{default:o((()=>[a(S,{cols:"12"},{default:o((()=>[a(U,{"fixed-header":"",height:"300px"},{default:o((()=>[j,i("tbody",null,[i("tr",null,[p,i("td",null,[a(R,{modelValue:e.selectAllAssets,"onUpdate:modelValue":v[6]||(v[6]=t=>e.selectAllAssets=t),onChange:v[7]||(v[7]=t=>e.toggleAllCheckboxesAssets(e.item.objName)),type:"multi"},null,8,["modelValue"])]),(l(!0),s(m,null,r(e.assetsRoles,(t=>(l(),s("td",null,[a(y,{modelValue:e.assetsRoleSelected,"onUpdate:modelValue":v[8]||(v[8]=t=>e.assetsRoleSelected=t),value:t,type:"multi",onChange:e.checkIfAllAssetsChecked},null,8,["modelValue","value","onChange"])])))),256))])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})],32)],64)}});export{g as default};
