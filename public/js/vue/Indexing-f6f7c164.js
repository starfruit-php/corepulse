import e from"./Layout-c1354bc5.js";import{r as t,o as i,h as s,f as l,t as n,a,w as o,d,i as r,c as u,F as c,k as g}from"./app-215e319b.js";const f={class:"mainAppWrapper d-flex flex-column"},h={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},m={class:"--text"},p={class:"--text"},x={class:"--text"},b={class:"--text"},v={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-auto"},I={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},_={key:0,class:"reportTableWrapper py-4 d-flex flex-column overflow-visible"},C={class:"--filterBar d-flex align-center justify-end mb-2"},S={class:"tableListingWrapper d-flex flex-column"},y=l("br",null,null,-1),k=l("p",null,"Your sitemap index can be found here: https://panoee.com/sitemap_index.xml",-1),w={data:()=>({dialogSubmit:null,createUrl:null,tabAll:null,settingFile:null,settingJson:null,initClass:!0,classAll:!0,classConfig:[],documentAll:!0,documentConfig:[],toast:g.useToast({position:"top-right",style:{zIndex:"200"}}),seoIndexing:!1,seoIndexingListing:[],seoIndexingHeaders:[],seoIndexingFields:[],seoIndexingTotalItems:0,seoIndexingLimit:10,seoIndexingRouterList:{router:route("seo_indexing_listing")}}),mounted(){this.getListing()},watch:{classAll(e,t){if(e){for(var i=0;i<this.classConfig.length;i++)this.classConfig[i].check=!0;this.initClass=!1}else if(!this.initClass)for(i=0;i<this.classConfig.length;i++)this.classConfig[i].check=!1},classConfig:{deep:!0,handler(){this.classAll=this.classConfig.every((e=>e.check)),this.initClass=!0}}},methods:{getListing(){this.seoIndexing||fetch(route("seo_indexing_listing"),{method:"POST"}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((e=>{this.$nextTick((()=>{this.seoIndexingFields=e.fields,this.seoIndexingHeaders=e.fields,this.seoIndexingListing=e.listData,this.seoIndexingLimit=e.limit,this.seoIndexingTotalItems=e.totalItems,this.seoIndexing=!0}))})).catch((e=>{console.error("Lỗi xảy ra khi gửi yêu cầu:",e)})).finally((()=>{}))},createClick(){this.dialogSubmit=!0},handleUpload(){this.$refs.jsonFile.$el.querySelector('input[type="file"]').click()},uploadFile(e){this.settingFile=e.target.files[0]},createSubmit(){if(this.createUrl){const e=new FormData;e.append("url",this.createUrl),fetch(route("seo_indexing_create_submit"),{method:"POST",body:e}).then((e=>e.json())).then((e=>{e.success?this.message(e.message):this.message(e.message,"error")})).finally((()=>{this.dialogSubmit=!1,this.seoIndexing=!1,this.getListing()}))}},settingSubmit(){const e=new FormData;this.settingFile?e.append("file",this.settingFile):e.append("json",this.settingJson),fetch(route("seo_indexing_setting"),{method:"POST",body:e}).then((e=>e.json())).then((e=>{e.success?this.message(e.message):this.message(e.message,"error")})).catch((e=>{}))},getClassConfig(e){let t=new FormData;if(e)for(var[i,s]of(t.append("update",e),Object.entries(this.classConfig)))s.check&&t.append("keys[]",s.key);fetch(route("seo_sitemap_config"),{method:"POST",body:t}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((t=>{this.classConfig=t.classConfig,this.documentConfig=t.documentConfig;for(var i=0;i<t.classConfig.length;i++)if(!t.classConfig[i].check){this.classAll=!1;break}e&&this.message("Update success!")})).catch((e=>{})).finally((()=>{}))},message(e,t="success"){e&&setTimeout((()=>{this.toast.open({message:e,type:t})}),1e3)},exportExcel(){let e=new FormData,t=[],i=[];if(t=this.seoIndexingListing,i=this.seoIndexingHeaders,t&&i){for(var[s,l]of Object.entries(t))e.append("data[]",JSON.stringify(l));e.append("fields",JSON.stringify(i)),fetch(route("vuetify_export_excel"),{method:"POST",body:e}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download="indexing.xlsx",i.click(),URL.revokeObjectURL(t)})).catch((e=>{})).finally((()=>{}))}}}},L=Object.assign(w,{layout:e},{__name:"Indexing",setup:e=>(e,g)=>{const w=t("v-tab"),L=t("v-tabs"),U=t("v-btn"),F=t("CustomField"),j=t("DataTableServer"),A=t("v-window-item"),$=t("Textarea"),T=t("v-file-input"),O=t("v-card-item"),V=t("v-card"),R=t("v-window"),D=t("v-toolbar-title"),E=t("v-toolbar"),J=t("Input"),P=t("v-card-text"),W=t("v-card-actions"),q=t("v-dialog");return i(),s(c,null,[l("div",f,[l("div",h,[l("h1",m,n(e.$t("SEO Tools")),1),a(L,{modelValue:e.tabAll,"onUpdate:modelValue":g[0]||(g[0]=t=>e.tabAll=t),class:"mainTabPanel"},{default:o((()=>[a(w,{value:"indexingRequest"},{default:o((()=>[l("span",p,n(e.$t("Indexing Request")),1)])),_:1}),a(w,{value:"apiSetting"},{default:o((()=>[l("span",x,n(e.$t("API Setting")),1)])),_:1}),a(w,{value:"indexStatus"},{default:o((()=>[l("span",b,n(e.$t("Index Status")),1)])),_:1})])),_:1},8,["modelValue"])]),l("div",v,[l("div",I,[a(R,{modelValue:e.tabAll,"onUpdate:modelValue":g[7]||(g[7]=t=>e.tabAll=t)},{default:o((()=>[a(A,{key:"indexingRequest",value:"indexingRequest"},{default:o((()=>[e.seoIndexing?(i(),s("div",_,[l("div",C,[a(U,{"prepend-icon":"mdi-plus",onClick:g[1]||(g[1]=t=>e.createClick())},{default:o((()=>[d(n(e.$t("Create Submit")),1)])),_:1}),a(F,{headers:e.seoIndexingHeaders,list:e.seoIndexingFields,"onUpdate:headers":g[2]||(g[2]=t=>e.seoIndexingHeaders=t)},null,8,["headers","list"]),a(U,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:g[3]||(g[3]=t=>e.exportExcel())},{default:o((()=>[d(n(e.$t("Export")),1)])),_:1})]),l("div",S,[a(j,{listing:e.seoIndexingListing,router:e.seoIndexingRouterList,"total-items":e.seoIndexingTotalItems,headers:e.seoIndexingHeaders,limit:e.seoIndexingLimit,fetchData:!0,multipleSelecte:!0,"onUpdate:data":g[4]||(g[4]=t=>e.seoIndexingListing=t),action:e.seoIndexingAction,selectedAction:e.seoIndexingSelectAction},null,8,["listing","router","total-items","headers","limit","action","selectedAction"])])])):r("",!0)])),_:1}),a(A,{key:"apiSetting",value:"apiSetting"},{default:o((()=>[a(V,{class:"mx-auto"},{default:o((()=>[a(O,null,{default:o((()=>[l("h3",null,n(e.$t("General")),1),l("h4",null,n(e.$t("Setting")),1),a($,{modelValue:e.settingJson,"onUpdate:modelValue":g[5]||(g[5]=t=>e.settingJson=t)},null,8,["modelValue"]),l("h4",null,n(e.$t("Or upload JSON file")),1),a(U,{variant:"text","prepend-icon":"mdi-upload",onClick:e.handleUpload},{default:o((()=>[d(n(e.$t("Upload file")),1)])),_:1},8,["onClick"]),a(T,{class:"d-none",ref:"jsonFile",onChange:e.uploadFile,accept:".json"},null,8,["onChange"]),y,a(U,{"prepend-icon":"mdi-setting",onClick:g[6]||(g[6]=t=>e.settingSubmit())},{default:o((()=>[d(n(e.$t("Save changes")),1)])),_:1})])),_:1})])),_:1})])),_:1}),a(A,{key:"indexStatus",value:"indexStatus"},{default:o((()=>[a(V,{class:"mx-auto"},{default:o((()=>[a(O,null,{default:o((()=>[l("h3",null,n(e.$t("General")),1),k])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])])]),e.dialogSubmit?(i(),u(q,{key:0,modelValue:e.dialogSubmit,"onUpdate:modelValue":g[11]||(g[11]=t=>e.dialogSubmit=t),width:"600"},{default:o((()=>[a(V,null,{default:o((()=>[a(E,{density:"compact"},{default:o((()=>[a(D,{text:"Create Submit",class:""})])),_:1}),a(P,null,{default:o((()=>[a(J,{label:"url",modelValue:e.createUrl,"onUpdate:modelValue":g[8]||(g[8]=t=>e.createUrl=t)},null,8,["modelValue"])])),_:1}),a(W,{class:"justify-end"},{default:o((()=>[a(U,{variant:"text",onClick:g[9]||(g[9]=t=>e.dialogSubmit=!e.dialogSubmit)},{default:o((()=>[d(n(e.$t("Close")),1)])),_:1}),a(U,{variant:"elevated",onClick:g[10]||(g[10]=t=>e.createSubmit())},{default:o((()=>[d(n(e.$t("Add")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):r("",!0)],64)}});export{L as default};
