import e from"./Layout-918b3e57.js";import{r as t,o as l,h as i,f as n,t as s,a,w as o,d,i as c,F as u,l as r,c as g,y as m,x as h,M as f,k as p}from"./app-6ec2fb0d.js";const x={class:"mainAppWrapper d-flex flex-column"},v={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},b={class:"--text"},S={class:"--text"},C={class:"--text"},_={class:"--text"},I={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-auto"},k={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},y={key:0,class:"reportTableWrapper py-4 d-flex flex-column overflow-visible"},A={class:"--filterBar d-flex align-center justify-end mb-2"},V={class:"tableListingWrapper d-flex flex-column"},w={key:0,target:"_blank"},F=n("h4",null,"Object",-1),U={class:"flex-container"},L={class:"flex-item"},j={class:"flex-item"},$=n("h4",null,"Document",-1),T={class:"flex-container"},D={class:"flex-item"},O={class:"flex-item"},J=n("br",null,null,-1),P=n("p",null,"Your sitemap index can be found here: https://panoee.com/sitemap_index.xml",-1),R={data(){let e=[{title:"Xóa",icon:"mdi-delete-outline",url:{path:"seo_indexing_delete",data:{}},component:h,post:!0,reload:!1}],t=[{title:"Delete",icon:"mdi-delete-outline",url:{path:"seo_indexing_delete",data:{all:!0},content:{title:"Delete",content:"Are you sure you want to delete all selected objects",confirm:"Delete"}},component:f,post:!0,reload:!1}];return{ModalDelete:m(h),ModalSelected:m(f),dialogSubmit:null,createUrl:null,tabAll:null,settingIndexing:null,settingFile:null,settingFilePreview:null,settingJson:null,initClass:!1,classAll:!0,classConfig:[],documentAll:!0,documentConfig:[],initDocument:!1,toast:p.useToast({position:"top-right",style:{zIndex:"200"}}),seoIndexingSelectAction:t,seoIndexingAction:e,seoIndexing:!1,seoIndexingListing:[],seoIndexingHeaders:[],seoIndexingFields:[],seoIndexingTotalItems:0,seoIndexingLimit:10,seoIndexingRouterList:{router:route("seo_indexing_listing")}}},mounted(){this.getSetting(),this.getListing()},watch:{classAll(e,t){this.$nextTick((()=>{if(e)for(var t=0;t<this.classConfig.length;t++)this.classConfig[t].check=!0;if(!e&&!this.initClass)for(t=0;t<this.classConfig.length;t++)this.classConfig[t].check=!1;this.initClass=!1}))},classConfig:{deep:!0,handler(){const e=this.classConfig.every((e=>e.check));this.classConfig.forEach((e=>{e.check||(this.classAll=!1,this.initClass=!0)})),e!=this.classAll&&(this.classAll=e)}},documentAll(e,t){this.$nextTick((()=>{if(e)for(var t=0;t<this.documentConfig.length;t++)this.documentConfig[t].generateSitemap=!0;if(!e&&!this.initDocument)for(t=0;t<this.documentConfig.length;t++)this.documentConfig[t].generateSitemap=!1;this.initDocument=!1}))},documentConfig:{deep:!0,handler(){const e=this.documentConfig.every((e=>e.generateSitemap));this.documentConfig.forEach((e=>{e.generateSitemap||(this.documentAll=!1,this.initDocument=!0)})),e!=this.documentAll&&(this.documentAll=e)}},settingJson(e,t){e&&(this.settingFile="",this.settingFilePreview="")}},methods:{getSetting(){fetch(route("seo_indexing_setting"),{method:"GET"}).then((e=>e.json())).then((e=>{"json"==e.type&&(this.settingJson=e.data),"file"==e.type&&(this.settingFilePreview=e.data),this.classConfig=e.classes;for(var t=0;t<e.classes.length;t++)if(!e.classes[t].check){this.classAll=!1,this.initClass=!0;break}this.documentConfig=e.documents;for(t=0;t<e.documents.length;t++)if(!e.documents[t].generateSitemap){this.documentAll=!1,this.initDocument=!0;break}})).catch((e=>{}))},getListing(){this.seoIndexing||fetch(route("seo_indexing_listing"),{method:"POST"}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((e=>{this.$nextTick((()=>{this.seoIndexingFields=e.fields,this.seoIndexingHeaders=e.fields,this.seoIndexingListing=e.listData,this.seoIndexingLimit=e.limit,this.seoIndexingTotalItems=e.totalItems,this.seoIndexing=!0}))})).catch((e=>{console.error("Lỗi xảy ra khi gửi yêu cầu:",e)})).finally((()=>{}))},createClick(){this.dialogSubmit=!0},handleUpload(){this.$refs.jsonFile.$el.querySelector('input[type="file"]').click()},uploadFile(e){this.settingFile=e.target.files[0],this.settingFilePreview=this.settingFile.name,this.settingJson=""},createSubmit(){if(this.createUrl){const e=new FormData;e.append("url",this.createUrl),fetch(route("seo_indexing_create_submit"),{method:"POST",body:e}).then((e=>e.json())).then((e=>{e.success?this.message(e.message):this.message(e.message,"error")})).finally((()=>{this.dialogSubmit=!1,this.seoIndexing=!1,this.getListing()}))}},settingSubmit(){const e=new FormData;this.settingFile?e.append("file",this.settingFile):this.settingJson&&e.append("json",this.settingJson),e.append("classes",JSON.stringify(this.classConfig)),e.append("documents",JSON.stringify(this.documentConfig)),fetch(route("seo_indexing_setting"),{method:"POST",body:e}).then((e=>e.json())).then((e=>{e.success?this.message(e.message):this.message(e.message,"error")})).catch((e=>{}))},message(e,t="success"){e&&setTimeout((()=>{this.toast.open({message:e,type:t})}),1e3)},exportExcel(){let e=new FormData,t=[],l=[];if(t=this.seoIndexingListing,l=this.seoIndexingHeaders,t&&l){for(var[i,n]of Object.entries(t))e.append("data[]",JSON.stringify(n));e.append("fields",JSON.stringify(l)),fetch(route("vuetify_export_excel"),{method:"POST",body:e}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e),l=document.createElement("a");l.href=t,l.download="indexing.xlsx",l.click(),URL.revokeObjectURL(t)})).catch((e=>{})).finally((()=>{}))}}}},E=Object.assign(R,{layout:e},{__name:"Indexing",setup:e=>(e,m)=>{const h=t("v-tab"),f=t("v-tabs"),p=t("v-btn"),R=t("CustomField"),E=t("DataTableServer"),W=t("v-window-item"),q=t("Textarea"),H=t("v-file-input"),N=t("v-checkbox"),G=t("v-card-item"),M=t("v-card"),B=t("v-window"),z=t("v-toolbar-title"),X=t("v-toolbar"),Y=t("Input"),K=t("v-card-text"),Q=t("v-card-actions"),Z=t("v-dialog");return l(),i(u,null,[n("div",x,[n("div",v,[n("h1",b,s(e.$t("SEO Tools")),1),a(f,{modelValue:e.tabAll,"onUpdate:modelValue":m[0]||(m[0]=t=>e.tabAll=t),class:"mainTabPanel"},{default:o((()=>[a(h,{value:"indexingRequest"},{default:o((()=>[n("span",S,s(e.$t("Indexing Request")),1)])),_:1}),a(h,{value:"apiSetting"},{default:o((()=>[n("span",C,s(e.$t("API Setting")),1)])),_:1}),a(h,{value:"indexStatus"},{default:o((()=>[n("span",_,s(e.$t("Index Status")),1)])),_:1})])),_:1},8,["modelValue"])]),n("div",I,[n("div",k,[a(B,{modelValue:e.tabAll,"onUpdate:modelValue":m[9]||(m[9]=t=>e.tabAll=t)},{default:o((()=>[a(W,{key:"indexingRequest",value:"indexingRequest"},{default:o((()=>[e.seoIndexing?(l(),i("div",y,[n("div",A,[a(p,{"prepend-icon":"mdi-plus",onClick:m[1]||(m[1]=t=>e.createClick())},{default:o((()=>[d(s(e.$t("Create Submit")),1)])),_:1}),a(R,{headers:e.seoIndexingHeaders,list:e.seoIndexingFields,"onUpdate:headers":m[2]||(m[2]=t=>e.seoIndexingHeaders=t)},null,8,["headers","list"]),a(p,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:m[3]||(m[3]=t=>e.exportExcel())},{default:o((()=>[d(s(e.$t("Export")),1)])),_:1})]),n("div",V,[a(E,{listing:e.seoIndexingListing,router:e.seoIndexingRouterList,"total-items":e.seoIndexingTotalItems,headers:e.seoIndexingHeaders,limit:e.seoIndexingLimit,fetchData:!0,multipleSelecte:!0,"onUpdate:data":m[4]||(m[4]=t=>e.seoIndexingListing=t),action:e.seoIndexingAction,selectedAction:e.seoIndexingSelectAction},null,8,["listing","router","total-items","headers","limit","action","selectedAction"])])])):c("",!0)])),_:1}),a(W,{key:"apiSetting",value:"apiSetting"},{default:o((()=>[a(M,{class:"mx-auto"},{default:o((()=>[a(G,null,{default:o((()=>[n("h3",null,s(e.$t("General")),1),n("h4",null,s(e.$t("Setting")),1),a(q,{modelValue:e.settingJson,"onUpdate:modelValue":m[5]||(m[5]=t=>e.settingJson=t)},null,8,["modelValue"]),n("h4",null,s(e.$t("Or upload JSON file")),1),a(p,{variant:"text","prepend-icon":"mdi-upload",onClick:e.handleUpload},{default:o((()=>[d(s(e.$t("Upload file")),1)])),_:1},8,["onClick"]),a(H,{class:"d-none",ref:"jsonFile",onChange:e.uploadFile,accept:".json"},null,8,["onChange"]),e.settingFilePreview?(l(),i("a",w,s(e.settingFilePreview),1)):c("",!0),F,n("div",U,[n("div",L,[a(N,{modelValue:e.classAll,"onUpdate:modelValue":m[6]||(m[6]=t=>e.classAll=t),label:"All"},null,8,["modelValue"])]),(l(!0),i(u,null,r(e.classConfig,((e,t)=>(l(),i("div",j,[a(N,{label:e.name,modelValue:e.check,"onUpdate:modelValue":t=>e.check=t},null,8,["label","modelValue","onUpdate:modelValue"])])))),256))]),$,n("div",T,[n("div",D,[a(N,{modelValue:e.documentAll,"onUpdate:modelValue":m[7]||(m[7]=t=>e.documentAll=t),label:"All"},null,8,["modelValue"])]),(l(!0),i(u,null,r(e.documentConfig,((e,t)=>(l(),i("div",O,[a(N,{label:e.key,modelValue:e.generateSitemap,"onUpdate:modelValue":t=>e.generateSitemap=t},null,8,["label","modelValue","onUpdate:modelValue"])])))),256))]),J,a(p,{"prepend-icon":"mdi-setting",onClick:m[8]||(m[8]=t=>e.settingSubmit())},{default:o((()=>[d(s(e.$t("Save changes")),1)])),_:1})])),_:1})])),_:1})])),_:1}),a(W,{key:"indexStatus",value:"indexStatus"},{default:o((()=>[a(M,{class:"mx-auto"},{default:o((()=>[a(G,null,{default:o((()=>[n("h3",null,s(e.$t("General")),1),P])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])])]),e.dialogSubmit?(l(),g(Z,{key:0,modelValue:e.dialogSubmit,"onUpdate:modelValue":m[13]||(m[13]=t=>e.dialogSubmit=t),width:"600"},{default:o((()=>[a(M,null,{default:o((()=>[a(X,{density:"compact"},{default:o((()=>[a(z,{text:"Create Submit",class:""})])),_:1}),a(K,null,{default:o((()=>[a(Y,{label:"url",modelValue:e.createUrl,"onUpdate:modelValue":m[10]||(m[10]=t=>e.createUrl=t)},null,8,["modelValue"])])),_:1}),a(Q,{class:"justify-end"},{default:o((()=>[a(p,{variant:"text",onClick:m[11]||(m[11]=t=>e.dialogSubmit=!e.dialogSubmit)},{default:o((()=>[d(s(e.$t("Close")),1)])),_:1}),a(p,{variant:"elevated",onClick:m[12]||(m[12]=t=>e.createSubmit())},{default:o((()=>[d(s(e.$t("Add")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):c("",!0)],64)}});export{E as default};
