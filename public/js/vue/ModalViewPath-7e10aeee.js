import{_ as e,r as t,o as l,h as a,f as i,a as s,w as n,d as o,C as c,c as d,i as r,F as p,l as h,t as u}from"./app-d4bd4684.js";const m={props:{modelValue:[Object,Array,String],name:String,label:String,hint:String,disabled:{type:Boolean,default:!1},options:[Object,Array],dataSearch:[Object,Array],mandatory:{type:Boolean,default:!1}},data(){return{internalValue:this.modelValue??"",dialogSearch:!1,search:null,listType:["object","document","asset"],listAsset:[],listDataObject:[],listDocument:[],allowedTypes:this.options?this.options.allowedTypes:null,isLoading:!1,allowedTargets:["_blank","_self","_top","_parent"],timeout:null}},watch:{modalValue(e,t){this.internalValue=e},dialogSearch(e){e||(this.search=null,this.handleClearableClick())},internalValue:{handler:function(e,t){this.$emit("update:modelValue",JSON.parse(JSON.stringify(e)))},deep:!0}},methods:{handleClearableClick(){this.listAsset=null,this.listDataObject=null,this.listDocument=null},handleSearchInput(){clearTimeout(this.timeout),this.isLoading=!0,this.timeout=setTimeout((()=>{this.fetchSearchData()}),1500)},fetchSearchData(){if(this.search){let e=["dataObject","document","asset"];this.listType&&this.listType.length>0&&(e=this.listType),this.handleClearableClick(),e.forEach(((e,t)=>{const l=new FormData;"object"==e&&(e="dataObject"),l.append("type[]",e),l.append("search",this.search),e="dataObject"==e?"listDataObject":"document"==e?"listDocument":"listAsset",fetch(route("search_tree"),{method:"POST",body:l}).then((e=>{if(e.ok)return e.json();throw new Error("Có lỗi khi gửi yêu cầu POST.")})).then((t=>{this[e]=t})).catch((e=>{console.error(e)}))})),this.isLoading=!1}else this.isLoading=!1,this.handleClearableClick()},copyPath(e){navigator.clipboard.writeText(e).then((()=>{})).catch((e=>{console.error("Lỗi khi sao chép: ",e)})),this.internalValue=e,this.dialogSearch=!1}}},y={class:"d-flex align-end mb-2"},b={class:"--formContent componentField-input flex-1-1"},f=i("label",{for:""},"Path",-1),g={class:"d-flex justify-space-between align-center w-100 pe-6"},v={class:"d-flex w-50"},T={class:"--body overflow-auto"},w={class:"--icon me-4"},S={class:"--icon me-4"},_={class:"--icon me-4"};const k=e(m,[["render",function(e,m,k,C,V,j){const D=t("v-text-field"),O=t("v-btn"),x=t("v-toolbar-title"),A=t("v-icon"),z=t("v-autocomplete"),L=t("v-toolbar"),P=t("v-progress-linear"),F=t("v-list-item"),U=t("v-list"),G=t("v-card-text"),B=t("v-card"),E=t("v-dialog");return l(),a(p,null,[i("div",y,[i("div",b,[f,s(D,{variant:"outlined",density:"compact",modelValue:V.internalValue,"onUpdate:modelValue":m[0]||(m[0]=e=>V.internalValue=e),disabled:k.disabled,"hide-details":"auto"},null,8,["modelValue","disabled"])]),s(O,{class:"btn-primary ml-2",onClick:m[1]||(m[1]=e=>V.dialogSearch=!0),size:"small",icon:"mdi-magnify"})]),s(E,{class:"dialog-dataSearch",modelValue:V.dialogSearch,"onUpdate:modelValue":m[8]||(m[8]=e=>V.dialogSearch=e),width:"560px"},{default:n((()=>[s(B,null,{default:n((()=>[s(L,null,{default:n((()=>[i("div",g,[s(x,{class:"flex-0-0"},{default:n((()=>[o(" Choose content ")])),_:1}),i("div",v,[s(D,{density:"compact",variant:"solo","append-inner-icon":"mdi-magnify","single-line":"","hide-details":"",modelValue:V.search,"onUpdate:modelValue":m[3]||(m[3]=e=>V.search=e),onKeydown:m[4]||(m[4]=c((e=>j.fetchSearchData()),["enter"])),onInput:m[5]||(m[5]=e=>j.fetchSearchData()),clearable:"","onClick:clear":m[6]||(m[6]=e=>j.handleClearableClick()),class:"--formContent componentField-input me-2"},{"append-inner":n((()=>[s(A,{onClick:m[2]||(m[2]=e=>j.fetchSearchData())},{default:n((()=>[o("mdi-magnify")])),_:1})])),_:1},8,["modelValue"]),s(z,{class:"--formContent componentField-select d-none",label:"Type",density:"compact",width:"120","hide-details":"",items:V.allowedTypes&&V.allowedTypes.length?V.allowedTypes:["object","document","asset"],chips:!0,"closable-chips":!0,variant:"solo",multiple:"",modelValue:V.listType,"onUpdate:modelValue":m[7]||(m[7]=e=>V.listType=e)},null,8,["items","modelValue"])])])])),_:1}),s(G,{class:"pa-0"},{default:n((()=>[i("div",T,[V.isLoading?(l(),d(P,{key:0,active:V.isLoading,indeterminate:""},null,8,["active"])):r("",!0),s(U,{density:"compact",class:"px-2"},{default:n((()=>[V.allowedTypes&&(!V.allowedTypes.length||V.allowedTypes.includes("document"))||V.listType&&V.listType.includes("document")?(l(),a(p,{key:0},[s(F,{type:"type",title:"Document"}),(l(!0),a(p,null,h(V.listDocument,(e=>(l(),d(F,{key:e.name,title:e.name,subtitle:"path: "+e.path,class:"itemDataSearch"},{prepend:n((()=>[i("div",w,[s(A,null,{default:n((()=>[o(u(e.icon),1)])),_:2},1024)])])),append:n((()=>[s(O,{class:"btn-primary --btn-select","prepend-icon":"mdi-content-copy",onClick:t=>j.copyPath(e.path),elevated:"",size:"small"},{default:n((()=>[o(" Select ")])),_:2},1032,["onClick"]),s(O,{class:"btn-primary ms-2","append-icon":"mdi-arrow-right",elevated:"",size:"small"},{default:n((()=>[o(" Go to ")])),_:1})])),_:2},1032,["title","subtitle"])))),128))],64)):r("",!0),V.allowedTypes&&(!V.allowedTypes.length||V.allowedTypes.includes("object"))||V.listType&&V.listType.includes("object")?(l(),a(p,{key:1},[s(F,{type:"type",title:"Object"}),(l(!0),a(p,null,h(V.listDataObject,(e=>(l(),d(F,{key:e.name,title:e.name,subtitle:"path: "+e.path,class:"itemDataSearch"},{prepend:n((()=>[i("div",S,[s(A,null,{default:n((()=>[o(u(e.icon),1)])),_:2},1024)])])),append:n((()=>[s(O,{class:"btn-primary --btn-select","prepend-icon":"mdi-content-copy",onClick:t=>j.copyPath(e.path),elevated:"",size:"small"},{default:n((()=>[o(" Select ")])),_:2},1032,["onClick"]),s(O,{class:"btn-primary ms-2","append-icon":"mdi-arrow-right",elevated:"",size:"small"},{default:n((()=>[o(" Go to ")])),_:1})])),_:2},1032,["title","subtitle"])))),128))],64)):r("",!0),V.allowedTypes&&(!V.allowedTypes.length||V.allowedTypes.includes("asset"))||V.listType&&V.listType.includes("asset")?(l(),a(p,{key:2},[s(F,{type:"type",title:"Asset"}),(l(!0),a(p,null,h(V.listAsset,(e=>(l(),d(F,{key:e.name,title:e.name,subtitle:"path: "+e.path,class:"itemDataSearch"},{prepend:n((()=>[i("div",_,[s(A,null,{default:n((()=>[o(u(e.icon),1)])),_:2},1024)])])),append:n((()=>[s(O,{class:"btn-primary --btn-select","prepend-icon":"mdi-content-copy",onClick:t=>j.copyPath(e.path),elevated:"",size:"small"},{default:n((()=>[o(" Select ")])),_:2},1032,["onClick"]),s(O,{class:"btn-primary ms-2","append-icon":"mdi-arrow-right",elevated:"",size:"small"},{default:n((()=>[o(" Go to ")])),_:1})])),_:2},1032,["title","subtitle"])))),128))],64)):r("",!0)])),_:1})])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}]]);export{k as default};
