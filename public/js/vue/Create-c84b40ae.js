import e from"./Layout-9042b491.js";import{r as l,o as t,h as s,a,w as o,d as u,c,t as n,i as d,f as i,F as m,l as h}from"./app-a89888b6.js";const r=i("thead",null,[i("tr",null,[i("th",{class:"text-left"}," Documents "),i("th",{class:"text-left"}," All "),i("th",{class:"text-left"}," List "),i("th",{class:"text-left"}," View "),i("th",{class:"text-left"}," Save "),i("th",{class:"text-left"}," Publish "),i("th",{class:"text-left"}," UnPublish "),i("th",{class:"text-left"}," Delete "),i("th",{class:"text-left"}," Create ")])],-1),b=i("td",null,"Documents",-1),f=i("thead",null,[i("tr",null,[i("th",{class:"text-left"}," Object "),i("th",{class:"text-left"}," All "),i("th",{class:"text-left"}," List "),i("th",{class:"text-left"}," View "),i("th",{class:"text-left"}," Save "),i("th",{class:"text-left"}," Publish "),i("th",{class:"text-left"}," UnPublish "),i("th",{class:"text-left"}," Delete "),i("th",{class:"text-left"}," Create ")])],-1),j=i("thead",null,[i("tr",null,[i("th",{class:"text-left"}," Assets "),i("th",{class:"text-left"}," All "),i("th",{class:"text-left"}," List "),i("th",{class:"text-left"}," View "),i("th",{class:"text-left"}," Save "),i("th",{class:"text-left"}," Publish "),i("th",{class:"text-left"}," UnPublish "),i("th",{class:"text-left"}," Delete "),i("th",{class:"text-left"}," Create ")])],-1),p=i("td",null,"Assets",-1),g={data(){var e=[],l=[];return this.objectSetting.forEach((t=>{t.name,e=[t.name+"ObjectList",t.name+"ObjectView",t.name+"ObjectSave",t.name+"ObjectPublish",t.name+"ObjectUnPublish",t.name+"ObjectDelete",t.name+"ObjectCreate"],t.name,l.push({objArr:e,vmodelObjSelected:!1,vmodelObjArr:[],objName:t.name})})),{successMessage:null,errorMessage:null,tab:null,tabPermission:null,name:[e=>!!e||"Required."],role:{permission:[]},documentRoles:["homeDocumentList","homeDocumentView","homeDocumentSave","homeDocumentPublish","homeDocumentUnPublish","homeDocumentDelete","homeDocumentCreate"],docRoleSelected:[],objectRoleSelected:[],assetsRoleSelected:[],assetsRoles:["assetsList","assetsView","assetsSave","assetsPublish","assetsUnPublish","assetsDelete","assetsCreate"],selectAllDocument:!1,selectAllAssets:!1,objectOptions:l}},watch:{},methods:{submitForm(e){this.objectOptions.forEach((e=>{this.objectRoleSelected=this.objectRoleSelected.concat(e.vmodelObjArr)})),this.role.permission=[...this.docRoleSelected,...this.objectRoleSelected,...this.assetsRoleSelected,...this.role.permission],this.$inertia.post(route("role_create"),this.role,{forceFormData:!0,onStart:()=>this.loading=!0,onFinish:()=>this.loading=!1}),setTimeout((()=>{this.successMessage=this.flash.success,this.errorMessage=this.flash.errors.key+" "+this.flash.errors.message}),1e3),this.loading=!1,setTimeout((()=>{this.successMessage=null,this.errorMessage=null}),3e3)},toggleAllCheckboxesDocument(){this.docRoleSelected=this.selectAllDocument?this.documentRoles.slice():[]},checkIfAllDocumentChecked(){this.selectAllDocument=this.docRoleSelected.length===this.documentRoles.length},toggleAllCheckboxesAssets(){this.assetsRoleSelected=this.selectAllAssets?this.assetsRoles.slice():[]},checkIfAllAssetsChecked(){this.selectAllAssets=this.assetsRoleSelected.length===this.assetsRoles.length},checkIfAllObjectChecked(e,l){this.objectOptions.forEach((l=>{e==l.objName&&(l.vmodelObjSelected=l.vmodelObjArr.length===l.objArr.length)}))},toggleAllCheckboxesObject(e){this.objectOptions.forEach((l=>{e==l.objName&&(l.vmodelObjArr=l.vmodelObjSelected?l.objArr.slice():[])}))}}},v=Object.assign(g,{layout:e},{__name:"Create",props:{error:String,success:String,flash:Object,objectSetting:Array},setup:e=>(e,g)=>{const v=l("v-icon"),A=l("v-btn"),x=l("v-app-bar"),V=l("v-alert"),_=l("v-tab"),S=l("v-tabs"),C=l("v-col"),O=l("v-lable"),k=l("v-text-field"),D=l("v-window-item"),R=l("v-checkbox"),y=l("Checkbox"),U=l("v-table"),P=l("v-row"),w=l("v-window");return t(),s(m,null,[a(x,{title:"Roles",density:"compact"},{default:o((()=>[a(A,{onClick:e.submitForm,color:"primary",variant:"elevated"},{default:o((()=>[a(v,{left:""},{default:o((()=>[u("mdi-table-check")])),_:1}),u(" Tạo mới ")])),_:1},8,["onClick"])])),_:1}),e.successMessage?(t(),c(V,{key:0,type:"success",dismissible:""},{default:o((()=>[u(n(e.successMessage),1)])),_:1})):d("",!0),e.errorMessage?(t(),c(V,{key:1,type:"error",dismissible:""},{default:o((()=>[u(n(e.errorMessage),1)])),_:1})):d("",!0),i("form",{onSubmit:g[11]||(g[11]=(...l)=>e.submitForm&&e.submitForm(...l))},[a(P,null,{default:o((()=>[a(C,{cols:"12"},{default:o((()=>[a(S,{modelValue:e.tab,"onUpdate:modelValue":g[0]||(g[0]=l=>e.tab=l),"background-color":"primary"},{default:o((()=>[a(_,{value:"informnation"},{default:o((()=>[u("Basic Informnation")])),_:1}),a(_,{value:"permission"},{default:o((()=>[u("Permission")])),_:1})])),_:1},8,["modelValue"])])),_:1}),a(C,{cols:"12"},{default:o((()=>[a(w,{modelValue:e.tab,"onUpdate:modelValue":g[10]||(g[10]=l=>e.tab=l)},{default:o((()=>[a(D,{value:"informnation"},{default:o((()=>[a(C,{cols:"12"},{default:o((()=>[a(O,null,{default:o((()=>[u(" Name ")])),_:1}),a(k,{modelValue:e.role.name,"onUpdate:modelValue":g[1]||(g[1]=l=>e.role.name=l),rules:e.name},null,8,["modelValue","rules"])])),_:1})])),_:1}),a(D,{value:"permission"},{default:o((()=>[a(P,null,{default:o((()=>[a(C,{cols:"12"},{default:o((()=>[a(S,{modelValue:e.tabPermission,"onUpdate:modelValue":g[2]||(g[2]=l=>e.tabPermission=l),direction:"horizontal","background-color":"primary"},{default:o((()=>[a(_,{value:"documents"},{default:o((()=>[a(v,{start:""},{default:o((()=>[u(" mdi-file-document-outline ")])),_:1}),u(" Documents ")])),_:1}),a(_,{value:"object"},{default:o((()=>[a(v,{start:""},{default:o((()=>[u(" mdi-cube-outline ")])),_:1}),u(" Object ")])),_:1}),a(_,{value:"assets"},{default:o((()=>[a(v,{start:""},{default:o((()=>[u(" mdi-image ")])),_:1}),u(" Assets ")])),_:1})])),_:1},8,["modelValue"]),a(w,{modelValue:e.tabPermission,"onUpdate:modelValue":g[9]||(g[9]=l=>e.tabPermission=l)},{default:o((()=>[a(D,{value:"documents"},{default:o((()=>[a(P,{justify:"center",class:"pa-4"},{default:o((()=>[a(C,{cols:"12"},{default:o((()=>[a(U,{"fixed-header":"",height:"300px"},{default:o((()=>[r,i("tbody",null,[i("tr",null,[b,i("td",null,[a(R,{modelValue:e.selectAllDocument,"onUpdate:modelValue":g[3]||(g[3]=l=>e.selectAllDocument=l),onChange:g[4]||(g[4]=l=>e.toggleAllCheckboxesDocument(e.item.objName)),type:"multi"},null,8,["modelValue"])]),(t(!0),s(m,null,h(e.documentRoles,(l=>(t(),s("td",null,[a(y,{modelValue:e.docRoleSelected,"onUpdate:modelValue":g[5]||(g[5]=l=>e.docRoleSelected=l),value:l,type:"multi",onChange:e.checkIfAllDocumentChecked},null,8,["modelValue","value","onChange"])])))),256))])])])),_:1})])),_:1})])),_:1})])),_:1}),a(D,{value:"object"},{default:o((()=>[a(P,{justify:"center",class:"pa-4"},{default:o((()=>[a(C,{cols:"12"},{default:o((()=>[a(U,{"fixed-header":""},{default:o((()=>[f,i("tbody",null,[(t(!0),s(m,null,h(e.objectOptions,((l,o)=>(t(),s("tr",null,[i("td",null,n(l.objName),1),i("td",null,[a(R,{modelValue:l.vmodelObjSelected,"onUpdate:modelValue":e=>l.vmodelObjSelected=e,onChange:t=>e.toggleAllCheckboxesObject(l.objName),type:"multi"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),(t(!0),s(m,null,h(l.objArr,(o=>(t(),s("td",null,[a(y,{modelValue:l.vmodelObjArr,"onUpdate:modelValue":e=>l.vmodelObjArr=e,value:o,type:"multi",onChange:t=>e.checkIfAllObjectChecked(l.objName,o)},null,8,["modelValue","onUpdate:modelValue","value","onChange"])])))),256))])))),256))])])),_:1})])),_:1})])),_:1})])),_:1}),a(D,{value:"assets"},{default:o((()=>[a(P,{justify:"center",class:"pa-4"},{default:o((()=>[a(C,{cols:"12"},{default:o((()=>[a(U,{"fixed-header":"",height:"300px"},{default:o((()=>[j,i("tbody",null,[i("tr",null,[p,i("td",null,[a(R,{modelValue:e.selectAllAssets,"onUpdate:modelValue":g[6]||(g[6]=l=>e.selectAllAssets=l),onChange:g[7]||(g[7]=l=>e.toggleAllCheckboxesAssets(e.item.objName)),type:"multi"},null,8,["modelValue"])]),(t(!0),s(m,null,h(e.assetsRoles,(l=>(t(),s("td",null,[a(y,{modelValue:e.assetsRoleSelected,"onUpdate:modelValue":g[8]||(g[8]=l=>e.assetsRoleSelected=l),value:l,type:"multi",onChange:e.checkIfAllAssetsChecked},null,8,["modelValue","value","onChange"])])))),256))])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})],32)],64)}});export{v as default};
