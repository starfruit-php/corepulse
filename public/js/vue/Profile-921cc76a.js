import{am as e,o as a,c as t,a as s,k as o,q as i,N as l,J as r}from"./@vue-9ee83fb6.js";import n from"./Layout-808b9c88.js";import{I as p,E as d}from"./app-f8aa4d4b.js";import{d as m}from"./vue-toast-notification-f2a3de7a.js";import"./@vueuse-3c3b27e0.js";import"./unidecode-5a54da0f.js";import"./@ckeditor-fa9b3055.js";import"./vue-abe8eda6.js";import"./vue-draggable-next-3bc70602.js";import"./ckeditor5-custom-build-7f9f8982.js";import"./vue3-treeview-e35ab4eb.js";import"./vue-filepond-82332930.js";import"./filepond-136e7cc4.js";import"./filepond-plugin-image-preview-4f29f0b3.js";import"./filepond-plugin-file-validate-type-324437b8.js";import"./mapbox-gl-38e32bee.js";/* empty css             */import"./vuetify-193e6d04.js";import"./@inertiajs-d76518b1.js";import"./axios-3d65c6bd.js";import"./deepmerge-3a6ffb65.js";import"./side-channel-e57be611.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./call-bind-36d0f176.js";import"./set-function-length-801a4962.js";import"./define-data-property-daf1763a.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-61b1e1fb.js";import"./object-inspect-0fa0b9de.js";import"./nprogress-9c4c7d08.js";import"./lodash.clonedeep-c1370659.js";import"./lodash.isequal-feeae999.js";import"./@vuepic-f846cd73.js";import"./date-fns-421fcf3e.js";import"./@babel-0d6f2215.js";import"./element-plus-e3c76eb0.js";import"./lodash-es-fb3d0246.js";import"./@element-plus-283d896c.js";import"./@popperjs-2d1e819d.js";import"./@ctrl-91de2ec7.js";import"./dayjs-7398d4dd.js";import"./async-validator-8d480e59.js";import"./memoize-one-63ab667a.js";import"./escape-html-5c28ffbb.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-24fcdcc4.js";import"./vue3-apexcharts-663397fa.js";import"./apexcharts-4d1d416c.js";import"./vue-i18n-d397f996.js";import"./@intlify-90b40ed7.js";const u={class:"mainAppWrapper d-flex flex-column"},c={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},f={class:"d-flex justify-space-between"},h={class:"--left d-flex align-center"},j=s("h3",{class:"--objectTitle me-4"},"Profile",-1),v=s("span",{class:"--text"},"Profile Info",-1),w=s("span",{class:"--text"},"Change Password",-1),b={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-hidden"},g={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},y={class:"componentLayout-tabPanel"},x={class:"--right"},V={class:"--formContent componentField-input"},P=s("label",null,"Old Password",-1),T={class:"--formContent componentField-input"},_=s("label",null,"New Password",-1),k={class:"--right"},O=s("div",{class:"detailSidebarWrapper overflow-auto"},null,-1),S={props:{data:Array,flash:Array},data:()=>({user:{name:"",email:"",phone:"",image:null},loading:!1,error:null,form:!1,roleOptions:["Admin","User","Guest","Moderator","Editor","Viewer"],toast:m.useToast({position:"top-right"}),expandedPanel:["0"],tab:null,show:!1,shows:!1}),methods:{onSubmit(){},required:e=>!!e||"Trường này là bắt buộc.",email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"Email không hợp lệ.",savePass(){const e=JSON.stringify({oldPassword:this.data.oldPassword,password:this.data.password}),a=new FormData;a.append("data",e),fetch(route("vuetify_profile_edit_passwword"),{method:"POST",body:a}).then((e=>{if(e.ok)return e.json();throw setTimeout((()=>{this.toast.open({message:"ERROR",type:"warning"})}),1e3),new Error("Có lỗi khi gửi yêu cầu POST.")})).then((e=>{e.warning?setTimeout((()=>{this.toast.open({message:e.warning,type:"warning"})}),1e3):e.success?(setTimeout((()=>{this.toast.open({message:e.success,type:"success"})}),1e3),this.$emit("update:componentLoad",(new Date).getTime())):e.error&&setTimeout((()=>{this.toast.open({message:e.error,type:"error"})}),1e3)})).catch((e=>{setTimeout((()=>{this.toast.open({message:"ERROR",type:"warning"})}),1e3),console.error(e)}))},save(){const e=JSON.stringify({username:this.data.username,email:this.data.email,name:this.data.name,avatar:this.data.avatar}),a=new FormData;a.append("data",e),a.append("avatar",this.data.avatar),this.$inertia.post("/cms/user/edit-profile",a),setTimeout((()=>{this.flash.success&&this.toast.open({message:this.flash.success,type:"success"});var e=this.flash.errors;this.flash.errors&&this.toast.open({message:e,type:"error"})}),1e3)}}},C=Object.assign(S,{layout:n},{__name:"Profile",props:{data:Object,flash:Object},setup:n=>(m,S)=>{const C=e("v-icon"),U=e("v-tab"),E=e("v-tabs"),F=e("Images"),W=e("v-btn"),A=e("v-window-item"),I=e("v-text-field"),N=e("v-window"),R=e("v-card-text"),q=e("v-form");return a(),t("div",u,[s("div",c,[s("div",f,[s("div",h,[o(C,{icon:"mdi-account-outline",class:"--objectIcon me-3"}),j])]),o(E,{modelValue:m.tab,"onUpdate:modelValue":S[0]||(S[0]=e=>m.tab=e),class:"mainTabPanel"},{default:i((()=>[o(U,{value:"objectTab-info"},{default:i((()=>[v])),_:1}),o(U,{value:"objectTab-pass"},{default:i((()=>[w])),_:1})])),_:1},8,["modelValue"])]),s("div",b,[s("div",g,[s("div",y,[o(q,{modelValue:m.form,"onUpdate:modelValue":S[11]||(S[11]=e=>m.form=e),onSubmit:r(m.onSubmit,["prevent"])},{default:i((()=>[o(R,null,{default:i((()=>[o(N,{modelValue:m.tab,"onUpdate:modelValue":S[10]||(S[10]=e=>m.tab=e)},{default:i((()=>[o(A,{value:"objectTab-info"},{default:i((()=>[s("div",null,[o(F,{name:"avatar",label:"Avatar",modelValue:n.data.avatar,"onUpdate:modelValue":S[1]||(S[1]=e=>n.data.avatar=e),disabled:!1,checkbox:"1"},null,8,["modelValue"]),o(p,{name:"fullName",label:"Full Name",modelValue:n.data.name,"onUpdate:modelValue":S[2]||(S[2]=e=>n.data.name=e),disabled:!1},null,8,["modelValue"]),o(d,{name:"email",label:"Email",modelValue:n.data.email,"onUpdate:modelValue":S[3]||(S[3]=e=>n.data.email=e),disabled:!0},null,8,["modelValue"])]),s("div",x,[o(W,{class:"btn-primary me-2","prepend-icon":"mdi-content-save",onClick:S[4]||(S[4]=e=>m.save())},{default:i((()=>[l(" Save ")])),_:1})])])),_:1}),o(A,{value:"objectTab-pass"},{default:i((()=>[s("div",null,[s("div",V,[P,o(I,{variant:"outlined",density:"compact","bg-color":"white",type:m.show?"text":"password","append-inner-icon":m.show?"mdi-eye":"mdi-eye-off","onClick:appendInner":S[5]||(S[5]=e=>m.show=!m.show),modelValue:n.data.oldPassword,"onUpdate:modelValue":S[6]||(S[6]=e=>n.data.oldPassword=e),autocomplete:"old-password"},null,8,["type","append-inner-icon","modelValue"])]),s("div",T,[_,o(I,{variant:"outlined",density:"compact","bg-color":"white",type:m.shows?"text":"password","append-inner-icon":m.shows?"mdi-eye":"mdi-eye-off","onClick:appendInner":S[7]||(S[7]=e=>m.shows=!m.shows),modelValue:n.data.password,"onUpdate:modelValue":S[8]||(S[8]=e=>n.data.password=e),autocomplete:"new-password"},null,8,["type","append-inner-icon","modelValue"])])]),s("div",k,[o(W,{class:"btn-primary me-2","prepend-icon":"mdi-content-save",onClick:S[9]||(S[9]=e=>m.savePass())},{default:i((()=>[l(" Save ")])),_:1})])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue","onSubmit"])])]),O])])}});export{C as default};
