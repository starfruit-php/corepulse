import e from"./Layout-a98fddfb.js";import{d as t,c as o}from"./app-059e4860.js";import i from"./ModalSelected-a76cc1ed.js";import"./vue-toast-notification-f2a3de7a.js";import{am as s,o as l,c as r,a,k as n,q as c,N as p,M as m}from"./@vue-9ee83fb6.js";import"./@vueuse-3c3b27e0.js";import"./unidecode-5a54da0f.js";import"./@ckeditor-fa9b3055.js";import"./vue-abe8eda6.js";import"./vue-draggable-next-3bc70602.js";import"./ckeditor5-custom-build-7f9f8982.js";import"./vue3-treeview-e35ab4eb.js";import"./vue-filepond-82332930.js";import"./filepond-136e7cc4.js";import"./filepond-plugin-image-preview-4f29f0b3.js";import"./filepond-plugin-file-validate-type-324437b8.js";import"./mapbox-gl-38e32bee.js";/* empty css             */import"./vuetify-193e6d04.js";import"./@inertiajs-d76518b1.js";import"./axios-3d65c6bd.js";import"./deepmerge-3a6ffb65.js";import"./side-channel-e57be611.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./call-bind-36d0f176.js";import"./set-function-length-801a4962.js";import"./define-data-property-daf1763a.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-61b1e1fb.js";import"./object-inspect-0fa0b9de.js";import"./nprogress-9c4c7d08.js";import"./lodash.clonedeep-c1370659.js";import"./lodash.isequal-feeae999.js";import"./@vuepic-f846cd73.js";import"./date-fns-421fcf3e.js";import"./@babel-0d6f2215.js";import"./element-plus-e3c76eb0.js";import"./lodash-es-fb3d0246.js";import"./@element-plus-283d896c.js";import"./@popperjs-2d1e819d.js";import"./@ctrl-91de2ec7.js";import"./dayjs-7398d4dd.js";import"./async-validator-8d480e59.js";import"./memoize-one-63ab667a.js";import"./escape-html-5c28ffbb.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-24fcdcc4.js";import"./vue3-apexcharts-663397fa.js";import"./apexcharts-4d1d416c.js";import"./vue-i18n-d397f996.js";import"./@intlify-90b40ed7.js";const d={class:"mainAppWrapper d-flex flex-column"},u={class:"mainBarWrapper px-5 py-3 d-flex justify-space-between align-center flex-grow-0 flex-shrink-0"},j={class:"--left d-flex align-center"},h=a("div",{class:"d-flex flex-column me-4"},[a("h3",{class:"--objectTitle me-4"},"Role")],-1),f={class:"--right"},v=a("div",{class:"utilityBarWrapper flex-grow-0 flex-shrink-0"},null,-1),g={class:"mainContentWrapper px-5 py-4 d-flex flex-column flex-grow-1 flex-shrink-1 overflow-hidden"},x={class:"tableListingWrapper d-flex flex-column"},b={name:"Role",data(){var e=window.location.href;let t=window.localStorage.getItem(e);t?t=JSON.parse(t):(t=[{title:this.$t("Name"),align:"start",key:"name",sortable:!0,removable:!0}],window.localStorage.setItem(e,JSON.stringify(t)));var s=[];t.map((e=>{e.removable&&s.push(e)}));var l=[this.createAction("Sửa","mdi-pencil-outline","role_detail",!1,!1,!1),this.createAction("Xóa","mdi-delete-outline","role_delete",o,!0,!0,!1)],r=[{title:"Delete",icon:"mdi-delete-outline",url:{path:"role_delete",content:{title:"Delete",content:"Some accounts are using the role. Are you sure you want to Delete all selected",confirm:"Delete"}},component:i,post:!0,reload:!1}];return{createRole:!1,fav:!0,menu:!1,message:!1,hints:!0,enabled:!0,headers:s,list:t,selected:[],routerList:{router:route("role_listing")},action:l,search:this.search,dialog:!1,formData:{key:""},selectedAction:r}},mounted(){this.checkTitle()},methods:{checkTitle(){if(this.objectSetting){const e=this.objectSetting.find((e=>e.id===this.classObject.id));e&&(this.title=e.title)}},createAction:(e,t,o,i=!1,s=!0,l=!0,r=!0)=>({title:e,icon:t,url:o,component:i,multiple:s,post:l,reload:r}),exportExcel(){let e=new FormData;if(this.data){for(var[t,o]of Object.entries(this.data))e.append("data[]",JSON.stringify(o));var i=this.headers;e.append("fields",JSON.stringify(i)),this.loading=!0,fetch(route("vuetify_export_excel"),{method:"POST",body:e}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e);console.log(t);const o=document.createElement("a");o.href=t,o.download="role_listing.xlsx",o.click(),URL.revokeObjectURL(t)})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))}}}},y=Object.assign(b,{layout:e},{props:{data:Array,totalItems:{default:0},search:{type:Object,default:{}},totalItems:Number},setup:e=>(o,i)=>{const b=s("v-icon"),y=s("v-btn"),w=s("v-menu"),k=s("v-dialog"),S=s("CustomField"),O=s("DataTableServer");return l(),r("div",d,[a("div",u,[a("div",j,[n(b,{icon:"mdi-shield-account-outline",class:"--objectIcon me-3"}),h]),a("div",f,[n(w,{modelValue:o.menu,"onUpdate:modelValue":i[1]||(i[1]=e=>o.menu=e),"close-on-content-click":!1},{activator:c((({props:e})=>[n(y,{onClick:i[0]||(i[0]=e=>o.createRole=!0),class:"btn-primary me-2",variant:"elevated"},{default:c((()=>[n(b,{left:"",class:"me-2"},{default:c((()=>[p("mdi-plus")])),_:1}),p(" "+m(o.$t("Create")),1)])),_:1})])),_:1},8,["modelValue"]),n(k,{modelValue:o.createRole,"onUpdate:modelValue":i[2]||(i[2]=e=>o.createRole=e),width:"420"},{default:c((()=>[n(t,{object:"Role",url:{path:"role_create"},urlReturn:{path:"role_detail"}})])),_:1},8,["modelValue"]),n(y,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:o.exportExcel},{default:c((()=>[p(m(o.$t("Export")),1)])),_:1},8,["onClick"]),n(S,{headers:o.headers,list:o.list,"onUpdate:headers":i[3]||(i[3]=e=>o.headers=e)},null,8,["headers","list"])])]),v,a("div",g,[a("div",x,[n(O,{listing:e.data,router:o.routerList,totalItems:e.totalItems,headers:o.headers,action:o.action,selectedAction:o.selectedAction,noOrder:o.noOrder,multiSelect:o.multiSelect},null,8,["listing","router","totalItems","headers","action","selectedAction","noOrder","multiSelect"])])])])}});export{y as default};
