import e from"./Layout-dfa4b0ea.js";import t from"./ModalEdit-e1e4933f.js";import a from"./ModalCreate-c966410d.js";import{r as l,o,h as i,f as s,a as n,w as r,d,t as c,x as m,y as p,M as u}from"./app-043f1e93.js";const f={class:"mainAppWrapper d-flex flex-column"},h={class:"mainBarWrapper px-5 py-3 d-flex justify-space-between align-center flex-grow-0 flex-shrink-0"},g={class:"--left d-flex align-center"},x=s("div",{class:"d-flex flex-column me-4"},[s("h3",{class:"--objectTitle me-4"},"Translations")],-1),v={class:"--right"},y=s("div",{class:"utilityBarWrapper flex-grow-0 flex-shrink-0"},null,-1),b={class:"mainContentWrapper px-5 py-4 d-flex flex-column flex-grow-1 flex-shrink-1 overflow-hidden"},w={class:"tableListingWrapper d-flex flex-column flex-shrink-1 flex-grow-1 overflow-hidden"},j={name:"Object",data(){var e=window.location.href;let l=window.localStorage.getItem(e),o=[{title:this.$t("key"),align:"start",key:"id",sortable:!0,removable:!0}];var i={path:"translations_edit"};this.lang.map((e=>{o.push({title:this.$t(e),key:e,sortable:!0,removable:!0,url:i,component:"ModalEdit",handleEdit:!0,type:"textarea"})})),l?(l=JSON.parse(l),l.length!=o.length&&(l=o)):(l=o,window.localStorage.setItem(e,JSON.stringify(l)));var s=[];l.map((e=>{e.removable&&s.push(e)}));var n=[this.createAction("Sửa","mdi-pencil-outline","translations_edit",t,!1,!1,!1),this.createAction("Xóa","mdi-delete-outline","translations_delete",m,!0,!0,!1)],r=[{title:"Delete",icon:"mdi-delete-outline",url:{path:"translations_delete",data:{type:1},content:{title:"Delete",content:"Are you sure you want to delete all selected items",confirm:"Delete"}},component:u,post:!0,reload:!1}];let d=(new Date).getTime();return{ModalSelected:p(u),ModalDelete:p(m),ModalCreate:p(a),ModalEdit:p(t),dialog:!1,fav:!0,menu:!1,message:!1,hints:!0,enabled:!0,headers:s,list:l,selected:[],routerList:{router:route("translations_listing")},action:n,componentLoad:d,limit:25,selectedAction:r}},methods:{export(){this.$inertia.visit(route("export"))},import(){this.$inertia.visit(route("import"))},createAction:(e,t,a,l=!1,o=!0,i=!0,s=!0)=>({title:e,icon:t,url:a,component:l,multiple:o,post:i,reload:s}),exportExcel(){let e=new FormData;if(this.data){for(var[t,a]of Object.entries(this.data))e.append("data[]",JSON.stringify(a));var l=this.headers;e.append("fields",JSON.stringify(l)),this.loading=!0,fetch(route("vuetify_export_excel"),{method:"POST",body:e}).then((e=>e.blob())).then((e=>{const t=URL.createObjectURL(e);console.log(t);const a=document.createElement("a");a.href=t,a.download="translations-listing.xlsx",a.click(),URL.revokeObjectURL(t)})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))}}},watch:{componentLoad(){this.loadItems({page:1,itemsPerPage:this.limit})}}},_=Object.assign(j,{layout:e},{props:{data:Array,totalItems:{default:0},lang:{type:Object,default:[]},formData:{type:Object,default:[]}},setup:e=>(t,m)=>{const p=l("v-icon"),u=l("v-card"),j=l("v-dialog"),_=l("v-btn"),k=l("v-menu"),O=l("CustomField"),A=l("DataTableServer");return o(),i("div",f,[s("div",h,[s("div",g,[n(p,{icon:"mdi-translate",class:"--objectIcon me-3"}),x]),s("div",v,[n(k,{modelValue:t.menu,"onUpdate:modelValue":m[2]||(m[2]=e=>t.menu=e),"close-on-content-click":!1},{activator:r((({props:l})=>[n(_,{class:"btn-primary me-2",variant:"elevated","prepend-icon":"mdi-plus"},{default:r((()=>[d(" Add new "),n(j,{modelValue:t.dialog,"onUpdate:modelValue":m[1]||(m[1]=e=>t.dialog=e),activator:"parent",persistent:"",width:"420"},{default:r((()=>[n(u,null,{default:r((()=>[n(a,{formData:e.formData,url:"translations_create","onUpdate:dialog":m[0]||(m[0]=e=>t.dialog=e)},null,8,["formData"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue"]),n(_,{variant:"text",class:"","prepend-icon":"mdi-microsoft-excel",onClick:t.exportExcel},{default:r((()=>[d(c(t.$t("Export")),1)])),_:1},8,["onClick"]),n(O,{headers:t.headers,list:t.list,"onUpdate:headers":m[3]||(m[3]=e=>t.headers=e)},null,8,["headers","list"])])]),y,s("div",b,[s("div",w,[n(A,{listing:e.data,router:t.routerList,"total-items":e.totalItems,headers:t.headers,action:t.action,limit:t.limit,selectedAction:t.selectedAction},null,8,["listing","router","total-items","headers","action","limit","selectedAction"])])])])}});export{_ as default};
