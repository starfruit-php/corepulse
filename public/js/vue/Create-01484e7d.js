import e from"./Layout-b42d48af.js";import{d as l}from"./vue-toast-notification-f2a3de7a.js";import{am as t,o as s,c as a,a as o,k as u,q as n,N as c,M as d,K as i,p as m}from"./@vue-9ee83fb6.js";import"./@vueuse-3c3b27e0.js";import"./unidecode-5a54da0f.js";import"./@ckeditor-fa9b3055.js";import"./vue-abe8eda6.js";const r={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},h={class:"d-flex justify-space-between"},b={class:"--left d-flex align-center"},f=o("div",{class:"d-flex flex-1-0 flex-column w-0"},[o("h3",{class:"--objectTitle"},"Create User")],-1),p={class:"--right"},v=o("span",{class:"--text"},"Basic",-1),j=o("span",{class:"--text"},"Permission",-1),x={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-auto"},V={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},A={class:"componentLayout-tabPanel px-8 py-4 w-50"},g=o("div",{class:"ml-5"},"Accessible Data",-1),C=o("thead",null,[o("tr",null,[o("th",{class:"text-left"}," Documents "),o("th",{class:"text-left"}," All "),o("th",{class:"text-left"}," List "),o("th",{class:"text-left"}," View "),o("th",{class:"text-left"}," Save "),o("th",{class:"text-left"}," Publish "),o("th",{class:"text-left"}," UnPublish "),o("th",{class:"text-left"}," Delete "),o("th",{class:"text-left"}," Create ")])],-1),_=o("td",null,"Documents",-1),S=o("thead",null,[o("tr",null,[o("th",{class:"text-left"}," Object "),o("th",{class:"text-left"}," All "),o("th",{class:"text-left"}," List "),o("th",{class:"text-left"}," View "),o("th",{class:"text-left"}," Save "),o("th",{class:"text-left"}," Publish "),o("th",{class:"text-left"}," UnPublish "),o("th",{class:"text-left"}," Delete "),o("th",{class:"text-left"}," Create ")])],-1),O=o("thead",null,[o("tr",null,[o("th",{class:"text-left"}," Assets "),o("th",{class:"text-left"}," All "),o("th",{class:"text-left"}," List "),o("th",{class:"text-left"}," View "),o("th",{class:"text-left"}," Save "),o("th",{class:"text-left"}," Publish "),o("th",{class:"text-left"}," UnPublish "),o("th",{class:"text-left"}," Delete "),o("th",{class:"text-left"}," Create ")])],-1),k=o("td",null,"Assets",-1),D={data(){var e=[],t=[];return this.objectSetting.forEach((l=>{l.name,e=[l.name+"ObjectList",l.name+"ObjectView",l.name+"ObjectSave",l.name+"ObjectPublish",l.name+"ObjectUnPublish",l.name+"ObjectDelete",l.name+"ObjectCreate"],l.name,t.push({objArr:e,vmodelObjSelected:!1,vmodelObjArr:[],objName:l.name})})),{tabPermission:null,tab:null,username:[e=>!!e||"Required.",e=>(e||"").length<=20||"Max 20 characters"],email:[e=>!!e||"Required.",e=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"Invalid e-mail."],name:[e=>!!e||"Required."],password:[e=>!!e||"Required.",e=>(e||"").length>=6||"Password must be at least 6 characters"],role:[e=>!!e||"Required."],user:{permission:[]},documentRoles:["homeDocumentList","homeDocumentView","homeDocumentSave","homeDocumentPublish","homeDocumentUnPublish","homeDocumentDelete","homeDocumentCreate"],docRoleSelected:[],objectRoleSelected:[],assetsRoleSelected:[],assetsRoles:["assetsList","assetsView","assetsSave","assetsPublish","assetsUnPublish","assetsDelete","assetsCreate"],selectAllDocument:!1,selectAllAssets:!1,objectOptions:t,toast:l.useToast()}},watch:{},methods:{submitForm(e){this.objectOptions.forEach((e=>{this.objectRoleSelected=this.objectRoleSelected.concat(e.vmodelObjArr)})),this.user.permission=[...this.docRoleSelected,...this.objectRoleSelected,...this.assetsRoleSelected],this.$inertia.post(route("user_create"),this.user,{forceFormData:!0,onStart:()=>this.loading=!0,onFinish:()=>this.loading=!1}),setTimeout((()=>{var e=this.flash.errors.key?this.flash.errors.key:"",l=this.flash.errors.message??this.flash.errors;this.flash.errors&&this.toast.open({message:e+" "+l,type:"error",position:"bottom"})}),1e3),this.loading=!1},toggleAllCheckboxesDocument(){this.docRoleSelected=this.selectAllDocument?this.documentRoles.slice():[]},checkIfAllDocumentChecked(){this.selectAllDocument=this.docRoleSelected.length===this.documentRoles.length},toggleAllCheckboxesAssets(){this.assetsRoleSelected=this.selectAllAssets?this.assetsRoles.slice():[]},checkIfAllAssetsChecked(){this.selectAllAssets=this.assetsRoleSelected.length===this.assetsRoles.length},checkIfAllObjectChecked(e,l){this.objectOptions.forEach((l=>{e==l.objName&&(l.vmodelObjSelected=l.vmodelObjArr.length===l.objArr.length)}))},toggleAllCheckboxesObject(e){this.objectOptions.forEach((l=>{e==l.objName&&(l.vmodelObjArr=l.vmodelObjSelected?l.objArr.slice():[])}))}}},R=Object.assign(D,{layout:e},{__name:"Create",props:{roles:Array,flash:Object,objectSetting:Array},setup:e=>(l,D)=>{const R=t("v-icon"),w=t("v-btn"),y=t("v-tab"),U=t("v-tabs"),P=t("Checkbox"),N=t("Input"),I=t("Email"),F=t("Password"),L=t("Select"),q=t("v-window-item"),E=t("v-radio"),T=t("v-radio-group"),W=t("v-col"),z=t("v-row"),M=t("v-checkbox"),$=t("v-table"),B=t("v-window");return s(),a("form",{onSubmit:D[17]||(D[17]=(...e)=>l.submitForm&&l.submitForm(...e)),class:"mainAppWrapper d-flex flex-column"},[o("div",r,[o("div",h,[o("div",b,[u(R,{icon:"mdi-account-group-outline",class:"--objectIcon me-3"}),f]),o("div",p,[u(w,{class:"btn-primary",onClick:l.submitForm,"prepend-icon":"mdi-check-all",variant:"elevated"},{default:n((()=>[c(d(l.$t("save")),1)])),_:1},8,["onClick"])])]),u(U,{modelValue:l.tab,"onUpdate:modelValue":D[0]||(D[0]=e=>l.tab=e),class:"mainTabPanel"},{default:n((()=>[u(y,{value:"informnation"},{default:n((()=>[v])),_:1}),u(y,{value:"permission"},{default:n((()=>[j])),_:1})])),_:1},8,["modelValue"])]),o("div",x,[o("div",V,[u(B,{modelValue:l.tab,"onUpdate:modelValue":D[16]||(D[16]=e=>l.tab=e),class:"overflow-visible"},{default:n((()=>[u(q,{value:"informnation",class:""},{default:n((()=>[o("div",A,[u(P,{label:"Active",modelValue:l.user.active,"onUpdate:modelValue":D[1]||(D[1]=e=>l.user.active=e)},null,8,["modelValue"]),u(N,{name:"username",label:"Username",modelValue:l.user.username,"onUpdate:modelValue":D[2]||(D[2]=e=>l.user.username=e)},null,8,["modelValue"]),u(I,{name:"email",label:"Email",modelValue:l.user.email,"onUpdate:modelValue":D[3]||(D[3]=e=>l.user.email=e)},null,8,["modelValue"]),u(F,{name:"password",label:"Password",modelValue:l.user.password,"onUpdate:modelValue":D[4]||(D[4]=e=>l.user.password=e)},null,8,["modelValue"]),u(N,{name:"name",label:"Full Name",modelValue:l.user.name,"onUpdate:modelValue":D[5]||(D[5]=e=>l.user.name=e)},null,8,["modelValue"]),u(L,{name:"roles",label:"Select Role",density:"compact",items:e.roles,itemTitle:"name",itemValue:"id",modelValue:l.user.role,"onUpdate:modelValue":D[6]||(D[6]=e=>l.user.role=e)},null,8,["items","modelValue"])])])),_:1}),u(q,{value:"permission"},{default:n((()=>[u(z,null,{default:n((()=>[u(W,{cols:"12",class:"d-flex align-center mt-5"},{default:n((()=>[g,u(T,{class:"d-flex align-center",modelValue:l.user.accessibleData,"onUpdate:modelValue":D[7]||(D[7]=e=>l.user.accessibleData=e),inline:""},{default:n((()=>[u(E,{label:"All",value:"all"}),u(E,{label:"Personal data only",value:"personalDataOnly"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),u(z,null,{default:n((()=>[u(W,{cols:"12"},{default:n((()=>[u(U,{modelValue:l.tabPermission,"onUpdate:modelValue":D[8]||(D[8]=e=>l.tabPermission=e),direction:"horizontal","background-color":"primary"},{default:n((()=>[u(y,{value:"documents"},{default:n((()=>[u(R,{start:""},{default:n((()=>[c(" mdi-file-document-outline ")])),_:1}),c(" Documents ")])),_:1}),u(y,{value:"object"},{default:n((()=>[u(R,{start:""},{default:n((()=>[c(" mdi-cube-outline ")])),_:1}),c(" Object ")])),_:1}),u(y,{value:"assets"},{default:n((()=>[u(R,{start:""},{default:n((()=>[c(" mdi-image ")])),_:1}),c(" Assets ")])),_:1})])),_:1},8,["modelValue"]),u(B,{modelValue:l.tabPermission,"onUpdate:modelValue":D[15]||(D[15]=e=>l.tabPermission=e)},{default:n((()=>[u(q,{value:"documents"},{default:n((()=>[u(z,{justify:"center",class:"pa-4"},{default:n((()=>[u(W,{cols:"12"},{default:n((()=>[u($,{"fixed-header":"",height:"300px"},{default:n((()=>[C,o("tbody",null,[o("tr",null,[_,o("td",null,[u(M,{modelValue:l.selectAllDocument,"onUpdate:modelValue":D[9]||(D[9]=e=>l.selectAllDocument=e),onChange:D[10]||(D[10]=e=>l.toggleAllCheckboxesDocument(l.item.objName)),type:"multi"},null,8,["modelValue"])]),(s(!0),a(i,null,m(l.documentRoles,(e=>(s(),a("td",null,[u(P,{modelValue:l.docRoleSelected,"onUpdate:modelValue":D[11]||(D[11]=e=>l.docRoleSelected=e),value:e,type:"multi",onChange:l.checkIfAllDocumentChecked},null,8,["modelValue","value","onChange"])])))),256))])])])),_:1})])),_:1})])),_:1})])),_:1}),u(q,{value:"object"},{default:n((()=>[u(z,{justify:"center",class:"pa-4"},{default:n((()=>[u(W,{cols:"12"},{default:n((()=>[u($,{"fixed-header":""},{default:n((()=>[S,o("tbody",null,[(s(!0),a(i,null,m(l.objectOptions,((e,t)=>(s(),a("tr",null,[o("td",null,d(e.objName),1),o("td",null,[u(M,{modelValue:e.vmodelObjSelected,"onUpdate:modelValue":l=>e.vmodelObjSelected=l,onChange:t=>l.toggleAllCheckboxesObject(e.objName),type:"multi"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),(s(!0),a(i,null,m(e.objArr,(t=>(s(),a("td",null,[u(P,{modelValue:e.vmodelObjArr,"onUpdate:modelValue":l=>e.vmodelObjArr=l,value:t,type:"multi",onChange:s=>l.checkIfAllObjectChecked(e.objName,t)},null,8,["modelValue","onUpdate:modelValue","value","onChange"])])))),256))])))),256))])])),_:1})])),_:1})])),_:1})])),_:1}),u(q,{value:"assets"},{default:n((()=>[u(z,{justify:"center",class:"pa-4"},{default:n((()=>[u(W,{cols:"12"},{default:n((()=>[u($,{"fixed-header":"",height:"300px"},{default:n((()=>[O,o("tbody",null,[o("tr",null,[k,o("td",null,[u(M,{modelValue:l.selectAllAssets,"onUpdate:modelValue":D[12]||(D[12]=e=>l.selectAllAssets=e),onChange:D[13]||(D[13]=e=>l.toggleAllCheckboxesAssets(l.item.objName)),type:"multi"},null,8,["modelValue"])]),(s(!0),a(i,null,m(l.assetsRoles,(e=>(s(),a("td",null,[u(P,{modelValue:l.assetsRoleSelected,"onUpdate:modelValue":D[14]||(D[14]=e=>l.assetsRoleSelected=e),value:e,type:"multi",onChange:l.checkIfAllAssetsChecked},null,8,["modelValue","value","onChange"])])))),256))])])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])])],32)}});export{R as default};
