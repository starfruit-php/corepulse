import e from"./Layout-94e521c0.js";import"./lodash-beaa0c46.js";import{r as a,o as t,h as l,f as i,a as s,w as o,t as n,d as r,c,i as d,F as u,l as m,k as b}from"./app-c6a37434.js";const g={class:"mainAppWrapper d-flex flex-column"},h={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},p={class:"d-flex justify-space-between"},v={class:"--left d-flex me-4"},f={class:"--listing"},w={class:"d-flex flex-1-0 flex-column w-0"},y=i("span",null,null,-1),j={class:"--objectTitle"},D=["value"],S={class:"--right"},k=i("span",{class:"--text"},"Main",-1),x=i("span",{class:"--text"},"Revision",-1),T=i("span",{class:"--text"},"Schedule",-1),O=i("span",{class:"--text"},"Relation",-1),_={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-auto"},L={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},I=["value"],C={class:"detailSidebarWrapper"},N={class:"detailSidebarBlock"},P=i("h4",{class:"--blockTitle"},"Languague",-1),$={class:"--blockContent"},M={class:"--formWrapper"},A={class:"--formItem"},F={class:"detailSidebarBlock"},U=i("h4",{class:"--blockTitle"},"Meta Data",-1),W={class:"--blockContent"},K={class:"metaDataGroup"},V={class:"--metaDataItem"},B={class:"--metaDataItem"},J={class:"--metaDataItem"},z={class:"--metaDataItem"},R={class:"--metaDataItem"},E={class:"--metaDataItem"},G={class:"--metaDataItem"},H={class:"--metaDataItem"},q={props:{data:Object,label:String,route:String,dataField:Array,options:[Array],modelValue:[Object,Array],breadcrumb:[Object,Array],warning:String,colorPrimary:String,colorLight:String,objectSetting:[Object,Array]},data(){var e,a,t="";return this.language&&(t=this.language),{showDeleteDialog:!1,itemToDelete:null,dataNew:this.data,showFileSelectionDialog:!1,languages:this.sidebar.language,selectedLanguage:null,panel:[0],tab:null,validationMessages:{},locale:t,toast:b.useToast({position:"top-right",style:{zIndex:"200"}}),dataKey:this.breadcrumb.item,title:null==(a=null==(e=this.breadcrumb)?void 0:e.root)?void 0:a.name}},name:"Detail",mounted(){this.createLocalStorage(),this.checkTitle()},methods:{checkTatus(e){switch(e){case"Published":return"blue";case"Unpublished":return"red";default:return"gray"}},checkTitle(){if(this.objectSetting){const e=this.objectSetting.find((e=>{var a,t;return e.id===(null==(t=null==(a=this.breadcrumb)?void 0:a.root)?void 0:t.id)}));e&&(this.title=e.title)}},createLocalStorage(e=null){var a=window.location.href;window.localStorage.setItem(a,e)},showDeleteConfirmationDialog(e){this.itemToDelete=e,this.showDeleteDialog=!0},deleteItem(){const e=new FormData;e.append("id",this.itemToDelete),this.$inertia.post(route("object_delete",{object:this.classObject.id}),e),this.showDeleteDialog=!1},closeDeleteDialog(){this.showDeleteDialog=!1,this.itemToDelete=null},save(e){this.loading=!0,this.dataNew.status=e,this.dataNew.language=this.sidebar.language;const a=new FormData;for(const l in this.dataNew)"children"===l?a.append(l,JSON.stringify(this.dataNew[l])):a.append(l,this.dataNew[l]);a.append("objectKey",this.dataKey);const t=this.dataNew.id;fetch(route("vuetify_object_detail",{id:t}),{method:"POST",body:a}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((e=>{e.warning?this.warningMess(e.warning):this.$nextTick((()=>{this.successMess("Update object success!"),this.createLocalStorage()}))})).catch((e=>{console.error("Lỗi xảy ra khi gửi yêu cầu:",e)})).finally((()=>{this.loading=!1}))},back(e){const a=window.location.href;let t=window.localStorage.getItem(a);t=JSON.parse(t),t&&"onchange"in t?confirm("Leave Site? Changes you made may not be saved.")&&this.$inertia.get(route("vuetify_object",{object:e})):this.$inertia.get(route("vuetify_object",{object:e}))},warningMess(e){e&&setTimeout((()=>{this.toast.open({message:e,type:"warning"})}),1e3)},successMess(e){e&&setTimeout((()=>{this.toast.open({message:e,type:"success"})}),1e3)}},watch:{languages(e){this.$inertia.get(route("vuetify_object_detail",{id:this.dataNew.id,language:e}))},dataNew:{deep:!0,handler(){this.createLocalStorage(JSON.stringify({onchange:!0}))}},dataKey:{deep:!0,handler(){this.createLocalStorage(JSON.stringify({onchange:!0}))}}}},Q=Object.assign(q,{layout:e},{props:{data:Object,breadcrumb:[Object,Array],language:String,languageOption:Object,sidebar:Object,classObject:Object,warning:String,colorPrimary:String,colorLight:String,objectSetting:[Object,Array]},setup:e=>(b,q)=>{const Q=a("v-icon"),X=a("v-breadcrumbs-item"),Y=a("v-breadcrumbs"),Z=a("v-chip"),ee=a("v-btn"),ae=a("v-tab"),te=a("v-tabs"),le=a("DataObjectField"),ie=a("v-form"),se=a("Select");return t(),l("div",g,[i("div",h,[i("div",p,[i("div",v,[i("div",{class:"--objectIcon me-3",onClick:q[0]||(q[0]=a=>b.back(e.breadcrumb.root.id))},[i("div",f,[s(Q,{icon:"mdi-cube-outline"}),s(Q,{icon:"mdi-arrow-left"}),s(Q,{icon:"mdi-cube-outline"})])]),i("div",w,[s(Y,{class:"breadcrumbWrapper pa-0"},{default:o((()=>[s(X,{class:"--itemBreadcrumb",title:"Home",onClick:q[1]||(q[1]=a=>b.back(e.breadcrumb.root.id))},{default:o((()=>[i("small",null,n(b.title),1)])),_:1}),s(X,{class:"--itemBreadcrumb",disabled:!0},{default:o((()=>[y])),_:1})])),_:1}),i("h3",j,[i("span",{contenteditable:"",value:b.dataKey,onInput:q[2]||(q[2]=e=>b.dataKey=e.target.innerText),class:"me-1"},n(e.breadcrumb.item),41,D),s(Q,{icon:"mdi-pencil",size:"x-small",color:"blue-grey-lighten-4",class:"me-2"}),s(Z,{color:b.checkTatus(e.breadcrumb.status)},{default:o((()=>[r(n(e.breadcrumb.status),1)])),_:1},8,["color"])])])]),i("div",S,[s(ee,{class:"btn-primary me-2",variant:"elevated","prepend-icon":"mdi-check-all",onClick:q[3]||(q[3]=e=>b.save("Publish"))},{default:o((()=>[r(" Save & Publish ")])),_:1}),s(ee,{class:"btn-primary me-2",variant:"elevated","prepend-icon":"mdi-check",onClick:q[4]||(q[4]=e=>b.save("Draft"))},{default:o((()=>[r(" Save ")])),_:1}),e.sidebar.published?(t(),c(ee,{key:0,class:"btn-primary me-2",variant:"elevated","prepend-icon":"mdi-tray-arrow-down",onClick:q[5]||(q[5]=e=>b.save("UnPublish"))},{default:o((()=>[r(" Unpublish ")])),_:1})):d("",!0),s(ee,{variant:"elevated",class:"bg-red","prepend-icon":"mdi-delete-outline",onClick:q[6]||(q[6]=a=>b.showDeleteConfirmationDialog(e.data.id))},{default:o((()=>[r(" Delete ")])),_:1})])]),s(te,{modelValue:b.tab,"onUpdate:modelValue":q[7]||(q[7]=e=>b.tab=e),class:"mainTabPanel"},{default:o((()=>[s(ae,{value:"objectTab-main"},{default:o((()=>[k])),_:1}),s(ae,{value:"objectTab-revision"},{default:o((()=>[x])),_:1}),s(ae,{value:"objectTab-schedule"},{default:o((()=>[T])),_:1}),s(ae,{value:"objectTab-relation"},{default:o((()=>[O])),_:1})])),_:1},8,["modelValue"])]),i("div",_,[i("div",L,[(t(!0),l(u,null,m(b.dataNew.children,((a,i)=>(t(),l("div",{key:i,value:a,class:"componentLayout-tabPanel mb-8"},[s(ie,null,{default:o((()=>[s(le,{item:a,languages:b.languages,colorPrimary:e.colorPrimary,colorLight:e.colorLight},null,8,["item","languages","colorPrimary","colorLight"])])),_:2},1024)],8,I)))),128))]),i("div",C,[i("div",N,[P,i("div",$,[i("div",M,[i("div",A,[s(se,{items:e.languageOption,name:"Languge",modelValue:b.languages,"onUpdate:modelValue":q[8]||(q[8]=e=>b.languages=e),density:"compact","hide-details":"auto",label:"Languge"},null,8,["items","modelValue"])])])])]),i("div",F,[U,i("div",W,[i("div",K,[i("div",V,[i("small",null,n(b.$t("ID")),1),i("p",null,n(e.sidebar.id),1)]),i("div",B,[i("small",null,n(b.$t("Class")),1),i("p",null,n(e.sidebar.classTitle?e.sidebar.classTitle:e.sidebar.className),1)]),i("div",J,[i("small",null,n(b.$t("Key")),1),i("p",null,n(e.sidebar.key),1)]),i("div",z,[i("small",null,n(b.$t("Full Path")),1),i("p",null,n(e.sidebar.fullPath),1)]),i("div",R,[i("small",null,n(b.$t("Created date")),1),i("p",null,n(e.sidebar.creationDate),1)]),i("div",E,[i("small",null,n(b.$t("User Owner")),1),i("p",null,n(e.sidebar.userOwner),1)]),i("div",G,[i("small",null,n(b.$t("Modification date")),1),i("p",null,n(e.sidebar.modificationDate),1)]),i("div",H,[i("small",null,n(b.$t("User modification")),1),i("p",null,n(e.sidebar.userModification),1)])])])])])])])}});export{Q as default};
