import{r as e,o as a,h as t,f as s,a as o,w as l,I as n,Z as d,d as i,b as r,k as p}from"./app-7690135c.js";import m from"./Layout-b80b8b47.js";const u={class:"mainAppWrapper d-flex flex-column"},c={class:"mainBarWrapper px-5 pt-3 flex-grow-0 flex-shrink-0"},f={class:"d-flex justify-space-between"},h={class:"--left d-flex align-center"},w=s("h3",{class:"--objectTitle me-4"},"Profile",-1),v=s("span",{class:"--text"},"Profile Info",-1),b=s("span",{class:"--text"},"Change Password",-1),g={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1 overflow-hidden"},y={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},V={class:"componentLayout-tabPanel"},x={class:"--right"},P={class:"--formContent componentField-input"},T=s("label",null,"Old Password",-1),_={class:"--formContent componentField-input"},j=s("label",null,"New Password",-1),k={class:"--right"},O=s("div",{class:"detailSidebarWrapper overflow-auto"},null,-1),S={props:{data:Array,flash:Array},data:()=>({user:{name:"",email:"",phone:"",image:null},loading:!1,error:null,form:!1,roleOptions:["Admin","User","Guest","Moderator","Editor","Viewer"],toast:p.useToast({position:"top-right"}),expandedPanel:["0"],tab:null,show:!1,shows:!1}),methods:{onSubmit(){},required:e=>!!e||"Trường này là bắt buộc.",email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||"Email không hợp lệ.",savePass(){const e=JSON.stringify({oldPassword:this.data.oldPassword,password:this.data.password}),a=new FormData;a.append("data",e),fetch(route("vuetify_profile_edit_passwword"),{method:"POST",body:a}).then((e=>{if(e.ok)return e.json();throw setTimeout((()=>{this.toast.open({message:"ERROR",type:"warning"})}),1e3),new Error("Có lỗi khi gửi yêu cầu POST.")})).then((e=>{e.warning?setTimeout((()=>{this.toast.open({message:e.warning,type:"warning"})}),1e3):e.success?(setTimeout((()=>{this.toast.open({message:e.success,type:"success"})}),1e3),this.$emit("update:componentLoad",(new Date).getTime())):e.error&&setTimeout((()=>{this.toast.open({message:e.error,type:"error"})}),1e3)})).catch((e=>{setTimeout((()=>{this.toast.open({message:"ERROR",type:"warning"})}),1e3),console.error(e)}))},save(){const e=JSON.stringify({username:this.data.username,email:this.data.email,name:this.data.name,avatar:this.data.avatar}),a=new FormData;a.append("data",e),a.append("avatar",this.data.avatar),this.$inertia.post("/cms/user/edit-profile",a),setTimeout((()=>{this.flash.success&&this.toast.open({message:this.flash.success,type:"success"});var e=this.flash.errors;this.flash.errors&&this.toast.open({message:e,type:"error"})}),1e3)}}},C=Object.assign(S,{layout:m},{__name:"Profile",props:{data:Object,flash:Object},setup:p=>(m,S)=>{const C=e("v-icon"),U=e("v-tab"),E=e("v-tabs"),F=e("Images"),I=e("v-btn"),R=e("v-window-item"),W=e("v-text-field"),A=e("v-window"),N=e("v-card-text"),D=e("v-form");return a(),t("div",u,[s("div",c,[s("div",f,[s("div",h,[o(C,{icon:"mdi-account-outline",class:"--objectIcon me-3"}),w])]),o(E,{modelValue:m.tab,"onUpdate:modelValue":S[0]||(S[0]=e=>m.tab=e),class:"mainTabPanel"},{default:l((()=>[o(U,{value:"objectTab-info"},{default:l((()=>[v])),_:1}),o(U,{value:"objectTab-pass"},{default:l((()=>[b])),_:1})])),_:1},8,["modelValue"])]),s("div",g,[s("div",y,[s("div",V,[o(D,{modelValue:m.form,"onUpdate:modelValue":S[11]||(S[11]=e=>m.form=e),onSubmit:r(m.onSubmit,["prevent"])},{default:l((()=>[o(N,null,{default:l((()=>[o(A,{modelValue:m.tab,"onUpdate:modelValue":S[10]||(S[10]=e=>m.tab=e)},{default:l((()=>[o(R,{value:"objectTab-info"},{default:l((()=>[s("div",null,[o(F,{name:"avatar",label:"Avatar",modelValue:p.data.avatar,"onUpdate:modelValue":S[1]||(S[1]=e=>p.data.avatar=e),disabled:!1,checkbox:"1"},null,8,["modelValue"]),o(n,{name:"fullName",label:"Full Name",modelValue:p.data.name,"onUpdate:modelValue":S[2]||(S[2]=e=>p.data.name=e),disabled:!1},null,8,["modelValue"]),o(d,{name:"email",label:"Email",modelValue:p.data.email,"onUpdate:modelValue":S[3]||(S[3]=e=>p.data.email=e),disabled:!0},null,8,["modelValue"])]),s("div",x,[o(I,{class:"btn-primary me-2","prepend-icon":"mdi-content-save",onClick:S[4]||(S[4]=e=>m.save())},{default:l((()=>[i(" Save ")])),_:1})])])),_:1}),o(R,{value:"objectTab-pass"},{default:l((()=>[s("div",null,[s("div",P,[T,o(W,{variant:"outlined",density:"compact","bg-color":"white",type:m.show?"text":"password","append-inner-icon":m.show?"mdi-eye":"mdi-eye-off","onClick:appendInner":S[5]||(S[5]=e=>m.show=!m.show),modelValue:p.data.oldPassword,"onUpdate:modelValue":S[6]||(S[6]=e=>p.data.oldPassword=e),autocomplete:"old-password"},null,8,["type","append-inner-icon","modelValue"])]),s("div",_,[j,o(W,{variant:"outlined",density:"compact","bg-color":"white",type:m.shows?"text":"password","append-inner-icon":m.shows?"mdi-eye":"mdi-eye-off","onClick:appendInner":S[7]||(S[7]=e=>m.shows=!m.shows),modelValue:p.data.password,"onUpdate:modelValue":S[8]||(S[8]=e=>p.data.password=e),autocomplete:"new-password"},null,8,["type","append-inner-icon","modelValue"])])]),s("div",k,[o(I,{class:"btn-primary me-2","prepend-icon":"mdi-content-save",onClick:S[9]||(S[9]=e=>m.savePass())},{default:l((()=>[i(" Save ")])),_:1})])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["modelValue","onSubmit"])])]),O])])}});export{C as default};
