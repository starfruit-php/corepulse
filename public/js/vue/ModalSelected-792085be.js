import{_ as t,k as e,r as s,o as a,h as i,a as r,w as o,f as n,t as l,d as u,F as c}from"./app-7d8d3c43.js";const d=t({props:{item:[Object,Array],url:{type:[Object,Array,String],default:""},limit:Number,params:[Object,Array],id:Number},data(){var t="",s="",a="";"string"!=typeof this.url&&this.url.content&&(t=this.url.content.content,s=this.url.content.confirm,a=this.url.content.title);const i=new FormData;return i.append("id",JSON.stringify(this.item)),fetch(route("user_check_assigned"),{method:"POST",body:i}).then((t=>{if(t.ok)return t.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((t=>{this.userRole=t.data,console.log(this.userRole)})).catch((t=>{})),{userRole:"",content:t,title:a,confirm:s,toast:e.useToast({position:"top-right",style:{zIndex:"200"}})}},methods:{closeDialog(){this.$emit("update:dialog",!1)},deleteTrans(){var t=[];if(this.item){this.item.forEach(((e,s)=>{t.push(e)}))}const e=new FormData;Array.isArray(t)?t.map((t=>{e.append("id[]",t)})):e.append("id",t);let s="",a={};"string"==typeof this.url?s=this.url:(s=this.url.path,this.url.data&&(a=JSON.parse(JSON.stringify(this.url.data)))),fetch(route(s,a),{method:"POST",body:e}).then((t=>{if(t.ok)return t.json();throw setTimeout((()=>{this.toast.open({message:"ERROR",type:"warning"})}),1e3),new Error("Có lỗi khi gửi yêu cầu POST.")})).then((t=>{t.warning?setTimeout((()=>{this.toast.open({message:t.warning,type:"warning"})}),1e3):(setTimeout((()=>{this.toast.open({message:"Update success",type:"success"})}),1e3),this.$emit("update:componentLoad",(new Date).getTime()),this.$emit("update:dialog",!1),this.$emit("update:limit",this.limit),this.$emit("update:selected",[]))})).catch((t=>{setTimeout((()=>{this.toast.open({message:"ERROR",type:"warning"})}),1e3),console.error(t)}))}}},[["render",function(t,e,d,h,p,m){const g=s("v-toolbar-title"),f=s("v-toolbar"),y=s("v-card-text"),w=s("v-btn"),b=s("v-card-actions");return a(),i(c,null,[r(f,{color:"red-lighten-5",density:"compact"},{default:o((()=>[r(g,{text:p.title,class:"text-red-darken-1"},null,8,["text"])])),_:1}),r(y,{class:"py-8"},{default:o((()=>[n("b",null,l(p.userRole),1),u(" "+l(p.content),1)])),_:1}),r(b,{class:"justify-end"},{default:o((()=>[r(w,{color:"",variant:"text",onClick:e[0]||(e[0]=t=>m.closeDialog())},{default:o((()=>[u("Close ")])),_:1}),r(w,{variant:"elevated",color:"red-darken-1",onClick:e[1]||(e[1]=t=>m.deleteTrans())},{default:o((()=>[u(l(p.confirm),1)])),_:1})])),_:1})],64)}]]);export{d as default};
