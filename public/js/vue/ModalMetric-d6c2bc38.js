import{d as e}from"./vue-toast-notification-f2a3de7a.js";import{am as t,o as a,c as l,k as o,q as s,N as i,a as d,C as r,E as n,L as c,M as u}from"./@vue-9ee83fb6.js";import"./@ckeditor-fa9b3055.js";import"./vue-abe8eda6.js";const m={style:{width:"500px"}},p={class:"--formContent componentField-input"},h=d("label",null,"Title",-1),g={class:"--formContent componentField-input"},v=d("label",null,"Type Metric",-1),f={class:"--formContent componentField-input"},C=d("label",null,"Time",-1),_={class:"--formContent componentField-input"},y=d("label",null,"Color",-1),b={class:"d-flex align-center mt-2"},T={props:{catalog:{type:[Number,String],default:"page"},data:Object},data:()=>({toast:e.useToast({position:"top-right",style:{zIndex:"200"}}),rules:[e=>!!e||"Required."],titlePage:"",navigationPage:"",keyPage:"",typeTime:["Today","7 day","10 day","30 day","6 month","12 month","Custom range"],selectTime:"",typeMetric:["visits","visitors","pageviews","views_per_visit","bounce_rate","visit_duration","time_on_page"],selectMetric:"visitors",selectedColor:"#6a1b9a",current_date:"",start_date:"",dateRange:[],showCustomRange:!1}),watch:{selectTime(e){"Custom range"===e&&(this.showCustomRange=!0,this.selectTime="")},dateRange(e){let t=this.dateRange.split("-").map((e=>e.trim())),a=t[1].replace(/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/,((e,t,a,l)=>`${t}-${a=a.padStart(2,"0")}-${l=l.padStart(2,"0")}`)),l=t[0].replace(/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/,((e,t,a,l)=>`${t}-${a=a.padStart(2,"0")}-${l=l.padStart(2,"0")}`));this.current_date=a,this.start_date=l,console.log(this.current_date)}},methods:{closeDialog(){this.$emit("update:dialog",!1)},addDataMetric(){this.$emit("update:showArrChart",!1);const e=new FormData;e.append("title",this.titlePage),e.append("metrics",this.selectMetric),e.append("time",this.selectTime),e.append("current_date",this.current_date),e.append("start_date",this.start_date),e.append("color",this.selectedColor),fetch("../cms/add-arr-chart",{method:"POST",body:e}).then((e=>e.json())).then((e=>{this.$nextTick((()=>{this.data.push(e.data),this.$emit("update:arrChart",this.data),this.$emit("update:showArrChart",!0),this.closeDialog()}))})).catch((e=>{console.log(e)}))}}},V=Object.assign(T,{__name:"ModalMetric",setup:e=>(e,T)=>{const V=t("v-card-title"),M=t("v-text-field"),$=t("Select"),w=t("DateRange"),k=t("v-color-picker"),R=t("v-card-text"),x=t("v-spacer"),D=t("v-btn"),S=t("v-card-actions"),j=t("v-card");return a(),l("div",m,[o(j,null,{default:s((()=>[o(V,{style:{background:"var(--color-primary--light)",color:"var(--color-primary)"}},{default:s((()=>[i(" Add Metric ")])),_:1}),o(R,null,{default:s((()=>[d("div",p,[h,o(M,{variant:"outlined",density:"compact","bg-color":"white",modelValue:e.titlePage,"onUpdate:modelValue":T[0]||(T[0]=t=>e.titlePage=t),required:""},null,8,["modelValue"])]),d("div",g,[v,o($,{items:e.typeMetric,modelValue:e.selectMetric,"onUpdate:modelValue":T[1]||(T[1]=t=>e.selectMetric=t)},null,8,["items","modelValue"])]),d("div",f,[C,o($,{items:e.typeTime,modelValue:e.selectTime,"onUpdate:modelValue":T[2]||(T[2]=t=>e.selectTime=t)},null,8,["items","modelValue"]),e.showCustomRange?(a(),r(w,{key:0,modelValue:e.dateRange,"onUpdate:modelValue":T[3]||(T[3]=t=>e.dateRange=t),label:"Custom Range"},null,8,["modelValue"])):n("",!0)]),d("div",_,[y,o(k,{modelValue:e.selectedColor,"onUpdate:modelValue":T[4]||(T[4]=t=>e.selectedColor=t),class:"w-100","hide-canvas":"","hide-input":"","preset-colors":["#ffffff","#000000","#ff0000","#00ff00","#0000ff"]},null,8,["modelValue"]),d("div",b,[d("div",{class:"color-box",style:c({backgroundColor:e.selectedColor})},null,4),d("span",null,[i(" Color code selected: "),d("strong",null,u(e.selectedColor),1)])])])])),_:1}),o(S,null,{default:s((()=>[o(x),o(D,{text:"Close Dialog",onClick:e.closeDialog},null,8,["onClick"]),o(D,{color:"primary",variant:"text",onClick:T[5]||(T[5]=t=>e.addDataMetric())},{default:s((()=>[i(" OK ")])),_:1})])),_:1})])),_:1})])}});export{V as default};
