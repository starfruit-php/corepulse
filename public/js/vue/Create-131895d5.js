import"./lodash-b0ff3f6f.js";import e from"./Layout-8c51cdb8.js";import{d as a}from"./vue-toast-notification-f2a3de7a.js";import{am as t,o as s,c as i,a as l,k as n,M as o,q as r,N as c,K as u,p as d}from"./@vue-9ee83fb6.js";import"./@ckeditor-fa9b3055.js";import"./vue-abe8eda6.js";import"./@vueuse-3c3b27e0.js";import"./unidecode-5a54da0f.js";const g={class:"mainAppWrapper d-flex flex-column"},m={class:"mainBarWrapper px-5 py-3 d-flex justify-space-between align-center flex-grow-0 flex-shrink-0"},p={class:"--left d-flex align-center"},b={class:"d-flex flex-1-0 flex-column w-0"},h={class:"--objectTitle"},f={class:"--right"},v={class:"mainContentWrapper detailContentWrapper d-flex flex-grow-1 flex-shrink-1"},j={class:"detailFormWrapper pa-5 flex-grow-1 overflow-auto"},w=["value"],y={class:"detailSidebarWrapper"},O={class:"detailSidebarBlock"},S=l("h4",{class:"--blockTitle"},"Languague",-1),x={class:"--blockContent"},k={class:"--formWrapper"},L={class:"--formItem"},N={props:{data:Object,label:String,route:String,dataField:Array,options:[Array],modelValue:[Object,Array],breadcrumb:[Object,Array]},data(){var e="";return this.language&&(e=this.language),{languages:this.sidebar.language,dataNew:this.data,selectedLanguage:null,panel:[0],tab:null,validationMessages:{},locale:e,toast:a.useToast({position:"top-right",style:{zIndex:"200"}})}},name:"Detail",mounted(){this.createLocalStorage()},methods:{createLocalStorage(e=null){var a=window.location.href;window.localStorage.setItem(a,e)},save(e){this.loading=!0,this.dataNew.status=e,this.dataNew.language=this.sidebar.language;const a=new FormData;for(const t in this.dataNew)"children"===t?a.append(t,JSON.stringify(this.dataNew[t])):a.append(t,this.dataNew[t]);fetch(route("object_create",{object:this.classObject.name}),{method:"POST",body:a}).then((e=>{if(e.ok)return e.json();throw new Error("Lỗi xảy ra khi gửi yêu cầu.")})).then((e=>{e.warning?this.warningMess(e.warning):(this.successMess("Create object success!"),this.$inertia.get(route("vuetify_object",{object:this.classObject.id})))})).catch((e=>{console.error("Lỗi xảy ra khi gửi yêu cầu:",e)})).finally((()=>{this.loading=!1}))},warningMess(e){e&&setTimeout((()=>{this.toast.open({message:e,type:"warning"})}),1e3)},successMess(e){e&&setTimeout((()=>{this.toast.open({message:e,type:"success"})}),1e3)},back(e){const a=window.location.href;let t=window.localStorage.getItem(a);t=JSON.parse(t),t&&"onchange"in t?confirm("Leave Site? Changes you made may not be saved.")&&this.$inertia.get(route("vuetify_object",{object:e})):this.$inertia.get(route("vuetify_object",{object:e}))}},watch:{languages(e){this.sidebar.language=e},dataNew:{deep:!0,handler(){this.createLocalStorage(JSON.stringify({onchange:!0}))}}}},C=Object.assign(N,{layout:e},{props:{data:Object,breadcrumb:[Object,Array],language:String,languageOption:Object,sidebar:Object,classObject:Object},setup:e=>(a,N)=>{const C=t("v-icon"),M=t("v-btn"),T=t("DataObjectField"),W=t("v-form"),_=t("Select");return s(),i("div",g,[l("div",m,[l("div",p,[n(C,{icon:"mdi-cube-outline",class:"--objectIcon me-3"}),l("div",b,[l("h3",h," Create a new "+o(e.breadcrumb.root.title),1)])]),l("div",f,[n(M,{class:"btn-primary me-2","prepend-icon":"mdi-check-all",onClick:N[0]||(N[0]=e=>a.save("Publish"))},{default:r((()=>[c(" Save & Publish ")])),_:1}),n(M,{class:"btn-primary","prepend-icon":"mdi-content-save",onClick:N[1]||(N[1]=e=>a.save("UnPublish"))},{default:r((()=>[c(" Save ")])),_:1})])]),l("div",v,[l("div",j,[(s(!0),i(u,null,d(a.dataNew.children,((e,t)=>(s(),i("div",{key:t,value:e,class:"componentLayout-tabPanel mb-8"},[n(W,null,{default:r((()=>[n(T,{item:e,languages:a.languages},null,8,["item","languages"])])),_:2},1024)],8,w)))),128))]),l("div",y,[l("div",O,[S,l("div",x,[l("div",k,[l("div",L,[n(_,{items:e.languageOption,name:"Languge",modelValue:a.languages,"onUpdate:modelValue":N[2]||(N[2]=e=>a.languages=e),"hide-details":"auto",label:"Languge",itemTitle:"key",itemValue:"value",subtitle:"value"},null,8,["items","modelValue"])])])])])])])])}});export{C as default};
